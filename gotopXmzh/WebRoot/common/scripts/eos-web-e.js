if(EOSKey!=null)alert(EOSCANNOTINCLUDE);var EOSKey={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,PAUSE:19,CAPSLOCK:20,ESC:27,SPACE:33,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,WIN:91,WIN_R:92,MENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145},EOSKeyPress={};(function(){window.undefined=window.undefined;document.head=document.getElementsByTagName("head")[0];window.fAppVersion=parseFloat(navigator.appVersion);window.sUserAgent=navigator.userAgent.toLowerCase();var $=navigator.userAgent.toLowerCase();window.isIE9=$.indexOf("msie 9.0")>-1;window.isIE10=$.indexOf("msie 10.0")>-1;if(window.isIE9||window.isIE10)window.isIE=false;else window.isIE=$.indexOf("msie")>-1;window.isIE7=$.indexOf("msie 7")>-1;window.isFF=$.indexOf("firefox")>-1;window.isOpera=$.indexOf("opera")>-1;window.isWebkit=(/webkit|khtml/).test($);window.isSafari=$.indexOf("safari")>-1||window.isWebkit;window.isGecko=window.isMoz=!window.isSafari&&$.indexOf("gecko")>-1;window.isStrict=document.compatMode=="CSS1Compat";window.isBorderBox=window.isIE&&!window.isStrict;window.isSecure=window.location.href.toLowerCase().indexOf("https")===0;window.isWindows=($.indexOf("windows")!=-1||$.indexOf("win32")!=-1);window.isMac=($.indexOf("macintosh")!=-1||$.indexOf("mac os x")!=-1);window.isLinux=($.indexOf("linux")!=-1);if(!Array.prototype.push)Array.prototype.push=function($){this[this.length]=$};if((window.isGecko||window.isFF)&&HTMLElement)HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent});if(window.isMoz){Document.prototype.readyState=0;Document.prototype.onreadystatechange=null;Document.prototype.__changeReadyState__=function($){this.readyState=$;if(typeof this.onreadystatechange=="function")this.onreadystatechange()};Document.prototype.__initError__=function(){this.parseError.errorCode=0;this.parseError.filepos=-1;this.parseError.line=-1;this.parseError.linepos=-1;this.parseError.reason=null;this.parseError.srcText=null;this.parseError.url=null};Document.prototype.__checkForErrors__=function(){if(this.documentElement.tagName=="parsererror"){var $=/>([\s\S]*?)Location:([\s\S]*?)Line Number (\d+), Column (\d+):<sourcetext>([\s\S]*?)(?:\-*\^)/;$.test(this.xml);this.parseError.errorCode=-999999;this.parseError.reason=RegExp.$1;this.parseError.url=RegExp.$2;this.parseError.line=parseInt(RegExp.$3);this.parseError.linepos=parseInt(RegExp.$4);this.parseError.srcText=RegExp.$5}};Document.prototype.loadXML=function(C){this.__initError__();this.__changeReadyState__(1);var $=new DOMParser(),B=$.parseFromString(C,"text/xml");while(this.firstChild)this.removeChild(this.firstChild);for(var A=0;A<B.childNodes.length;A++){var _=this.importNode(B.childNodes[A],true);this.appendChild(_)}this.__checkForErrors__();this.__changeReadyState__(4)};Document.prototype.__load__=Document.prototype.load;Document.prototype.load=function($){this.__initError__();this.__changeReadyState__(1);this.__load__($)};Node.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this,"text/xml")})}if(document.implementation.hasFeature("XPath","3.0")){XMLDocument.prototype.selectNodes=function(A,B){if(!B)B=this;var D=this.createNSResolver(this.documentElement),$=this.evaluate(A,B,D,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),C=[];for(var _=0;_<$.snapshotLength;_++)C[_]=$.snapshotItem(_);return C};XMLDocument.prototype.selectSingleNode=function(_,A){if(!A)A=this;var $=this.selectNodes(_,A);if($.length>0)return $[0];else return null};Element.prototype.selectNodes=function($){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes($,this);else $warn("dom\u934f\u51aa\u790c\u6d93\u5d86\u656e\u93b8\u4e7belectNodes\u93c2\u89c4\u7876.")};Element.prototype.selectSingleNode=function($){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode($,this);else $warn("dom\u934f\u51aa\u790c\u6d93\u5d86\u656e\u93b8\u4e7belectSingleNode\u93c2\u89c4\u7876.")}}})();function createXmlDom(C){if(window.ActiveXObject){var B=["MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"];for(var $=0;$<B.length;$++){try{var _=new ActiveXObject(B[$]);if(C)_.loadXML(C);return _}catch(A){}}throw new Error("MSXML is not installed on your system.")}else if(document.implementation&&document.implementation.createDocument){_=document.implementation.createDocument("","",null);_.parseError={valueOf:function(){return this.errorCode},toString:function(){return this.errorCode.toString()}};_.__initError__();_.addEventListener("load",function(){this.__checkForErrors__();this.__changeReadyState__(4)},false);if(C)_.loadXML(C);return _}else throw new Error("Your browser doesn't support an XML DOM object.")}function $e(_,$){$=$||document;if(typeof(_)=="object")return _;var A=$name(_)||$id(_);return A}function $id(A,C){C=C||document;if(typeof(A)=="object")return A;var B=C.getElementById(A),D;if((isIE||isIE9||isIE10)&&B){if(B.id===A)D=B;else{var $=C.all[A];if($&&$.length)for(var _=0;_<$.length;_++)if($[_].id===A){D=$[_];break}}}else D=B;return D||$o(A)||null}function $ids($){if($.indexOf("[*]")>-1){var A=[];for(var _=1;_<Number.MAX_VALUE;_++){var C=$.replace("[*]","["+_+"]"),B=$id(C);if(B)A.push(B);else break}return A}else{A=[],B=$id($);if(B)A.push(B);return A}}function $names(D){if(typeof(D)=="object")return D;if(D.indexOf("[*]")>-1){var $=[];for(var _=1;_<Number.MAX_VALUE;_++){var A=D.replace("[*]","["+_+"]"),C=$name(A);if(C)$.push(C);else break}return $}else{var B=document.getElementsByName(D);if((isIE||isIE9||isIE10)){$=[];for(_=0;_<B.length;_++)if(B[_].name==D)$.push(B[_]);return $}else return B}}function $name(_){if(typeof(_)=="object")return _;var A=document.getElementsByName(_);if(!A)return null;if(isIE||isIE9||isIE10){for(var $=0;$<A.length;$++)if(A[$].name==_)return A[$]}else if(A.length>0)return A[0];return null}function $indexOf($,_){for(var B=0,A=$.length;B<A;B++)if($[B]==_)return B;return-1}function $contains(_,$){return $indexOf(_,$)>=0}function $remove(_,$){var A=$indexOf(_,$);if(A>=0)return _.splice(A,1)}function isArray($){return $&&typeof($.sort)==="function"&&typeof($.join)==="function"}var setInnerHTML=function(el,htmlCode,doc){el.innerHTML="";doc=doc||document;var back_write=doc.write;doc.write=function(){};var cacheScripts=doc.getElementsByTagName("script"),cacheSRC={};for(var i=0;i<cacheScripts.length;i++)if(cacheScripts[i].src)cacheSRC[cacheScripts[i].src]=true;else cacheSRC[cacheScripts[i].src]=false;if((isIE||isIE9||isIE10)){htmlCode="<div style=\"display:none\">for IE</div>"+htmlCode;var div=$create("div",doc);div.innerHTML=htmlCode;var scripts=div.getElementsByTagName("script"),execScripts=[],srcArray=[];for(i=scripts.length-1;i>-1;i--){var script=scripts[i];if(script.src){if(!cacheSRC[script.src]){srcArray.push(script.src);cacheSRC[script.src]=true}script.parentNode.removeChild(script)}else execScripts.push(script)}function setHTML(){el.innerHTML=div.innerHTML;el.removeChild(el.firstChild);for(var i=execScripts.length-1;i>=0;i--)eval(execScripts[i].innerHTML)}var index=srcArray.length-1;loadNext();function loadNext(){if(srcArray[index]){var $=$create("script",doc);$.src=srcArray[index];var _=doc.body.firstChild;if(_)doc.body.insertBefore($,_);else doc.body.appendChild($);index--;$.onreadystatechange=function(){if($.readyState=="loaded"||$.readyState=="complete"){$.onreadystatechange=null;loadNext()}}}else setHTML()}}else{var el_next=el.nextSibling,el_parent=el.parentNode;el_parent.removeChild(el);el.innerHTML=htmlCode;if(el_next)el_parent.insertBefore(el,el_next);else el_parent.appendChild(el)}};function setMaskSize(A){var _=document.getElementsByTagName("BODY")[0],$=getViewportHeight(),B=getViewportWidth();if($>_.scrollHeight)popHeight=$;else popHeight=_.scrollHeight;if(B>_.scrollWidth)popWidth=B;else popWidth=_.scrollWidth;A.style.height=popHeight+"px";A.style.width=popWidth+"px"}function getViewportHeight(){if(window.innerHeight!=window.undefined)return window.innerHeight;if(document.compatMode=="CSS1Compat")return document.documentElement.clientHeight;if(document.body)return document.body.clientHeight;return window.undefined}function getViewportWidth(){if(window.innerWidth!=window.undefined)return window.innerWidth;if(document.compatMode=="CSS1Compat")return document.documentElement.clientWidth;if(document.body)return document.body.clientWidth;return window.undefined}function toLength($){if(isNaN(Number($)))return $;else return $+"px"}var __page__components;if(typeof(__page__components)=="undefined")__page__components={};function PageControl(){}PageControl.add=function(C,B){if(!__page__components[C])__page__components[C]=B;else if(__page__components[C+"__is__array__"])__page__components[C].push(B);else{var $=[];$.push(__page__components[C]);$.push(B);__page__components[C]=$;__page__components[C+"__is__array__"]=true}var A=__page__components_rel;if(B.registerSubComponent&&A[C])for(var _=0;_<A[C].length;_++)if(A[C][_]){B.registerSubComponent(A[C][_]);A[C][_]=null}};var __page__components_rel;if(typeof(__page__components_rel)=="undefined")__page__components_rel={};PageControl.registerRelation=function($,C){if(!$||!C)return;var A=PageControl.getOne($),_=PageControl.getOne(C);if(A&&A.registerSubComponent)A.registerSubComponent(C);else if(($+"").indexOf("xml:")!=0){var B=__page__components_rel;B[$]=B[$]||[];B[$].push(C)}};top.currStack=top.currStack||[];PageControl.setFocus=function(C,D){try{var $;if(C)$=C.id;var _=top.currStack.length-1;for(;_>-1;_--){var B=top.currStack[_];if(B)if(B==C)break;else if(B==D)break;else{try{if(B.hide)B.hide()}catch(A){}if(_>=0)top.currStack.splice(_,1)}}if(C)top.currStack.push(C)}catch(A){}};PageControl.getCurrComp=function(){if(top.currStack.length>0)return top.currStack[top.currStack.length-1];else return null};PageControl.addtoStack=function($){if(!$contains(top.currStack,$)){try{top.currStack.push($)}catch(_){try{top.currStack=[];top.currStack.push($)}catch(A){}}}};PageControl.get=function($){return __page__components[$]};PageControl.getOne=function($){if(__page__components[$+"__is__array__"])return __page__components[$][0]||null;else return __page__components[$]||null};$o=PageControl.getOne;var EOS_FunctionCache={};function $function($,A,B){var _=$getFunction($)||window[$];if(typeof(_)=="function")return _.apply(A||this,B)}function $setFunction(_,$){EOS_FunctionCache[_]=$}function $getFunction($){return EOS_FunctionCache[$]}function $removeFunction($){EOS_FunctionCache[$]=null;delete EOS_FunctionCache[$]}var EVENTMANAGER_CONTIANS_ERROR="Element \u9428\ufffd tontains\u7481\u5267\u7586\u6fb6\u8fab\u89e6!";if(!Array.prototype.push)Array.prototype.push=function($){this[this.length]=$};if(navigator.product=="Gecko"){Document.prototype.elementFromPoint=function(C,$){this.addEventListener("mousemove",this.elementFromPoint__handler,false);var A=this.createEvent("MouseEvents"),B=this.getBoxObjectFor(this.documentElement),_={x:B.screenX,y:B.screenY};A.initMouseEvent("mousemove",true,false,this.defaultView,0,C+_.x,$+_.y,C,$,false,false,false,false,0,null);this.dispatchEvent(A);this.removeEventListener("mousemove",this.elementFromPoint__handler,false);return this.elementFromPoint__target};Document.prototype.elementFromPoint__handler=function($){this.elementFromPoint__target=$.explicitOriginalTarget;if(this.elementFromPoint__target.nodeType==Node.TEXT_NODE)this.elementFromPoint__target=this.elementFromPoint__target.parentNode;if(this.elementFromPoint__target.nodeName.toUpperCase()=="HTML"&&this.documentElement.nodeName.toUpperCase()=="HTML")this.elementFromPoint__target=this.getElementsByTagName("BODY").item(0);$.preventDefault();$.stopPropagation()};Document.prototype.elementFromPoint__target=null}if(!document.all){try{if(window.Node)Node.prototype.contains=function($){if(!$)return false;if(this==$)return true;var A=$.tagName,_=this.getElementsByTagName(A),C=_.length;for(var B=0;B<C;B++)if(_[B]==$)return true;return false}}catch(e){alert(EVENTMANAGER_CONTIANS_ERROR)}}if(typeof(_registryEvent)=="undefined")_registryEvent=[];if(typeof(_registryOutClick)=="undefined")_registryOutClick=[];function eventManager(){}eventManager.onLoadFuncList=[];eventManager.onLoadFunc=function(){var _=this;for(var $=0;$<eventManager.onLoadFuncList.length;$++){var A=eventManager.onLoadFuncList[$];A.apply(_,arguments)}};eventManager.onLoadFunc.hasAdd=false;eventManager.onLoad=function($,B,A){eventManager.onLoadFuncList.push(B);if(!eventManager.onLoadFunc.hasAdd){eventManager.onLoadFunc.hasAdd=true;var _="load";B=eventManager.onLoadFunc;if($.addEventListener){$.addEventListener(_,B,A);_registryEvent.push({obj:$,type:_,fn:B,useCapture:A});return true}else if($.attachEvent&&$.attachEvent("on"+_,B)){A=false;_registryEvent.push({obj:$,type:_,fn:B,useCapture:A});return true}}return false};eventManager.add=function(_,B,$,A){if(typeof _=="string")_=document.getElementById(_);if(_==null||$==null)return false;if(B=="mousewheel"||B=="mousescroll")B=(window.isGecko)?"DOMMouseScroll":"mousewheel";else if(B=="load")return eventManager.onLoad(_,$,A);if(_.addEventListener){_.addEventListener(B,$,A);_registryEvent.push({obj:_,type:B,fn:$,useCapture:A});return true}if(_.attachEvent&&_.attachEvent("on"+B,$)){_registryEvent.push({obj:_,type:B,fn:$,useCapture:false});return true}return false};eventManager.addOutClick=function($,_,A){_registryOutClick.push({obj:$,fn:_,params:A})};eventManager.outClick=function(){PageControl.setFocus()};eventManager.remove=function(_,B,$,A){if(_.removeEventListener)_.removeEventListener(B,$,A);else if(_.detachEvent)_.detachEvent("on"+B,$);if(_["on"+B])_["on"+B]=null};eventManager.CleanUp=function(){if(_registryEvent)for(var $=0;$<_registryEvent.length;$++){eventManager.remove(_registryEvent[$].obj,_registryEvent[$].type,_registryEvent[$].fn);_registryEvent[$].obj=null;_registryEvent[$].fn=null}ReleaseEvents();_registryEvent=null;_registryOutClick=null;__page__components=null;window.onerror=null;eventManager.outClick=null;if(window["CollectGarbage"])CollectGarbage()};eventManager.getElement=function(_){_=_||window;var A;if(_.event)A=_.event.srcElement;else{var $=eventManager.getEvent(_);A=$.target}return A.nodeType==3?A.parentNode:A};eventManager.stopPropagation=function(A){A=A||window;var $=A.event?A.event:eventManager.getEvent(A);if(!$)return;var _=$.target||$.srcElement;if($.stopPropagation){if(_.type!="select-one")$.preventDefault();$.stopPropagation()}else{if(_.type!="select-one")$.returnValue=false;$.cancelBubble=true}};eventManager.stopEvent=eventManager.stopPropagation;eventManager.getPageScroll=function(C){C=C||window;var _=C.document.documentElement,B=C.document.body,$=0,A=0;$=Math.max(_.scrollLeft,B.scrollLeft);A=Math.max(_.scrollTop,B.scrollTop);return[$,A]};eventManager.getPointX=function(_){_=_||window;var $=eventManager.getEvent(_),A=$.pageX;if(!A&&0!==A){A=$.clientX||0;if((isIE||isIE9||isIE10))A+=eventManager.getPageScroll(_)[0]}return A};eventManager.getPointY=function(_){_=_||window;var $=eventManager.getEvent(_),A=$.pageY;if(!A&&0!==A){A=$.clientY||0;if((isIE||isIE9||isIE10))A+=eventManager.getPageScroll(_)[1]}return A};eventManager.getWheel=function($){$=$||window.event||eventManager.getEvent();return($.wheelDelta)?$.wheelDelta/120:-($.detail||0)/3};eventManager.getEvent=function(_){_=_||window;if(_.event)return _.event;else{var $=eventManager.getEvent.caller;while($!=null){var A=$.arguments[0];if(A)if(window["Event"]&&A instanceof Event)return A;$=$.caller}return null}};eventManager.getKeyCode=function(_){_=_||window;if(_.event)return _.event.keyCode;else{var $=eventManager.getEvent(_);if(!$)return null;return $.keyCode}};function ReleaseEvents(){var B=["focus","blur","click","mousedown","mouseup","mouseover","keydown","keypress","keyup","mouseout","change"],_=function(_){var $;for($=0;$<B.length;$++)if(_["on"+B[$]])_["on"+B[$]]=null},$=document.all||document.getElementsByTagName("*");if($)for(var A=0;A<$.length;A++)_($[A])}function ReleaseElemEvents(A){var B=["focus","blur","click","mousedown","mouseup","mouseover","keydown","keypress","keyup","mouseout","change"],_=function(_){var $;for($=0;$<B.length;$++)if(_["on"+B[$]])_["on"+B[$]]=null};_(A);var C=A.getElementsByTagName("*");if(C)for(var $=0;$<C.length;$++)_(C[$])}eventManager.add(window,"unload",eventManager.CleanUp);eventManager.add(document,"mousedown",eventManager.outClick);eventManager.stopBubble=function(_){_=_||window;var $=_.event?_.event:eventManager.getEvent(_);if(!$)return;if($.stopPropagation)$.stopPropagation();else $.cancelBubble=true};function StringBuffer(){this.values=new Array()}StringBuffer.prototype.append=function($){this.values.push($);return this};StringBuffer.prototype.clear=function(){return this.values=[]};StringBuffer.prototype.toString=function(){return this.values.join("")};function allTrim($){if($)return($+"").replace(/ /g,"");else{if($=="")return $;return null}}function trim(_,$){if(_!==""&&(!_.replace||!_.length))return _;var A=($>0)?(/^\s+/):($<0)?(/\s+$/):(/^\s+|\s+$/g);return _.replace(A,"")}function lTrim($){return trim($,1)}function rTrim($){return trim($,-1)}function substringAfter(_,A){if(!_||!A)return null;else{var $=_.indexOf(A);if($>=0){$=$+A.length;return _.substr($)}else return""}}function substringBefore(_,A){if(!_||!A)return null;else{var $=_.indexOf(A);if($>=0)return _.substring(0,$);else return""}}function getBytesLen(_){if(_){var $=/[^\x00-\xff]/g;return(_+"").replace($,"aa").length}else{if(_=="")return 0;return-1}}function get2BytesCharsLen($){if($)return $.length;else{if($=="")return 0;return-1}}function xmlConversion($){if($)return($+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;");else{if($=="")return $;return null}}function htmlConversion($){if($)return($+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(" ","&nbsp;");else{if($==="")return $;return null}}function dateFormat(A,$,_){var B=stringToDate(A,$);if(isNaN(B))alert(DATE_FORMAT_ERROR);else return dateToString(B,_);return null}function isDate($,_){if($===null||$===undefined||$=="")return false;$=formatSupport($,_);var A=_.replace("yyyy","\\d{4}").replace(/MM/,"\\d{2}").replace("dd","\\d{2}").replace("HH","\\d{2}").replace(/mm/,"\\d{2}").replace("ss","\\d{2}").replace(".S",".\\d{1}");if(!(new RegExp(A)).test($))return false;var B=isFormatDate($,_),C=isFormatTime($,_);if(B||C)return true;return false}function isTimeFormat($){if(typeof($)=="string")return $.indexOf("HH")!=-1&&$.indexOf("mm")!=-1&&$.indexOf("ss")!=-1;else return false}function isDateFormat($){if(typeof($)=="string")return $.indexOf("yyyy")!=-1&&$.indexOf("MM")!=-1&&$.indexOf("dd")!=-1;else return false}function timeFormat(A,$,_){var B="00:00:00";if(isFormatTime(A,$)){if(isTimeFormat(_))B=setTime(A,$,_);return B}else alert(TIME_FORMAT_ERROR);return B}function isFormatTime(F,$){if(!F||!$)return false;if(F.length!=$.length)return false;var C=$.indexOf("HH");if(C==-1)return false;var D=F.substring(C,C+2),_=$.indexOf("mm");if(_==-1)return false;var A=F.substring(_,_+2),E=$.indexOf("ss");if(E==-1)return false;var B=F.substring(E,E+2);if(!isNumber(D)||D<0||D>23)return false;if(!isNumber(A)||A<0||A>59)return false;if(!isNumber(B)||B<0||B>59)return false;return true}function isFormatDate(B,F){if(!B||!F)return false;if(B.length!=F.length)return false;var E=F.indexOf("yyyy");if(E==-1)return false;var $=B.substring(E,E+4),D=F.indexOf("MM");if(D==-1)return false;var _=B.substring(D,D+2),A=F.indexOf("dd");if(A==-1)return false;var C=B.substring(A,A+2);if(!isNumber($)||$>10000||$<999)return false;if(!isNumber(_)||_>12||_<1)return false;if(C>getMaxDay($,_)||C<1)return false;return true}function formatSupport(_,$){if($=="yyyyMMddHHmmss"){if(_.length==8)_=_+"000000"}else if($=="yyyyMMdd"){if(_.length==14)_=_.substring(0,8)}else if($=="yyyy-MM-dd HH:mm:ss"){if(_.length==10)_=_+" 00:00:00"}else if($=="yyyy-MM-dd")if(_.length==20)_=_.substring(0,10);return _}function stringToDate(J,O){var E=new Date();if(!J||J=="")return E;if(!O||O=="")O="yyyy-MM-dd";var V=O.replace(/[^y|Y]/g,""),C=O.replace(/[^M]/g,""),I=O.replace(/[^d]/g,""),Q=O.indexOf(V),_=V.length,K=J.substring(Q,Q+_)*1;if(_==2)if(K<50)K+=2000;else K+=1900;var N=O.indexOf(C),A=J.substring(N,N+C.length)*1-1,M=O.indexOf(I),T=J.substring(M,M+I.length)*1,U=O.replace(/[^H]/g,""),R=O.replace(/[^h]/g,""),H=O.replace(/[^m]/g,""),G=O.replace(/[^S|s]/g,""),B=0;if(U&&U!=""){var $=O.indexOf(U);if($>-1)B=J.substring($,$+U.length)}if(R&&R!=""){var F=O.indexOf(R);if(F>-1)B=J.substring(F,F+R.length)}var D=0;if(H&&H!=""){var P=O.indexOf(H);if(P>-1)D=J.substring(P,P+H.length)}var S=0;if(G&&G!=""){var L=O.indexOf(G);if(L>-1)S=J.substring(L,L+G.length)}return new Date(K,A,T,B,D,S)}function dateToString(C,N){if(!N||N=="")N="yyyy-MM-dd";C=C||new Date();var H=C.getFullYear().toString(),J=(C.getMonth()+1).toString(),E=C.getDate().toString(),M=C.getMinutes().toString(),K=C.getSeconds().toString(),B=C.getHours().toString(),I=N.replace(/[^y|Y]/g,"");if(H.length<4)H="0"+H;if(I.length==2)H=H.substring(2,4);var D=N.replace(/[^M]/g,"");if(D.length>1)if(J.length==1)J="0"+J;var G=N.replace(/[^d]/g,"");if(G.length>1)if(E.length==1)E="0"+E;var L=N.replace(/[^H]/g,"");if(L&&L.length>1)if(B.length==1)B="0"+B;var $=N.replace(/[^h]/g,"");if($&&$.length>1){if(B-12>0)B=(B-12)+"";if(B.length==1)B="0"+B}var A=N.replace(/[^m]/g,"");if(A&&A.length>1)if(M.length==1)M="0"+M;var F=N.replace(/[^S|s]/g,"");if(F&&F.length>1)if(K.length==1)K="0"+K;var _=N;if(I)_=_.replace(I,H);if(D)_=_.replace(D,J);if(G)_=_.replace(G,E);if($)_=_.replace($,B);if(L)_=_.replace(L,B);if(A)_=_.replace(A,M);if(F)_=_.replace(F,K);return _}function dateToStringValue($){var _=String($);if(_.length==1)_="0"+_;return _}function getMaxDay(_,$){if($==4||$==6||$==9||$==11)return"30";if($==2)if(_%4==0&&_%100!=0||_%400==0)return"29";else return"28";return"31"}function isNumber(_){var $=/^(\d+)$/;return $.test(_)}function setDate(_,E,D){var C=E.indexOf("yyyy"),H=_.substring(C,C+4),F=E.indexOf("MM"),A=_.substring(F,F+2),G=E.indexOf("dd"),$=_.substring(G,G+2),B=D;B=B.replace(/yyyy/i,H);B=B.replace(/MM/i,A);B=B.replace(/dd/i,$);return B}function setTime(C,_,B){var D="00",G="00",E="00",$=_.indexOf("HH"),A=_.indexOf("mm"),F=_.indexOf("ss");if(F!=-1&&$!=-1&&A!=-1){E=C.substring(F,F+2);G=C.substring(A,A+2);D=C.substring($,$+2);if(!isNumber(D)||D>"23"||D<"00"){alert(DATE_FORMAT_ERROR);return""}if(!isNumber(G)||G>"59"||G<"00"){alert(DATE_FORMAT_ERROR);return""}if(!isNumber(E)||E>"59"||E<"00"){alert(DATE_FORMAT_ERROR);return""}}else if(!(F==-1&&$==-1&&A==-1)){alert(DATE_FORMAT_ERROR);return""}B=B.replace(/HH/i,D);B=B.replace(/mm/i,G);B=B.replace(/ss/i,E);return B}Number.prototype.NAN0=function(){if(isNaN(this))return 0;else return this};function numberToMoney(_,$){_=_.toString();$=$?$:NUMBER_MONEY_PREFIX;if(isNaN(_))_="0";var C=(_==(_=Math.abs(_)));_=Math.floor(_*100+0.50000000001);var A=_%100;_=Math.floor(_/100).toString();if(A<10)A="0"+A;for(var B=0;B<Math.floor((_.length-(1+B))/3);B++)_=_.substring(0,String(_).length-(4*B+3))+","+_.substring(_.length-(4*B+3));return(((C)?"":"-")+$+_+"."+A)}function numberToChinese(M){var _=99999999999.99,I,A,N="",E,J,$,C,O,L,G,B,K,F,H,D=M;D=D.toString();if(D==""){alert(NUMBER_CHINESE_ERROR_NULL);return""}if(D.indexOf("-")==0){D=D.substr(1);N=CN_MINUS}if(D.match(/[^,.\d]/)!=null){alert(NUMBER_CHINESE_ERROR_CHARATER);return""}if((D).match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/)==null){alert(NUMBER_CHINESE_ERROR_CHARATER);return""}D=D.replace(/,/g,"");D=D.replace(/^0+/,"");if(Number(D)>_){alert(NUMBER_CHINESE_ERROR_LARGE);return""}E=D.split(".");if(E.length>1){I=E[0];A=E[1];A=A.substr(0,2)}else{I=E[0];A=""}J=new Array(CN_ZERO,CN_ONE,CN_TWO,CN_THREE,CN_FOUR,CN_FIVE,CN_SIX,CN_SEVEN,CN_EIGHT,CN_NINE);$=new Array("",CN_TEN,CN_HUNDRED,CN_THOUSAND);C=new Array("",CN_TEN_THOUSAND,CN_HUNDRED_MILLION);O=new Array(CN_TEN_CENT,CN_CENT);if(Number(I)>0){L=0;for(G=0;G<I.length;G++){B=I.length-G-1;K=I.substr(G,1);F=B/4;H=B%4;if(K=="0")L++;else{if(L>0)N+=J[0];L=0;N+=J[Number(K)]+$[H]}if(H==0&&L<4)N+=C[F]}N+=CN_DOLLAR}if(A!="")for(G=0;G<A.length;G++){K=A.substr(G,1);if(K!="0")N+=J[Number(K)]+O[G]}if(N=="")N=CN_ZERO+CN_DOLLAR;if(A=="")N+=CN_INTEGER;N=CN_SYMBOL+N;return N}function formatNumber(_,C,A){var $=C.split(";"),B;if($.length==1)B=singleFormat(_,C,A);else if($.length==2){if(_>0)B=singleFormat(_,$[0],A);else B=singleFormat(_,$[1],A)}else if($.length==3){if(_<0)B=singleFormat(_,$[1],A);else if(_>0)B=singleFormat(_,$[0],A);else B=singleFormat(_,$[2],A)}else alert("error format "+C);return B}function singleFormat(N,A,K){N=Number(N);if(isNaN(N))return N;var B,M,H,F,C="",J="",$="",P="",I,_,O,E,L=0,D=0,G="";A=(A)?A+"":"";if(A.indexOf(",")>=0)F=",";if(A.indexOf("%")>=0){C="%";N=N/100}if(K)G=K;s=A.split(".");I=((s[0]==""||s[0]==null||s[0]=="undefinded")?"":s[0]);I=I.split("").reverse().join("");_=(s[1]==""||s[1]==null||s[1]=="undefinded")?"":s[1];N=toFixedFunc(N,_.length);if(N<0)J="-";N+="";if(J!="")N=N.replace("-","");s=N.split(".");O=((s[0]==""||s[0]==null||s[0]=="undefinded")?"":s[0]);O=O.split("").reverse().join("");E=(s[1]==""||s[1]==null||s[1]=="undefinded")?"":s[1];if(O)L=O.length;if(I.length>L)L=I.length;for(B=0;B<L;B++){M=O.charAt(B);H=I.charAt(B);D++;if(D==4&&F&&(M||H=="0"))P+=F;if(H=="0"&&!M)P+="0";else if(M)P+=M;if(D==4)D=1}if(_)L=_.length;for(B=0;B<L;B++){M=E.charAt(B);H=_.charAt(B);if(H=="0"&&!M)$+="0";else if((H=="#"||H=="0")&&M)$+=M}H=((P+"").split("").reverse().join(""))+(($)?"."+$:"");if(C=="%")H+=C;else H=C+H;return G+J+H}function toFixedFunc($,_){return $.toFixed(_)}function linkConfirm(B,A,_){var $=$id("__eos_confirm_form");if(!$){$=$create("form");$.id="__eos_confirm_form";bodyAddNode($)}$.action=A;$.method="post";$.target=_;if(window.confirm(B))$.submit()}function _get_top_window(){if(top.document&&(top.document.getElementsByTagName("frameset").length==0))return top;var _=window,$=window;while(_&&top!=_){_=_["parent"];if(_&&_.document&&(_.document.getElementsByTagName("frameset").length==0))$=_}return $}function moveScript(A,C){var D=A.getElementsByTagName("script");if(C.parentWindow&&A.parentWindow)C.parentWindow.contextPath=A.parentWindow.contextPath;var $="";for(var _=0;_<D.length;_++)if(D[_].src!="")$+="<script src='"+D[_].src+"'></script>";var B=$create("div",C);B.style.display="none";C.body.appendChild(B);setInnerHTML(B,$,C)}function moveCss(B,D){if(true)return;var E=B.getElementsByTagName("link");for(var _=0;_<E.length;_++){var A=E[_].href;if(D.createStyleSheet){var $=D.createStyleSheet();$.addImport(A);D.styleSheets.item[D.styleSheets.length]=$}else{var C=D.styleSheets.length,F=$create("style",D);F.setAttribute("type","text/css");D.documentElement.childNodes[0].appendChild(F);D.styleSheets[C].insertRule("@import url("+A+");",0)}}}function addContextPath($){if($)if($.indexOf("/")==0){var _=window["contextPath"];if($.indexOf(_)!=0)return _+$}return $}function getParentByTagName($,_){if(_&&$){_=_.toLowerCase();while(($=$.parentNode))if($.tagName&&$.tagName.toLowerCase()==_)return $;return null}else return $?$:null}function getEventTargetByTagName(B,$,A){var _=B.srcElement||B.target;if(!_)return null;A=A||5;var $=$.toLowerCase();do if(_.tagName&&_.tagName.toLowerCase()==$)return _;while((_=_.parentNode)&&((A--)>0));return null}function getScreenPosition(C,D){var A=window,$=getElementXY(C),B=$[0],_=$[1];while(A!=D&&A!=top){if(A.frameElement){$=getElementXY(A.frameElement);B=B+$[0];_=_+$[1]}A=A.parent}return[B,_]}function addButtonToText(A){if(A){var J=$create("div");J.hideFocus=true;J.style.display="block";J.style.zIndex=99999;A.className="eos-drop-down-text";function H(){bodyAddNode(J);document.body.appendChild(J)}if((isIE||isIE9||isIE10)){if(document.readyState=="complete")H();else eventManager.add(window,"load",H)}else{try{H()}catch(L){eventManager.add(window,"load",H)}}function M(){if(!A.getAttribute("_isFocus")&&!A.disabled){J.className="eos-drop-down-button-over";setButtonPosition(A,J);A.className="eos-drop-down-text-over"}}function F(){if(!A.disabled&&!A.readOnly){J.className="eos-drop-down-button-focus";setButtonPosition(A,J);A.className="eos-drop-down-text-focus"}}function B(){if(!A.getAttribute("_isOver")&&!A.getAttribute("_isFocus")&&!J.getAttribute("_isOver"))A.className="eos-drop-down-text"}function C(){A.setAttribute("_isOver",true);M()}function K(){A.setAttribute("_isFocus",true);F();eventManager.stopPropagation()}function _(){J.setAttribute("_isOver",true);M()}function I(){J.setAttribute("_isFocus",true);F()}function G(){A.setAttribute("_isOver",false);setTimeout(B,300)}function $(){A.setAttribute("_isFocus",false);setTimeout(B,300)}function E(){J.setAttribute("_isOver",false);setTimeout(B,300)}function D(){J.setAttribute("_isFocus",false);setTimeout(B,300)}eventManager.add(A,"mouseover",C);eventManager.add(A,"focus",K);eventManager.add(A,"click",K);eventManager.add(J,"mouseover",_);eventManager.add(J,"focus",I);eventManager.add(J,"click",I);eventManager.add(A,"mouseout",G);eventManager.add(A,"blur",$);eventManager.add(J,"mouseout",E);eventManager.add(J,"blur",D);eventManager.addOutClick(A,$);return J}return null}function hideButton(B,$){var A=B.offsetHeight,_=B.offsetWidth;B.style.width=_+"px"}function setButtonPosition(B,D){var $=B.offsetHeight,C=B.offsetWidth;B.style.width=C+"px";var A=getElementXY(B);if(A){var _=A[1];D.style.position="absolute";var E=A[0]*1+C*1-$;$=$-(isBorderBox?0:2);D.style.width=$+"px";D.style.height=$+"px";D.style.overflow="hidden";D.style.top="0px";D.style.left="0px";D.style.display="";setElementXY(D,[E,_])}}function getRect(B){var A=getPosition(B),_=A.left+B.offsetWidth,$=A.top+B.offsetHeight;return{left:A.left,top:A.top,right:_,bottom:$}}function moveSelectedOptions(B,D,C){C=Number(C);if(isNaN(C))C=Number.MAX_VALUE;var A=[];for(var _=0;_<B.options.length;_++){var $=B.options[_];if($.selected)A.push($)}for(_=0;_<A.length;_++)if(D.options.length>=C)break;else{$=A[_];D.appendChild($)}}function moveAllOptions(B,D,C){C=Number(C);if(isNaN(C))C=Number.MAX_VALUE;var A=[];for(var _=0;_<B.options.length;_++){var $=B.options[_];A.push($)}for(_=0;_<A.length;_++){if(D.options.length>=C)break;$=A[_];D.appendChild($)}}function compileTemplate(template,t_start,t_end,t_script,varName){var TEMPLATE_START=t_start||"$[",TEMPLATE_END=t_end||"]",TEMPLATE_SCRIPT=t_script||"$",startLength=TEMPLATE_START.length,endLength=TEMPLATE_END.length,scriptLength=TEMPLATE_SCRIPT.length,templateC=[],snippets=[],current=0;while(true){var start=template.indexOf(TEMPLATE_START,current),sBegin=start+startLength,sEnd=template.indexOf(TEMPLATE_END,sBegin);if(sBegin>=startLength&&sEnd>sBegin){templateC.push(template.substring(current,start));var sn=template.substring(sBegin,sEnd);if(sn.indexOf(TEMPLATE_SCRIPT)==0)sn=eval(sn.substring(scriptLength));else snippets.push(templateC.length);templateC.push(sn)}else{templateC.push(template.substring(current));break}current=sEnd+endLength}templateC.snippets=snippets;templateC.varName=varName;return templateC}function runExpression(B,A){var C=B.snippets,D=[];for(var _=0,E=0,$=B.length;_<$;_++)if(C[E]==_){D[_]=A.getProperty(B[_]);E++}else D[_]=B[_];return D.join("")}function sortTableByCol(M,E,B){M=$id(M);var C=getParentByTagName(M,"table");if(!M||!C)return;var H;try{H=C.getElementsByTagName("thead");H=H?H[0]:null}catch(F){H=null}var L=C.tBodies[0],A=H&&H.rows.length>0?0:(M.parentNode.rowIndex+1),$=L.rows,N=[];for(var J=A;J<$.length;J++){N[J-A]=$[J];if(!N[J-A].getAttribute("__eos_orgorder"))N[J-A].setAttribute("__eos_orgorder",J+1+"")}var D=I;function O($){return $.getAttribute("value")}function I($,_){return $.innerText}function K($,_){return _.getAttribute("__eos_orgorder")}B=B=="asc"?"desc":"asc";if(C.sortCol==M){B=M.getAttribute("__eos_sort");if(B=="desc"){D=K;B="default";N.sort(sortCompareTRs(M.cellIndex,E,B,D))}else if(B=="default"){B="asc";N.sort(sortCompareTRs(M.cellIndex,E,B,D))}else{N.reverse();B=B=="asc"?"desc":"asc"}}else N.sort(sortCompareTRs(M.cellIndex,E,B,D));var _=document.createDocumentFragment();for(J=0;J<N.length;J++)_.appendChild(N[J]);L.appendChild(_);if(C.sortFlag&&C.sortCol!=M)C.sortFlag.className="eos-sorttable-default";C.sortCol=M;var G=M.getElementsByTagName("span");if(G.length<1||(G[G.length-1].className+"").indexOf("eos-sorttable-")<0){C.sortFlag=$createElement("span");M.appendChild(C.sortFlag)}else C.sortFlag=G[G.length-1];M.setAttribute("__eos_sort",B);M.style.position="relative";C.sortFlag.className="eos-sorttable-"+B;C.sortFlag.innerHTML="&#160;"}function sortCompareTRs(E,B,D,C){var A=1;if(D=="desc"||D=="d")A=-1;function _(_,$){switch($){case"int":return parseInt(_);case"float":return parseFloat(_);case"date":return""+_;default:return""+_}}return function $($,F){var G,D;G=_(C($.cells[E],$),B);D=_(C(F.cells[E],F),B);if(G<D)return-1*A;else if(G>D)return 1*A;else return 0}}function submitFormBy($,B,_,A){if($){$.action=_||$.action;$.target=A||$.target;if($.elements["_eosFlowAction"])$.elements["_eosFlowAction"].value=B;$.submit()}}function gotoPage(H,_,B,C,$,G){var A;if(G)A=$id(G)||$name(G);var D,I,F;if(A){D=A.elements[H+".begin"];I=A.elements[H+".length"];F=A.elements[H+".count"]}else{D=$e(H+".begin");I=$e(H+".length");F=$e(H+".count");A=getParentByTagName(D,"form")}var E=0,_=!_?1:Number(_);if(typeof(_)!="number")_=$e(_).value;_=parseInt(_/1);_=isNaN(_)||_<1?1:_;var J=E/1+I.value/1*(_-1)/1;D.value=J<0?0:J;submitFormBy(A,B,C,$)}function firstPage(E,B,C,$,_){var D;if(_)D=$id(_)||$name(_);var A;if(D)A=D.elements[E+".begin"];else{A=$e(E+".begin");D=getParentByTagName(A,"form")}A.value=0;submitFormBy(D,B,C,$)}function prevPage(_,F,G,H,B){var A;if(B)A=$id(B)||$name(B);var E,D,$;if(A){E=A.elements[_+".begin"];D=A.elements[_+".length"]}else{E=$e(_+".begin");D=$e(_+".length");A=getParentByTagName(E,"form")}var C=D&&D.value?D.value:0,I=Number(E.value)-Number(D.value);E.value=I<0?0:I;submitFormBy(A,F,G,H)}function nextPage(C,E,F,B,A){var D;if(A)D=$id(A)||$name(A);var _,G,$;if(D){_=D.elements[C+".begin"];G=D.elements[C+".length"]}else{_=$e(C+".begin");G=$e(C+".length");D=getParentByTagName(_,"form")}var H=G&&G.value?G.value:0;_.value=Number(_.value)+Number(G.value);submitFormBy(D,E,F,B)}function lastPage(C,E,F,B,A){var D;if(A)D=$id(A)||$name(A);var _,G,$;if(D){_=D.elements[C+".begin"];G=D.elements[C+".length"];$=D.elements[C+".count"]}else{_=$e(C+".begin");G=$e(C+".length");$=$e(C+".count");D=getParentByTagName(_,"form")}var H=Math.floor((($.value/1)+(G.value/1)-1)/(G.value/1));_.value=(H-1)*(G.value/1);D=getParentByTagName(_,"form");submitFormBy(D,E,F,B)}function getMaxZindex(E){E=E||document;var B=E.all||E.getElementsByTagName("*"),C=B.length,D=0;if(isIE||isIE9||isIE10){for(var $=0;;$++){var A=B[$];if(A==null)break;var _=parseInt(GetCurrentStyle(A,"zIndex"));if(!isNaN(_))if(_>D)D=_}}else for($=0;$<C;$++){A=B[$],_=parseInt(GetCurrentStyle(A,"zIndex"));if(!isNaN(_))if(_>D)D=_}return D+1}function getCurrentStyle($,A){if($.currentStyle)return $.currentStyle[A];else if(window.getComputedStyle){A=A.replace(/([A-Z])/g,"-$1");A=A.toLowerCase();var _=window.getComputedStyle($,"");if(_)return _.getPropertyValue(A);else return null}return null}var GetCurrentStyle=getCurrentStyle;function setOpacity(_,$){_=$e(_);if(!_)return _;$=$>1?1:($<0?0:$);if(!_.currentStyle||!_.currentStyle.hasLayout)_.style.zoom=1;if((isIE||isIE9||isIE10))_.style.filter=($==1)?"":"alpha(opacity="+$*100+")";_.style.opacity=$;if($===0){if(_.style.visibility!="hidden")_.style.visibility="hidden"}else if(_.style.visibility!="visible")_.style.visibility="visible";return _}function fx_size(E,C,A,D,_){var F=$c(E),$=F.effects({duration:_||400}),B={};if(C!==null&&C!==undefined)B.width=C;if(A!==null&&A!==undefined)B.height=A;$.start(B).chain(D||function(){})}function fx_fadeIn(D,C,_){var $=$c(D);$.setOpacity(0);$.setStyle("display","");var B=$.effects({duration:_||400}),A={"opacity":1};B.start(A).chain(C||function(){})}function fx_fadeOut(D,C,_){var $=$c(D),B=$.effects({duration:_||400}),A={"opacity":0};B.start(A).chain(C||function(){$.setOpacity(0);$.setStyle("display","none")})}function fx_slideIn($,_){_=_||new Fx.Slide($);_.slideIn();return _}function fx_slideOut($,_){_=_||new Fx.Slide($);_.slideOut();return _}function fx_DD(A,_){_=_||{};var $=new Drag.Move($c(A),_)}function getScreenPosition(C,D){var A=window,$=getElementXY(C),B=$[0],_=$[1];while(A!=D&&A!=top){if(A.frameElement){$=getElementXY(A.frameElement,A.parent);B=B+$[0];_=_+$[1]}A=A.parent}return[B,_]}function accordionCollapse(B){if(B.processaccordion)return;if(B.style.display=="none")return;B.processaccordion=true;var _=B.nextSibling;if(_==null||!_.isAccordion){_=document.createElement("div");_.isAccordion=true;_.style.overflow="hidden";var A=B.parentNode;A.insertBefore(_,B.nextSibling)}_.style.width=B.offsetWidth;_.style.height=B.offsetHeight;_.style.display="";B.style.width=B.clientWidth;B.style.position="absolute";var $=1;setTimeout(function(){return accordionIn.apply(B,[{"div":_,"acc":B,"height":B.offsetHeight,"progress":0,"step":$}])},41)}function accordionExpand(C){if(C.processaccordion)return;if(C.style.display!="none")return;C.processAccoridion=true;var _=C.nextSibling;if(_==null||!_.isAccordion){_=document.createElement("div");_.isAccordion=true;var B=C.parentNode;_.style.overflow="hidden";B.insertBefore(_,C.nextSibling)}C.style.display="";C.style.width=C.clientWidth;C.style.position="absolute";_.style.width=C.offsetWidth;_.style.height=0;_.style.display="";var E=C.offsetHeight,A=5,$=5;while(true){$=$+A*3;if($>=E)break;else A=A*3}var D=E-($-A*3);_.style.height=D;C.style.marginTop=D*-1;C.style.clip="rect("+D+" auto auto auto)";setTimeout(function(){return accordionOut.apply(C,[{"div":_,"acc":C,"height":E,"progress":D,"step":A}])},41)}function accordionIn($){$.progress=$.progress+$.step;if($.step<12)$.step=$.step+1;else $.step=$.step*3;$.acc.style.clip="rect("+$.progress+" auto auto auto)";$.acc.style.marginTop=$.progress*-1;if($.height-$.progress<0)$.div.style.display="none";else $.div.style.height=$.height-$.progress;if($.progress>=$.height){$.acc.style.display="none";$.div.style.display="none";$.acc.processaccordion=false}else setTimeout(function(){return accordionIn.apply($,[$])},41)}function accordionOut($){if($.height-$.progress<=5)$.progress=$.progress+1;else{$.progress=$.progress+$.step;$.step=$.step/3}$.acc.style.clip="rect("+($.height-$.progress)+" auto auto auto)";$.acc.style.marginTop=$.progress-$.height;$.div.style.height=$.progress;if($.progress>=$.height){$.acc.style.position="static";$.div.style.display="none";$.acc.processaccordion=false;return}else setTimeout(function(){return accordionOut.apply($,[$])},41)}function msgbox($){showModalCenter(contextPath+"/common/jsp/msgBox.jsp",[$],null,null,null,"\u93bb\u612e\u305a\u6dc7\u2103\u4f05")}function checkOnsubmit(A){var _=A.submit,$=A.onsubmit;A.oldsubmit=_;A.oldOnsubmit=$;A.submit=function(){if(!checkForm(this))return;else this.oldsubmit()};A.onsubmit=function(){if(checkForm(this)){if(this.oldOnsubmit)return this.oldOnsubmit()}else return false}}var moveDivToCenter=function(_){var $=_get_top_window()||window;_.style.top=(($.document.body.clientHeight-_.offsetHeight)/2+$.document.body.scrollTop)+"px";_.style.left=(($.document.body.clientWidth-_.offsetWidth)/2+$.document.body.scrollLeft)+"px"};function initShadow(C,F){if(isFF){F=F||document;var D=C.nextSibling;if(D==null||!D.isShadow){var $=C.parentNode,A=C.offsetWidth,E=C.offsetHeight,_=$createElement("div",{doc:F});_.isShadow=true;$.style.width=A;$.style.height=E;_.style.width=A+5;_.style.height=E+5;_.style.position="absolute";_.style.overflow="hidden";_.style.left=0;_.style.top=0;_.style.zIndex=-999;$.insertBefore(_,C.nextSibling);C.shadowContainter=_;_.innerHTML="<TABLE style=\"width: 100%;height:100%\" cellspacing=\"0\" cellpadding=\"0\"><TR height=\"5px\"><TD width=\"5px\"></TD><TD></TD><TD width=\"5px\" class=\"eos-shadow-right-top\"></TD></TR><TR><TD></TD><TD ><div ></div></TD><TD width=\"5px\"  class=\"eos-shadow-right\"></TD></TR><TR height=\"5px\"><TD width=\"5px\" class=\"eos-shadow-left-bottom\"></TD><TD class=\"eos-shadow-bottom\"></TD><TD width=\"5px\" class=\"eos-shadow-corner\"></TD></TR></TABLE>";var B=_.getElementsByTagName("div")[0];B.style.width=A-5;B.style.height=E-5;_.center=B;$.style.width=A+5;$.style.height=E+5}else{$=C.parentNode,A=C.offsetWidth,E=C.offsetHeight,_=C.shadowContainter;_.center.style.width=A-5;_.center.style.height=E-5;_.style.width=A+5;_.style.height=E+5;_.style.left=0;_.style.top=0;$.style.width=A+5;$.style.height=E+5}}else{F=F||document;D=C.nextSibling;if(D==null||!D.isShadow){$=C.parentNode,A=C.offsetWidth,E=C.offsetHeight,_=$createElement("div",{doc:F});_.isShadow=true;$.style.width=A;$.style.height=E;_.style.width=A-4;_.style.height=E-4;_.style.position="absolute";_.style.left=0;_.style.top=0;_.style.zIndex=-999;_.style.background="#777";_.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius=4)";$.insertBefore(_,C.nextSibling);C.shadowContainter=_;if(C.style.width=="")C.style.width=A}else{$=C.parentNode,A=C.offsetWidth,E=C.offsetHeight,_=C.shadowContainter;_.isShadow=true;$.style.width=A;$.style.height=E;_.style.width=A-4;_.style.height=E-4}}}function buttonMouseOver($){addClass($,"eos-button-over");addClass($.firstChild,"eos-button-inner-over")}function buttonMouseOut($){removeClass($,"eos-button-over");removeClass($.firstChild,"eos-button-inner-over")}function buttonMouseUp($){if(isIE){removeClass($,"eos-button-down");removeClass($.firstChild,"eos-button-inner-down")}}function buttonMouseDown($){if(isIE){addClass($,"eos-button-down");addClass($.firstChild,"eos-button-inner-down")}}function buttonForFF($){addClass($,"eos-button-ff");addClass($.firstChild,"eos-button-inner-ff")}function setEosControlStyleforIE(){if(isIE){var A=document["styleSheets"],$=A.length;for(var _=0;_<$;_++){var B=A[_].rules,C=B.length;for(var D=0;D<C;D++)if(B[D].selectorText==".eos-ic-button")B[D].style.verticalAlign="text-bottom"}}}eventManager.add(window,"load",setEosControlStyleforIE);function flowSubmit($){var _=$.parentNode;while(_!=null)if(_.tagName&&_.tagName.toLowerCase()=="form")break;else _=_.parentNode;if(_==null){alert("can not find form tag!");return}var A=$name("_eosFlowAction",_);if(A==null){A=$createElement("input",{type:"hidden",name:"_eosFlowAction"});_.appendChild(A)}A.value=$.getAttribute("flowAction");_.submit()}function getCurrentStyle($,_){if($.currentStyle)return $.currentStyle[_];else if(window.getComputedStyle){propprop=_.replace(/([A-Z])/g,"-$1");propprop=_.toLowerCase();return document.defaultView.getComputedStyle($,null)[_]}}var Drag={obj:null,init:function(A,C,E,F,_,$,G,B,H,D){A.onmousedown=Drag.start;A.hmode=G?false:true;A.vmode=B?false:true;A.root=C&&C!=null?C:A;if(A.hmode&&isNaN(parseInt(A.root.style.left)))A.root.style.left="0px";if(A.vmode&&isNaN(parseInt(A.root.style.top)))A.root.style.top="0px";if(!A.hmode&&isNaN(parseInt(A.root.style.right)))A.root.style.right="0px";if(!A.vmode&&isNaN(parseInt(A.root.style.bottom)))A.root.style.bottom="0px";A.minX=typeof E!="undefined"?E:null;A.minY=typeof _!="undefined"?_:null;A.maxX=typeof F!="undefined"?F:null;A.maxY=typeof $!="undefined"?$:null;A.xMapper=H?H:null;A.yMapper=D?D:null;A.root.onDragStart=new Function();A.root.onDragEnd=new Function();A.root.onDrag=new Function()},start:function($){var _=Drag.obj=this;$=Drag.fixE($);var B=parseInt(_.vmode?_.root.style.top:_.root.style.bottom),A=parseInt(_.hmode?_.root.style.left:_.root.style.right);_.root.onDragStart(A,B);_.lastMouseX=$.clientX;_.lastMouseY=$.clientY;if(_.hmode){if(_.minX!=null)_.minMouseX=$.clientX-A+_.minX;if(_.maxX!=null)_.maxMouseX=_.minMouseX+_.maxX-_.minX}else{if(_.minX!=null)_.maxMouseX=-_.minX+$.clientX+A;if(_.maxX!=null)_.minMouseX=-_.maxX+$.clientX+A}if(_.vmode){if(_.minY!=null)_.minMouseY=$.clientY-B+_.minY;if(_.maxY!=null)_.maxMouseY=_.minMouseY+_.maxY-_.minY}else{if(_.minY!=null)_.maxMouseY=-_.minY+$.clientY+B;if(_.maxY!=null)_.minMouseY=-_.maxY+$.clientY+B}document.onmousemove=Drag.drag;document.onmouseup=Drag.end;return false},drag:function(B){B=Drag.fixE(B);var _=Drag.obj,D=B.clientY,A=B.clientX,$=parseInt(_.vmode?_.root.style.top:_.root.style.bottom),E=parseInt(_.hmode?_.root.style.left:_.root.style.right),F,C;if(_.minX!=null)A=_.hmode?Math.max(A,_.minMouseX):Math.min(A,_.maxMouseX);if(_.maxX!=null)A=_.hmode?Math.min(A,_.maxMouseX):Math.max(A,_.minMouseX);if(_.minY!=null)D=_.vmode?Math.max(D,_.minMouseY):Math.min(D,_.maxMouseY);if(_.maxY!=null)D=_.vmode?Math.min(D,_.maxMouseY):Math.max(D,_.minMouseY);F=E+((A-_.lastMouseX)*(_.hmode?1:-1));C=$+((D-_.lastMouseY)*(_.vmode?1:-1));if(_.xMapper)F=_.xMapper($);else if(_.yMapper)C=_.yMapper(E);Drag.obj.root.style[_.hmode?"left":"right"]=F+"px";Drag.obj.root.style[_.vmode?"top":"bottom"]=C+"px";Drag.obj.lastMouseX=A;Drag.obj.lastMouseY=D;Drag.obj.root.onDrag(F,C);return false},end:function(){document.onmousemove=null;document.onmouseup=null;Drag.obj.root.onDragEnd(parseInt(Drag.obj.root.style[Drag.obj.hmode?"left":"right"]),parseInt(Drag.obj.root.style[Drag.obj.vmode?"top":"bottom"]));Drag.obj=null},fixE:function($){if(typeof $=="undefined")$=window.event;if(typeof $.layerX=="undefined")$.layerX=$.offsetX;if(typeof $.layerY=="undefined")$.layerY=$.offsetY;return $}};function $create(_,$){$=$||document;if(_.indexOf("<")>-1){var A=$.createElement("div");A.innerHTML=_;return firstElement(A)}return $.createElement(_)}function $createElement(A,E){var C=E?(E.doc||document):document;if(A.indexOf("<")>-1){var B=C.createElement("div");B.innerHTML=A;A=B.firstChild}else if((isIE||isIE9||isIE10)&&E&&(E.name||E.type)){var D=(E.name)?" name=\""+E.name+"\"":"",$=(E.type)?" type=\""+E.type+"\"":"";delete E.name;delete E.type;A="<"+A+D+$+">";A=C.createElement(A)}else A=C.createElement(A);if(E){if(E.style){for(var _ in E.style)A.style[_]=E.style[_];delete E.style}for(_ in E)A[_]=E[_]}return A}function createSelect($,B,D){var A=$createElement("select",D||{});for(var C in $){var _=$createElement("option",{"value":C,"text":""+$[C],innerHTML:$[C]});if((B||B===0)&&C==B)_.selected=true;A.appendChild(_)}return A}function getViewportHeight(){if(window.innerHeight!=window.undefined)return window.innerHeight;if(document.compatMode=="CSS1Compat")return document.documentElement.clientHeight;if(document.body)return document.body.clientHeight;return window.undefined}function getViewportWidth(){if(window.innerWidth!=window.undefined)return window.innerWidth;if(document.compatMode=="CSS1Compat")return document.documentElement.clientWidth;if(document.body)return document.body.clientWidth;return window.undefined}function bodyAddNode(A,$){if(!A)return;$=$||document;var _=$.body.firstChild;if(_)$.body.insertBefore(A,_);else $.body.appendChild(A)}function addClass(B,$){if(!B)return;var A=B.className.split(" ");for(var _=0;_<A.length;_++)if(A[_]==$)return;A.push($);B.className=A.join(" ")}function removeClass(B,$){if(!B)return;var A=B.className.split(" ");for(var _=0;_<A.length;_++)if(A[_]==$)A.splice(_,1);B.className=A.join(" ")}function getPosition(_){var B=_.offsetTop,A=_.offsetLeft,$=_;while($=$.offsetParent){if($.tagName=="BODY")continue;B+=$.offsetTop-$.scrollTop;A+=$.offsetLeft-$.scrollLeft}return{"top":B,"left":A}}function getAbsPos(C){var D=C.offsetTop,F=C.offsetLeft,A=C;while(A=A.offsetParent){if(A&&A.tagName=="BODY"){D-=A.scrollTop;F-=A.scrollLeft;continue}D+=A.offsetTop-A.scrollTop;F+=A.offsetLeft-A.scrollLeft}var $=_get_top_window();if($!=window)if((isIE||isIE9||isIE10)){var B=window;do{var _=B.frameElement;if(_){var E=getPosition(_);D=D+E.top-(B.scrollTop||0);F=F+E.left-(B.scrollLeft||0)}B=B.parent}while(B&&B!=$);F+=$.scrollLeft||0;D+=$.scrollTop||0;if(isBorderBox){F=F+2;D=D+2}}else{D=window.screen.top-$.screen.top+D;F=window.screen.left-$.screen.left+F}return{"top":D,"left":F}}function getScreenPos(A,C){var F=0,_=0;if(A==C)return{left:0,top:0};else{var B=A;while(B&&B!=C){var D=B.frameElement,E=B.parent;if(D){var $=getPosition(D);F=F+$.left;_=_+$.top}B=B.parent}}return{left:F,top:_}}function createStyle(B,D,F){var A="display:",$;D=D||document;if(D.styleSheets.length==0){var C=D.createElement("style");D.body.appendChild(C)}var E=D.styleSheets[0];if(!F)B="."+B;if(E.insertRule){var _=E.insertRule(B+"{"+A+"}",E.length);return E.cssRules[_]}else{_=E.addRule(B,A,-1);if(_==-1)_=E.rules.length-1;return E.rules[_]}}function getScroll(A){var _=A,B=document;if(_==B||_==B.body){var C=window.pageXOffset||B.documentElement.scrollLeft||B.body.scrollLeft||0,$=window.pageYOffset||B.documentElement.scrollTop||B.body.scrollTop||0;return[C,$]}else return[_.scrollLeft,_.scrollTop]}function translatePoints(C,D,$){if(typeof D=="object"||D instanceof Array){$=D[1];D=D[0]}var E=C.style.position,_=getElementXY(C),A=parseInt(C.style.left,10),B=parseInt(C.style.top,10);if(isNaN(A))A=(E=="relative")?0:C.offsetLeft;if(isNaN(B))B=(E=="relative")?0:C.offsetTop;return{left:(D-_[0]+A),top:($-_[1]+B)}}function getElementXY(A,K){var C,I,$,_,L=document.body;if(A&&A.style.display=="none")return[0,0];if(A.getBoundingClientRect){try{$=A.getBoundingClientRect();_=getScroll(document);return[$.left+_[0],$.top+_[1]]}catch(G){}}var D=0,J=0;C=A;K=K||L;var E=A.style.position=="absolute";while(C){D+=C.offsetLeft;J+=C.offsetTop;if(!E&&C.style.position=="absolute")E=true;if(isGecko){I=C;var F=parseInt(I.style.borderTopWidth,10)||0,B=parseInt(I.style.borderLeftWidth,10)||0;D+=B;J+=F;if(C!=A&&I.style.overflow!="visible"){D+=B;J+=F}}C=C.offsetParent}if(isSafari&&E){D-=L.offsetLeft;J-=L.offsetTop}if(isGecko&&!E){var H=L;D+=parseInt(H.style.borderTopWidth,10)||0;J+=parseInt(H.style.borderTopWidth,10)||0}C=A.parentNode;while(C&&C!=L){if(!isOpera||(C.tagName.toUpperCase()!="TR"&&C.style.display!="inline")){D-=C.scrollLeft||0;J-=C.scrollTop||0}C=C.parentNode}return[D,J]}function setElementXY(A,B,_){if(A.style.position=="static")A.style.position="relative";if(_!==true){A.style.left="0px";A.style.top="0px"}var $=translatePoints(A,B);if(B[0]!==false)A.style.left=$.left+"px";if(B[1]!==false)A.style.top=$.top+"px"}function firstElement(A,_){if(A){_=_||1;var B=0,$=A.firstChild;while($){if($.nodeType==1)if(++B==_)return $;$=$.nextSibling}}return null}function prevElement(A,$){if(A){var _=A.previousSibling;while(_){if(_.nodeType==1)return _;_=_.previousSibling}}return null}function nextElement(A,$){if(A){var _=A.nextSibling;while(_){if(_.nodeType==1)return _;_=_.nextSibling}}return null}function getNodeValue(_){var A=null;if(!_)return null;var $=_.getAttribute("__isNullOrEmpty");if($=="null")return null;if($=="empty")return"";if(_.text)A=_.text;else if(_.childNodes.length>1)A=_.xml.replace(/<\/?[^>]+>/gi,"");else if(_.firstChild)A=_.firstChild.data;return A}function removeElement(_){if(!_)return;var A=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmouseout","onchange","onfocus","onblur","onkeypress","onkeydown","onkeyup"];for(var $=0;$<A.length;$++){_.setAttribute(A[$],null);_[A[$]]=null}if(_.parentNode)_.parentNode.removeChild(_)}function getFormElementsValue(A){A=$e(A);var $={};for(var B=0;B<A.elements.length;B++){var _=A.elements[B];if(!_.disabled&&_.name){var C=getElementValue(_);if($[_.name]!==undefined){$[_.name]=[].concat($[_.name]);$[_.name].push(C)}else $[_.name]=C}}return $}function getElementValue(_){_=$e(_);var D=_.tagName.toLowerCase();function C($){return $.checked?$.value:null}function B($){return $.getAttribute("value")!=null?$.value:$.text}var $={input:function($){switch($.type.toLowerCase()){case"checkbox":case"radio":return C($);default:return $.value}},textarea:function($){return $.value},select:function(C){switch(C.type.toLowerCase()){case"select-one":var _=C.selectedIndex;return _>=0?B(C.options[_]):null;default:var A,E=C.length;if(!E)return null;for(var $=0,A=[];$<E;$++){var D=C.options[$];if(D.selected)A.push(B(D))}return A}return this[C.type=="select-one"?"selectOne":"selectMany"](C)}},A=$[D];if(A==null)return null;return A(_)}var CSSUtil=function($){var A=null,B=$||document,C=/(-[a-z])/gi,_=function($,_){return _.charAt(1).toUpperCase()};return{createStyleSheet:function(A,D,C){var F;C=C||B;var G=C.getElementsByTagName("head");if(!G||G.length<1){C.documentElement.insertBefore(C.createElement("head"),C.body);G=C.getElementsByTagName("head")}var _=G[0],E=C.createElement("style");E.setAttribute("type","text/css");if(D)E.setAttribute("id",D);if(isIE){_.appendChild(E);F=E.styleSheet;try{F.cssText=A}catch($){}}else{try{E.appendChild(C.createTextNode(A))}catch($){E.cssText=A}_.appendChild(E);F=E.styleSheet?E.styleSheet:(E.sheet||C.styleSheets[C.styleSheets.length-1])}this.cacheStyleSheet(F);return F},removeStyleSheet:function($,A){A=A||B;var _=A.getElementById($);if(_)_.parentNode.removeChild(_)},swapStyleSheet:function(C,_,A){A=A||B;this.removeStyleSheet(C);var $=A.createElement("link");$.setAttribute("rel","stylesheet");$.setAttribute("type","text/css");$.setAttribute("id",C);$.setAttribute("href",_);A.getElementsByTagName("head")[0].appendChild($)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function($){if(!A)A={};try{var _=$.cssRules||$.rules;for(var B=_.length-1;B>=0;--B)A[_[B].selectorText]=_[B]}catch(C){}},getRules:function(C,E){E=E||B;if(A==null||C){A={};var F=E.styleSheets;for(var $=0,_=F.length;$<_;$++){try{this.cacheStyleSheet(F[$])}catch(D){}}}return A},getRule:function(A,B){var $=this.getRules(B);if(!(A instanceof Array))return $[A];for(var _=0;_<A.length;_++)if($[A[_]])return $[A[_]];return null},updateRule:function(A,E,B){if(!(A instanceof Array)){var $=this.getRule(A);if($){$.style[E.replace(C,_)]=B;return true}}else for(var D=0;D<A.length;D++)if(this.updateRule(A[D],E,B))return true;return false},getCssText:function(_){var $=CSSUtil.getRule(_);return $?_+" { "+CSSUtil.getRule(_).style.cssText+" } ":""}}}(),EOSLOG_LEVEL=EOSLOG_LEVEL||"debug",EOSDEBUG=EOSDEBUG==undefined?false:EOSDEBUG;function escapeHTML($){if(typeof($)=="string")return $.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&nbsp;&nbsp;").replace(/\n/g,"<br>");else return $}if(typeof(EOSLog)!="function"){EOSLog=function(){};EOSLog.styles=new Array();EOSLog.messages=[];EOSLog.ID="EOS_LOG_CONSOLE";EOSLog.BODY_ID="EOS_LOG_CONSOLE_BODY";EOSLog.BUTTONS_ID="EOS_LOG_CONSOLE_BUTTONS";EOSLog.EVAL_ID="EOS_LOG_EVAL_ID";EOSLog.EVAL_INPUT_ID="EOS_LOG_EVAL_INPUT_ID";EOSLog.EVAL_RUN_ID="EOS_LOG_EVAL_RUN_ID";EOSLog.EVAL_CLEAR_ID="EOS_LOG_EVAL_CLEAR_ID";EOSLog.EVAL_SIGN_ID="EVAL_SIGN_ID";EOSLog.EVAL_SIGN_SELECT_ID="EVAL_SIGN_SELECT_ID";EOSLog.index=0;EOSLog.iDiffX=0;EOSLog.iDiffY=0;EOSLog.hasOut=false;EOSLog.timeLog=new Array();EOSLog.panel=null;EOSLog.topWin=window;EOSLog.doc=document}EOSLog.log=function($,_){var A=new Date();EOSLog.messages.push({level:$,time:A,message:_,out:false});if(EOSLog.panel)EOSLog.refresh()};EOSLog.refresh=function(){if(EOSLog.panel){var $;for($=EOSLog.index;$<EOSLog.messages.length;$++)EOSLog.print(EOSLog.messages[$]);EOSLog.index=$==0?0:$-1}};EOSLog.info=function($){EOSLog.log("info",escapeHTML($))};EOSLog.error=function($){EOSLog.log("error",escapeHTML($))};EOSLog.debug=function($){EOSLog.log("debug",escapeHTML($))};EOSLog.warn=function($){EOSLog.log("warn",escapeHTML($))};EOSLog.handle=function(_){var $=new StringBuffer();$.append(EOSLOG_ERROR_TYPE).append(_.name).append(".");$.append(EOSLOG_ERROR_INFO).append(_.message).append(".");if(_.number)$.append(EOSLOG_ERROR_CODE).append(_.number).append(".>");if(_.fileName)$.append(EOSLOG_ERROR_URL).append(_.fileName).append(".");if(_.lineNumber)$.append(EOSLOG_ERROR_LINE).append(_.lineNumber).append(".");if(_.stack)$.append(EOSLOG_ERROR_STACK).append(_.stack.replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).append("<br>");if(_.description)$.append(EOSLOG_ERROR_DETAIL).append(_.description).append("<br>");if(EOSLog.handle.caller&&EOSLog.handle.caller.caller)$.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(EOSLog.handle.caller.caller.toString().replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).append("<br>");EOSLog.log("error",$.toString())};window.onerror=function(D,C,B){if(EOSDEBUG){var $=new StringBuffer();if(isIE){try{var _=EOSLog.getDetailError(window.onerror.caller,D,C,B);$.append(EOSLOG_ERROR_INFO).append(_.sMessage).append("<br> ");$.append(EOSLOG_ERROR_URL).append(_.sUrl).append("<br> ");$.append(EOSLOG_ERROR_LINE).append(_.sLine).append("<br> ");$.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(_.errFunc).append("<br>")}catch(A){}}else{$.append(EOSLOG_ERROR_INFO).append(D).append("<br> ");$.append(EOSLOG_ERROR_URL).append(C).append("<br> ");$.append(EOSLOG_ERROR_LINE).append(B).append("<br> ")}EOSLog.log("error",$.toString())}};EOSLog.isShow=function(_,$){var A=EOSLog.styles[_];if($.checked)A.style.display="block";else A.style.display="none"};EOSLog.clear=function(){var $=$id(EOSLog.BODY_ID,EOSLog.doc);$.innerHTML=""};EOSLog.console=function(){var C="";if(window.isWebkit)C="\"eos-button-gc\"";else C="\"eos-button\"";var F=$create("div",EOSLog.doc);F.style.position="absolute";F.style.left="300px";F.style.top="300px";var B=new StringBuffer();if(isIE)B.append("<iframe style=\"position:absolute;z-index:-1;width:expression(this.nextSibling.offsetWidth);height:expression(this.nextSibling.offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);\" frameborder=\"0\" ></iframe>");var E="",$=navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1;if($)E="style=\"filter:alpha(opacity=50)\"";B.append("<div style=\"z-index:1000\">");B.append("<TABLE  cellspacing=\"0\" cellpadding=\"0\"  class=\"eos-dialog\"><TR><TD "+E+" class=\"left-top-conner\"><div class=\"ieBlank\"></div></TD><TD  "+E+" class=\"top\"></TD><TD  "+E+" class=\"right-top-conner\"><div class=\"ieBlank\"></div></TD></TR><TR><TD  "+E+" class=\"left\"><div class=\"ieBlank\"></div></TD><TD style=\"background-color: #eaf0f2;\">");B.append("<div style='display:none;position: absolute;height=200px;overflow-y:auto; z-index: 1000;' id='").append(EOSLog.EVAL_SIGN_ID).append("'>");B.append("<select class='EOS-LOG-SIGN-DIV' size='10' id='").append(EOSLog.EVAL_SIGN_SELECT_ID).append("'></select></div>");B.append("<div onmouseup=\"style.cursor='auto'\" onmousedown=\"style.cursor='move';\" class='EOS-LOG-BUTTONS' style=\"width:100%\"id='");B.append(EOSLog.BUTTONS_ID).append("'><table width=\"100%\"align='right' border='0' style='font-size:9pt'><tr><td width=\"300px\">");B.append("<input type=\"checkbox\" checked onmousedown=\"EOSLog.isShow('time',this)\" name=\"time\" value=\"1\">TIME");B.append("<input type=\"checkbox\" checked onmousedown=\"EOSLog.isShow('info',this)\" name=\"info\" value=\"1\">INFO");B.append("<input type=\"checkbox\" checked onmousedown=\"EOSLog.isShow('debug',this)\" name=\"degbug\" value=\"1\">DEBUG");B.append("<input type=\"checkbox\" checked onmousedown=\"EOSLog.isShow('warn',this)\" name=\"warn\" value=\"1\">WARN");B.append("<input type=\"checkbox\" checked onmousedown=\"EOSLog.isShow('error',this)\" name=\"error\" value=\"1\">ERROR</td><td align='right'>");B.append("&nbsp;<div  id=\"eos_log_button0\"  class="+C+" onclick=\"EOSLog.clear()\" onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">Clear</div></div>&nbsp;");B.append("<div id=\"eos_log_button1\"  class="+C+" onclick=\"EOSLog.command()\" onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">Cmd</div></div>&nbsp;");B.append("<div id=\"eos_log_button2\"  class="+C+" onclick=\"EOSLog.hide()\"onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">Close</div></div>&nbsp;");B.append("</td></tr></table></div>");B.append("<div status='hide' class='EOS-LOG-EVAL' id='").append(EOSLog.EVAL_ID).append("' style='width:100%;display:none'><div>");B.append("<textarea style='width:100%;height:100px;font-size: 12px' id='").append(EOSLog.EVAL_INPUT_ID).append("'></textarea>");B.append("</div><div height='20'>");B.append("<div  id=\"eos_log_button3\"  class="+C+" onclick=\"EOSLog.runEval()\"onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">Run</div></div>&nbsp;");B.append("<div  id=\"eos_log_button4\"  class="+C+" onclick=\"EOSLog.clearEval()\"onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">Clear</div></div>&nbsp;");B.append("</div>");B.append("</div>");B.append("<div style='border-top:#C0C0C0 solid 1px;overflow:scroll' class='EOS-LOG-BODY' id='").append(EOSLog.BODY_ID).append("' style='overflow:auto'></div>");B.append("</TD><TD  "+E+" class=\"right\" id=\"eos_log_right\"><div class=\"ieBlank\"></div></TD></TR><TR><TD  "+E+" class=\"left-bottom-conner\"></TD><TD  "+E+" class=\"bottom\" id=\"eos_log_bottom\"></TD><TD  "+E+" class=\"right-bottom-conner\" id=\"eos_log_rightBottom\"></TD></TR></TABLE>");B.append("</div>");F.innerHTML=B.toString();F.id=EOSLog.ID;EOSLog.doc.body.appendChild(F);var A=$id(EOSLog.BUTTONS_ID,EOSLog.doc);F.style.display="none";fx_DD(F,{handle:A});EOSLog.hide();var D=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);eventManager.add(D,"keyup",EOSLog.evalKeyUp);eventManager.add(D,"keydown",EOSLog.evalKeyDown);EOSLog.hasOut=true;EOSLog.panel=$id(EOSLog.BODY_ID,EOSLog.doc);EOSLog.refresh();initDrag(F);if(isFF)for(var _=0;_<5;_++)buttonForFF(EOSLog.doc.getElementById("eos_log_button"+_))};EOSLog.command=function(){var $=$id(EOSLog.EVAL_ID,EOSLog.doc);if($.style.display=="none")$.style.display="";else $.style.display="none"};EOSLog.runEval=function(){var cmd=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc),value=cmd.value;try{eval(value)}catch(err){var buffer=new StringBuffer();buffer.append(EOSLOG_ERROR_TYPE).append(err.name).append("<br>");buffer.append(EOSLOG_ERROR_INFO).append(err.message).append("<br>");if(err.number)buffer.append(EOSLOG_ERROR_CODE).append(err.number).append("<br>");if(err.fileName)buffer.append(EOSLOG_ERROR_URL).append(err.fileName).append("<br>");if(err.lineNumber)buffer.append(EOSLOG_ERROR_LINE).append(err.lineNumber).append("<br>");if(err.stack)buffer.append(EOSLOG_ERROR_STACK).append(err.stack).append("<br>");if(err.description)buffer.append(EOSLOG_ERROR_DETAIL).append(err.description).append("<br>");buffer.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(value).append("<br>");EOSLog.log("error",EOSLOG_EVAL_ERROR+"<br>"+buffer.toString())}};EOSLog.clearEval=function(){var $=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);$.value=""};EOSLog.print=function(_){if(_.out)return;var A=$create("div",EOSLog.doc);A.className="EOS-LOG-"+_.level;var B=new StringBuffer();B.append("<table border='0'><tr><td valign='top' width='20px'>").append("<div class='EOS-LOG-TITLE-").append(_.level).append("'>");B.append(_.level).append("</div></td><td class='EOS-LOG-WORD'>").append("<div class='EOS-LOG-TIME'>runtime:").append(_.time.toLocaleTimeString());B.append("</div>").append(_.message).append("</td></tr></table>");var $=EOSLog.panel;A.innerHTML=B.toString();if($.firstChild)$.insertBefore(A,$.firstChild);else $.appendChild(A);_.out=true};EOSLog.init=function(){if(!EOSDEBUG)return false;if(window["EOSLog_inited"])return;EOSLog.topWin=_get_top_window();EOSLog.doc=EOSLog.topWin.document;eventManager.add(document,"keyup",EOSLog.keypress);if(EOSLog.topWin==window){EOSLog.styles["debug"]=createStyle("EOS-LOG-debug",EOSLog.doc);EOSLog.styles["info"]=createStyle("EOS-LOG-info",EOSLog.doc);EOSLog.styles["error"]=createStyle("EOS-LOG-error",EOSLog.doc);EOSLog.styles["time"]=createStyle("EOS-LOG-time",EOSLog.doc);EOSLog.styles["warn"]=createStyle("EOS-LOG-warn",EOSLog.doc);EOSLog.console();EOSLog.hide()}else if(!EOSLog.topWin["EOSLog"]){moveScript(document,EOSLog.doc);moveCss(document,EOSLog.doc)}window["EOSLog_inited"]=true};EOSLog.keypress=function(){var $=eventManager.getKeyCode();if($==123){EOSLog.show();return false}};EOSLog.show=function(){var $=$id(EOSLog.ID,EOSLog.doc);$.style.display="block";$.style.zIndex=getMaxZindex(EOSLog.doc)};EOSLog.hide=function(){var $=$id(EOSLog.ID,EOSLog.doc);$.style.display="none"};EOSLog.time=function(B,E,F){if(!B)B="SYSTEM";if(!EOSLog.timeLog[B]){var $=new Date();EOSLog.timeLog[B]={time:$,msg:E}}else{var A=new Date(),C=EOSLog.timeLog[B],_=A-C.time,D=new StringBuffer();D.append("ID:").append(B).append("<br>");if(C.msg)D.append("start:").append(C.msg).append("<br>");D.append(" \u9470\u6941\u6902:<b>").append(_).append("ms</b><br>");if(E)D.append("end:").append(E);EOSLog.log("time",D.toString());if(F)EOSLog.timeLog[B]=null}};function $info(_){if("info".indexOf(EOSLOG_LEVEL)>=0){var $=EOSLog.topWin["EOSLog"]||EOSLog;$.info(_)}}function $debug(_){if("info,debug".indexOf(EOSLOG_LEVEL)>=0){var $=EOSLog.topWin["EOSLog"]||EOSLog;$.debug(_)}}function $warn(_){if("info,debug,warn".indexOf(EOSLOG_LEVEL)>=0){var $=EOSLog.topWin["EOSLog"]||EOSLog;$.warn(_)}}function $error(_){if("info,debug,warn,error".indexOf(EOSLOG_LEVEL)>=0){var $=EOSLog.topWin["EOSLog"]||EOSLog;$.error(_)}}function $time(_){var $=EOSLog.topWin["EOSLog"]||EOSLog;$.time(_)}function $handle(_){var $=EOSLog.topWin["EOSLog"]||EOSLog;$.handle(_)}EOSLog.enable=function(){};EOSLog.evalKeyUp=function(){var A=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc),$=eventManager.getKeyCode(),B=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if($==190){var _=EOSLog.getkeyWord(A);EOSLog.sign(A,_)}};EOSLog.selectUpOption=function(_){var $=_.selectedIndex-1;if($>-1){var A=_.options[$];if(A)A.selected=true}else{A=_.options[0];if(A)A.selected=true}};EOSLog.selectDownOption=function(_){var $=_.selectedIndex+1,A=_.options[$];if(A)A.selected=true;else{A=_.options[0];if(A)A.selected=true}};EOSLog.evalKeyDown=function(){var A=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc),$=eventManager.getKeyCode(),B=$id(EOSLog.EVAL_SIGN_SELECT_ID,EOSLog.doc),_=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if($==9){eventManager.stopPropagation();EOSLog.insertAtCaret(A,"    ")}else if(_.style.display!="none")if($==38){eventManager.stopPropagation();EOSLog.selectUpOption(B);return false}else if($==40){eventManager.stopPropagation();EOSLog.selectDownOption(B);return false}else if($==13){eventManager.stopPropagation();EOSLog.insertAtCaret(A,B.value);_.style.display="none";return false}else _.style.display="none"};EOSLog.sign=function(ob,keyword){var div=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc),props=false;try{var tempObj;if(keyword)if(keyword.indexOf(".")>=0){var arr=keyword.split(".");tempObj=window[arr[0]]||eval(arr[0]);for(var i=1;i<arr.length;i++)if(tempObj)tempObj=tempObj[arr[i]];else tempObj=null}else tempObj=window[keyword]||eval(keyword);var select1=$id(EOSLog.EVAL_SIGN_SELECT_ID,EOSLog.doc);select1.length=0;var values=[];for(var a in tempObj)if(!(a+"").indexOf("__")==0){values.push(a);props=true}values.sort();for(i=0;i<values.length;i++){var option,a=values[i];option=new Option(a,a);select1.options.add(option)}if(select1.length<10)select1.size=select1.length;else select1.size=10;if(props){div.style.display="block";function select1Change(){EOSLog.insertAtCaret(ob,select1.value);select1.length=0;div.style.display="none"}eventManager.add(select1,"change",select1Change)}else div.style.display="none"}catch(e){div.style.display="none"}};EOSLog.getkeyWord=function(B){var A=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if(EOSLog.doc.selection){var $=EOSLog.doc.selection.createRange(),K=EOSLog.doc.body.createTextRange();K.moveToElementText(B);for(end=0;K.compareEndPoints("StartToEnd",$)<0;end++){K.moveStart("character",1);for(var E=0;E<=end;E++)if(B.value.charAt(E)=="\n")end++}var G=EOSLog.getSingWordByLeft(B,end);if(A.parentNode.tagName.toLocaleUpperCase()!="BODY")EOSLog.doc.body.appendChild(A);A.style.top=$["offsetTop"]+16+EOSLog.doc.body.scrollTop;A.style.left=$["offsetLeft"]+EOSLog.doc.body.scrollLeft;return G}else{var D=B;if(typeof(D.selectionStart)=="number"){start=D.selectionStart;end=D.selectionEnd;if(start==end){var J=D.value.substring(0,end),_=EOSLog.getSingWordByLeft(D,end),H=J.split("\n"),C=H[H.length-1],I=C.length*6-D.scrollLeft,F=H.length*16-D.scrollTop;if(I>D.offsetWidth)while(I>0&&I>D.offsetWidth){I=I-D.offsetWidth;F=F+16}A.style.top=B.offsetTop+F;A.style.left=B.offsetLeft+I;return _}}}return null};EOSLog.getSingWordByLeft=function($,A){var _=$.value.substring(0,end),B=/([\w|\.]+)\.$/;B.test(_);return RegExp.$1};EOSLog.insertAtCaret=function(D,_){if(isIE){D.focus();EOSLog.doc.selection.createRange().text+=_}else if(D.setSelectionRange){var A=D.selectionStart,B=D.selectionEnd,C=D.value.substring(0,A),E=D.value.substring(B);D.value=C+_+E;var $=A+_.length;D.focus();D.setSelectionRange($,$)}else alert("This   version   of   Mozilla   based   browser   does   not   support   setSelectionRange")};if(!window["EOSLog_inited"]){try{EOSLog.init()}catch(e){if(eventManager)eventManager.add(window,"load",EOSLog.init)}}EOSLog.scriptObject={};EOSLog.getScriptStr=function($){if(!EOSLog.scriptObject[$])EOSLog.scriptObject[$]=getRemoteResource($);return EOSLog.scriptObject[$]};function EOSDebugInfo(){this.sLine=null;this.sUrl=null;this.sMessage=null;this.errFunc=null;this.errLine=null;this.stackFunc=[]}EOSLog.getDetailError=function(H,I,E,F){var _=new EOSDebugInfo();_.sLine=F;_.sUrl=E;_.sMessage=I;_.errFunc=H;var G=null;if(H){var D=document.documentElement.outerHTML;if(D.indexOf(H)>0)G=getRemoteResource(window.location);else{_.sLine=F-1;var C=document.getElementsByTagName("script");for(var A=0;A<C.length;A++){var B=C[A];if(B.src){var J=EOSLog.getScriptStr(B.src);if(J&&J.indexOf(H.toString())>=0){_.sUrl=B.src;G=J;break}}}}if(G){var $=G.split("\n");_.errLine=$[_.sLine-1];_.errFunc=getDisplayStr(_.errFunc);_.errLine=getDisplayStr(_.errLine);if(_.errLine&&_.errFunc)if(_.errFunc.indexOf(_.errLine)>=0)_.errFunc=_.errFunc.replace(_.errLine,"<b><span style='color:red;background-color:#eeeeee;font-size:larger'>"+_.errLine+"</span></b>")}}return _};function getDisplayStr($){if($){$=$.toString();return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}return $}function getRemoteResource($){var _=createXMLHttp();_.open("GET",$,false);_.send(null);return _.responseText}function initDrag(A){var B=EOSLog.topWin.fx_DD||fx_DD,$=$id("eos_log_right",EOSLog.doc),C=$id("eos_log_bottom",EOSLog.doc),_=$id("eos_log_rightBottom",EOSLog.doc);B(A,{handle:C,modifiers:true,onDrag:function(){var _=this.mouse.start["y"],$=this.mouse.now["y"];if($-_+this.value.now["y"]>=27)this.element.style.height=$-_+this.value.now["y"];resizeLogPanel(parseInt(A.style.height))},onComplete:function(){},onStart:function(){this.value.now["y"]=this.element.getStyle("height").toInt()}});B(A,{handle:$,modifiers:true,onDrag:function(){var _=this.mouse.start["x"],$=this.mouse.now["x"];if($-_+this.value.now["x"]>=150)this.element.style.width=$-_+this.value.now["x"];resizeLogPanel(null,parseInt(A.style.width))},onComplete:function(){},onStart:function(){this.value.now["x"]=this.element.getStyle("width").toInt()}});B(A,{handle:_,modifiers:true,onStart:function(){this.value.now["x"]=this.element.getStyle("width").toInt();this.value.now["y"]=this.element.getStyle("height").toInt()},onDrag:function(){var C=this.mouse.start["y"],_=this.mouse.now["y"];if(_-C+this.value.now["y"]>=27)A.style.height=_-C+this.value.now["y"];var $=this.mouse.start["x"],B=this.mouse.now["x"];if(B-$+this.value.now["x"]>=150)A.style.width=B-$+this.value.now["x"];resizeLogPanel(parseInt(A.style.height),parseInt(A.style.width))},onComplete:function(){}})}function resizeLogPanel(_,$){if(_!=null&&_!="")EOSLog.panel.style.height=_-27;if($!=null&&$!="")EOSLog.panel.style.width=$}EOSLog.formatXML=function(C){return C;try{var _=C.split(">"),F="",B=0;for(var A=0;A<_.length-1;A++){var E=_[A];if(E.indexOf("<")!=0){var D=E.split("<");for(var G=0;G<B;G++)F=F+"\t";F=F+D[0]+"\n";B=B-1;for(G=0;G<B;G++)F=F+"\t";F=F+"<"+D[1]+">\n"}else if(E.indexOf("</")!=0){for(G=0;G<B;G++)F=F+"\t";F=F+_[A]+">\n";if(E.indexOf("<!")==-1&&E.indexOf("<?")==-1)B=B+1}else{B=B-1;for(G=0;G<B;G++)F=F+"\t";F=F+_[A]+">\n"}}return F}catch($){return C}};var EOSResizeObjects=[],EOSResizeContainer=[];function getTopContainer($){var _=null;while(true){$=$.offsetParent;if($==null){if(_!=null)if(_.getAttribute("height")!=null||_.style.height!="")return _;break}if($.tagName.toLowerCase()=="table")_=$}return null}function registerTopContainer(A){var _=getTopContainer(A);if(_==null)return false;for(var $=0;$<EOSResizeContainer.length;$++)if(EOSResizeContainer[$]==_)return true;EOSResizeContainer.push(_);return true}function eos_layout_doHResize(){if(isFF){for(var $=0;$<EOSResizeObjects.length;$++){if(_eos_curr_open_panel!=null)if(!EOSResizeObjects[$].isInCurrPanel()){EOSResizeObjects[$].doAutoResizeS2=false;continue}EOSResizeObjects[$].autoResizeS1()}for($=0;$<EOSResizeContainer.length;$++)EOSResizeContainer[$].style.height=EOSResizeContainer[$].offsetHeight-1;setTimeout(_layout_auto_resize,1)}}function _layout_auto_resize(){for(var $=0;$<EOSResizeContainer.length;$++)EOSResizeContainer[$].style.height=EOSResizeContainer[$].getAttribute("height");for($=0;$<EOSResizeObjects.length;$++){if(EOSResizeObjects[$].doAutoResizeS2===false){EOSResizeObjects[$].doAutoResizeS2=true;continue}EOSResizeObjects[$].autoResizeS2()}}function _layout_setResised(){for(var $=0;$<_eos_colsed_panel.length;$++)_eos_colsed_panel[$].needResize=true}eventManager.add(window,"resize",_layout_setResised);if(isFF){eventManager.add(window,"load",eos_layout_doHResize);eventManager.add(window,"resize",eos_layout_doHResize)}function createXMLHttp(){if(window.XMLHttpRequest)return(new XMLHttpRequest());var A=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var $=0;$<A.length;$++){try{xmlhttp_ver=A[$];return new ActiveXObject(A[$])}catch(_){}}return null}function Ajax($,_){this.url=$;this.param=[];this.method="POST";this.encoding="utf-8";this.async=_||false;this.xmlParam="";this.submitParam=null;this.isHTML=false;this.submitType="xml";this.isCommonUrl=false;this.reset()}Ajax.prototype.formToAjax=function(B){var C="";D=$id(B);if(D);else D=$name(B);if(D);else{alert(D+" \u5bf9\u8c61\u672a\u627e\u5230\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458!");return}for(i=0;i<D.elements.length;i++){var A=D.elements[i];if(A.type=="radio"||A.type=="checkbox")if(!A.checked)continue;var _=D.elements[i].name||D.elements[i].id,$=getElementValue(D.elements[i]);if(_)this.addParam(_,$)}};Ajax.prototype.initParam=function(){var B="",C="<root>";for(var _=0;_<this.param.length;_++){var $=this.param[_];B+="<param><key>"+$.key+"</key><value>"+$.value+"</value></param>"}C+="<params>"+B+"</params>\n";var A=this.xmlParam;if(A&&A.indexOf("<root><data>")==0){A=A.substr("<root><data>".length);A=A.substr(0,A.lastIndexOf("</data></root>"))}C+="<data>"+A+"</data></root>";this.submitParam=C};Ajax.prototype.setAsync=function($){if($==null)$=true;this.async=$};Ajax.prototype.wrapperUrl=function(){var A=this.url;if(A&&(A.substr(A.length-4)!=".biz"))return this.url;else if(A){var _=A.lastIndexOf(".",A.length-5),B=A.substr(0,_),$=A.substring(_+1,A.length-4);A="/"+B+".do?method="+$;return A}};Ajax.prototype.wrapperData=function(){return"<?xml version=\"1.0\" encoding=\""+this.encoding+"\"?>"+this.submitParam};Ajax.prototype.setRequestHeaders=function(){if(isMoz&&this.xmlHttp.overrideMimeType)this.xmlHttp.overrideMimeType("text/html;charset=utf-8");this.xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset="+this.encoding);this.xmlHttp.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlHttp.setRequestHeader("_eosAjax",this.submitType);this.xmlHttp.setRequestHeader("encoding",this.encoding)};Ajax.prototype.reset=function(){this.retDom=null;this.responseText=null;this.xmlHttp=createXMLHttp()};Ajax.prototype.cancel=function(){if(!this.running)return this;this.running=false;this.xmlHttp.abort();this.reset();return this};Ajax.prototype.isSuccess=function(){return!!!this.getException()};Ajax.prototype.onSuccess=function(){};Ajax.prototype.onFailure=function($){alert(AJAX_EXCEPTION+"\n\n"+$)};Ajax.prototype.callBack=function(){var $=false,A=null,_=this.getExceptionInvalid();if(_===true||_==="true"){A=this.getLoginPage();if(A)$=true;alert("\u767b\u5f55\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01\uff01\uff01");_=AJAX_EXCEPTION_INVALID+"\n\n"+this.url}else _=this.getExceptionMessage()||this.getException();if($){if(window.contextPath&&A.indexOf(window.contextPath+"/")!=0)A=window.contextPath+(A.indexOf("/")==0?"":"/")+A;top.location=A;return}if(_&&this.onFailure)return this.onFailure(_);return this.onSuccess()};Ajax.prototype.onStateChange=function(){if(!this.xmlHttp||this.xmlHttp.readyState!=4||!this.running)return;try{$debug("\n return XML:\n "+EOSLog.formatXML(this.xmlHttp.responseText));this.responseText=this.xmlHttp.responseText;this.status=this.xmlHttp.readyState;this.retDom=createXmlDom();this.retDom.loadXML(this.responseText);return this.callBack.apply(this,arguments)}catch($){$handle($);return this.onFailure($)}finally{this.running=false;this.xmlHttp.onreadystatechange=function(){}}};Ajax.prototype.submit=function(A){this.running=true;this.encoding=A||this.encoding;this.initParam();try{var C=this.wrapperUrl();this.xmlHttp.open(this.method,C,this.async);var $=this.wrapperData(),D=this;if(this.async)this.xmlHttp.onreadystatechange=function(){D.onStateChange.apply(D,arguments)};this.setRequestHeaders();$debug("submit url:"+this.url+"\n submit XML:\n"+EOSLog.formatXML($));var _="";if(this.sumbitType)_="submitType="+this.sumbitType+"&";else _="submitType=1&";_+="ajax=";this.xmlHttp.send(_+$);if(!this.async)return this.onStateChange()}catch(B){$error("xmlHttp ajax request error.");this.running=false}};Ajax.prototype.getXMLDom=function(){if(this.retDom)return this.retDom};Ajax.prototype.getText=function(){if(this.xmlHttp)return this.xmlHttp.responseText};Ajax.prototype.getValue=function(_){if(this.retDom==null)return null;if(_==null||_=="")return null;var $=this.retDom.selectSingleNode(_);if($!=null)return getNodeValue($);else return null};Ajax.prototype.getValues=function($){var B=new Array();if(this.retDom==null)return B;if($==null||$=="")return B;var C=this.retDom.selectNodes($);for(var _=0;_<C.length;_++){var A=C[_];B[_]=getNodeValue(A)}return B};Ajax.prototype.getDataset=function(A,_){var _=_||A,$=new Dataset(_);$.init(this.retDom.selectNodes(A))};Ajax.prototype.setForm=function(A,$){for(var _=0;_<A.elements.length;_++){var B=A.elements[_];this.setObjectValue(B,null,$)}};Ajax.prototype.setObjectValue=function(E,G,B){if(!(E)||E==null)return;var D=G;if(D==null)if(E.name&&E.name!=null&&E.name!="")if(B!=null)D=B+"/"+E.name;else D=E.name;if(!(E.type)){if(D==null)if(E.name&&E.name!="")D=E.name;else if(E.id&&E.id!="")D=E.id;if(D!=null){var _=this.getProperty(D);if(_!=null)E.innerText=_}return}if(D!=null){if(E.type=="text"||E.type=="hidden"){_=this.getProperty(D);if(_!=null)E.value=_;return}if(E.type=="radio"||E.type=="checkbox"){var C=this.dom.selectNodes("root/data/"+D);for(var F=0;F<C.length;F++)if(E.value==C[F].text)E.checked=true;else E.checked=false;return}if(E.type=="select-one"){_=this.getProperty(D);for(F=0;F<E.options.length;F++)if(_==E.options[F].value)E.options[F].selected=true;return}if(E.type=="select-multiple"){var $=this.getValues("root/data/"+D);if($.length>0)for(F=0;F<E.options.length;F++){E.options[F].selected=false;for(var A=0;A<$.length;A++)if($[A]==E.options[F].value)E.options[F].selected=true}return}}};Ajax.prototype.Updater=function(_){this.isHTML=true;this.submitType="html";this.submit("utf-8");var A=this.retDom.selectSingleNode("root/data"),$=getNodeValue(A);setInnerHTML(_,$)};Ajax.prototype.addParam=function($,_){this.param.push({key:$,value:_})};Ajax.prototype.clearParam=function(){this.param=[]};Ajax.prototype.getProperty=function($){if(this.retDom==null)return null;if($==null||$=="")return null;var _=this.retDom.selectSingleNode("root/data/"+$);if(_!=null)return getNodeValue(_);else return null};Ajax.prototype.submitForm=function($,B){var D="";$=$id($);for(i=0;i<$.elements.length;i++){var C=$.elements[i];if(C.type=="radio"||C.type=="checkbox")if(!C.checked)continue;var A=$.elements[i].name||$.elements[i].id,_=getElementValue($.elements[i]);if(A)this.addParam(A,_)}this.submit(B);if(this.retDom==null)return false;return true};Ajax.prototype.loadData=function($){this.submitXML($)};Ajax.prototype.submitXML=function(_,$){if(_)this.xmlParam=_;this.submit($)};Ajax.prototype.getResponseXMLDom=function(){return this.retDom};Ajax.prototype.getReturnNodeValue=function(A){var $=this.getResponseXMLDom(),_=$?$.selectNodes(A):null;if(_&&_.length>0)return getNodeValue(_[0]);return null};Ajax.prototype.getException=function(){var $="/root/exceptions";return this.getReturnNodeValue($)};Ajax.prototype.getExceptionCode=function(){var $="/root/exceptions/exception/code";return this.getReturnNodeValue($)};Ajax.prototype.getExceptionMessage=function(){var $="/root/exceptions/exception/message";return this.getReturnNodeValue($)};Ajax.prototype.getExceptionInvalid=function(){var $="/root/exceptions/invalid";return this.getReturnNodeValue($)};Ajax.prototype.getLoginPage=function(){var _="/root/exceptions/loginPage",$=this.getReturnNodeValue(_);$=$?trim($+""):null;return $};var HideSubmit=Ajax;function ServiceCaller(){this.service_URL_SUFFIX=".service";this.ajax=null;this.encoding="utf-8"}ServiceCaller.submitXMLTemplate=function(B,$,_){var A=["<root><data>","\t<ajaxCall>","\t\t<serviceName>"+xmlConversion(B)+"</serviceName>","\t\t<operateName>"+xmlConversion($)+"</operateName>","\t\t<params>",_||"","\t\t</params>","\t\t<return></return>","\t\t<exception></exception>","\t</ajaxCall>","</data></root>"];return A.join("\n")};ServiceCaller.getParamesArray=function($,B,A){var C=[];$=$||[];A=A||$.length;for(var _=B;_<A;_++)C.push($[_]);return C};ServiceCaller.returnConversion=function($){var A=$.getAttribute("__category"),C=$.getAttribute("__type");if(A=="xml")return $.xml;else if(A=="entity")return Dataset.initEntity($);else if(A=="dataset"){var E=new Dataset($.tagName);E.init($.childNodes);return E}else if(A=="collection"){var D=$.selectNodes("./entry"),B=[];for(var _=0;_<D.length;_++){var $=D[_];if($.nodeType==1)B.push(getNodeValue($))}return B}return getNodeValue($)};ServiceCaller.parameConversion=function(A){var C=null,E=null,F=typeof(A),B="primeval",$={data:"",type:B};if(A===null||A===undefined)E="null";else if(A==="")E="empty";if(E){$.data="<value __isNullOrEmpty=\""+E+"\" />";$.type=B;return $}if(F=="string"||F=="number"||F=="boolean"){B="primeval";$.data=xmlConversion(""+A)}else if(F=="object"&&A.xml&&(A.async===false||A.async===true)){B="xml";$.data=A.xml}else if(A instanceof Entity){B="entity";$.data=A.toXMLString(false)}else{if(F=="object"&&A.tagName&&A.tagName.toUpperCase()=="FORM")A=getFormElementsValue(A);if(A instanceof Dataset)A=A.getEntities();if(A instanceof Array){B="collection";C=[];for(var D=0;D<A.length;D++)C.push(ServiceCaller.parameConversion(A[D]).data);$.data=C.join("\n")}else{B="form";C=[];for(var _ in A){C.push("<property>");C.push("<key>");C.push(xmlConversion(_));C.push("</key>");C.push("<value>");C.push(xmlConversion(A[_]+""));C.push("</value>");C.push("</property>")}$.data=C.join("\n")}}$.data=(B=="collection"||B=="form")?$.data:"<value>"+$.data+"</value>";$.type=B;return $};ServiceCaller.getSubmitXML=function(A){var _=[];for(var $=0;$<A.length;$++){result=ServiceCaller.parameConversion(A[$]);_.push("<param __category=\""+result.type+"\">");_.push(result.data);_.push("</param>")}return _.join("\n")};ServiceCaller.prototype.callBack=function(){var $=false,_=null,A=this.getExceptionInvalid();if(A===true||A==="true"){_=this.getLoginPage();if(_)$=true;A=AJAX_EXCEPTION_INVALID+"\n\n"+this.serviceName+"."+this.operateName}else A=this.getExceptionMessage()||this.getException();if($){if(window.contextPath&&_.indexOf(window.contextPath+"/")!=0)_=window.contextPath+(_.indexOf("/")==0?"":"/")+_;top.location=_;return}if(A&&this.onFailure)return this.onFailure(A);this.onSuccess();return this.getReturnValue()};ServiceCaller.prototype._callCore=function($,A,_,D,C){this.ajax=new Ajax($+this.service_URL_SUFFIX,_);this.ajax.callBack=D||this.ajax.callBack;var B=ServiceCaller.getSubmitXML(C);this.serviceName=$;this.operateName=A;this.ajax.submitXML(ServiceCaller.submitXMLTemplate($,A,B),this.encoding)};function form2Object(B,F){var $={};$=getFormElementsValue(B);var D=$;if(F){D={};F=F+"";F=F.lastIndexOf("/")==F.length-1?F:F+"/";if(F.indexOf("[*]")<0){for(var A in $)if(A.indexOf(F)==0)D[A]=$[A]}else{var C=false;for(A in $)for(var _=1;_<Number.MAX_VALUE;_++){var E=F.replace("[*]","["+_+"]");if(A.indexOf(E)==0){D[A]=$[A];break}}}}return D}ServiceCaller.prototype.call=function(A,_,$){this._callCore(A,_,false,null,ServiceCaller.getParamesArray(arguments,2));return this.callBack()};ServiceCaller.prototype.isSuccess=function(){return!!!this.getException()};ServiceCaller.prototype.onSuccess=function(){};ServiceCaller.prototype.onFailure=function($){alert(AJAX_EXCEPTION+"\n\n"+$)};ServiceCaller.prototype.callAsyn=function(A,$,B){var _=this;this._callCore(A,$,true,function(){_.callBack()},ServiceCaller.getParamesArray(arguments,2))};ServiceCaller.prototype.getResponseXMLDom=function(){return this.ajax.getResponseXMLDom()};ServiceCaller.prototype.getReturnValue=function(_,E){var A="/root/data/ajaxCall/return/value";E=E||this.getResponseXMLDom();var D=E?E.selectNodes(A):[],$=[];for(var C=0;C<D.length;C++){var B=D[C];if(B.nodeType==1){B=_===false?B:ServiceCaller.returnConversion(B);$.push(B)}}if($.length==0)$=null;return $};ServiceCaller.prototype.getReturnNodeValue=function($){return this.ajax?this.ajax.getReturnNodeValue($):null};ServiceCaller.prototype.getReturn=function(){var $="/root/data/ajaxCall/return";return this.getReturnNodeValue($)};ServiceCaller.prototype.getException=function(){var $="/root/data/ajaxCall/exceptions/ecxeption";return this.getReturnNodeValue($)};ServiceCaller.prototype.getExceptionMessage=function(){var $="/root/data/ajaxCall/exceptions/exception/message";return this.getReturnNodeValue($)};ServiceCaller.prototype.getExceptionCode=function(){var $="/root/data/ajaxCall/exceptions/exception/code";return this.getReturnNodeValue($)};ServiceCaller.prototype.getExceptionInvalid=function(){var $="/root/data/ajaxCall/exceptions/invalid";return this.getReturnNodeValue($)};ServiceCaller.prototype.getLoginPage=function(){var _="/root/data/ajaxCall/exceptions/loginPage",$=this.getReturnNodeValue(_);$=$?trim($+""):null;return $};var Eos_All_Message=new Array();function isNull(_){if(typeof(_)=="object")_=_.value;var $;if(_.length==0)return true;for($=0;$<_.length;$++)if(_.charAt($)!=" ")return false;return true}function isIP(_){if(typeof(_)=="object")_=_.value;var $=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/;if($.test(_)){if(RegExp.$1.length>3||RegExp.$2.length>3||RegExp.$3.length>3||RegExp.$4.length>3)return false;if(RegExp.$1>0&&RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<255)return true}return false}function isInteger($){if(typeof($)=="object")$=$.value;if(/^(\+|-)?\d+$/.test($))return true;else return false}function isPositiveInteger($){if(typeof($)=="object")$=$.value;if(/^(\+)?\d+$/.test($))return true;else return false}function isURL(_){if(typeof(_)=="object")_=_.value;if(_.indexOf("://")!=-1){var $=_.substr(0,_.indexOf("://"));if($=="")return false;$=_.substr(_.indexOf("://")+3,$.length);if($=="")return false}else return false;return true}function isDecimal($,_,A){if(typeof($)=="object")$=$.value;if(/^(\+|-)?\d+($|\.\d+$)/.test($)){var B=$.indexOf(".");if(_!=null){var C=$.length;if(B!=-1)C=C-1;if(_<C)return false}if(A!=null){if(B==-1)return true;if($.length-B-1>A)return false}return true}else return false}function isPort($){if(typeof($)=="object")$=$.value;if(/^\d+$/.test($)){if(parseInt($,10)>65535||parseInt($,10)<=0)return false;return true}else return false}function isEmail(_){if(typeof(_)=="object")_=_.value;var $=/^([-_A-Za-z0-9\.]+)@[A-Za-z0-9]{1}[_A-Za-z0-9\.]*\.[A-Za-z0-9]+$/;if($.test(_))return true;return false}function isLastMatch(_,A){if(typeof(_)=="object")_=_.value;if(typeof(A)=="object")A=A.value;var $=new RegExp(A+"$");if($.test(_))return true;else return false}function isFirstMatch(_,A){if(typeof(_)=="object")_=_.value;if(typeof(A)=="object")A=A.value;var $=new RegExp("^"+A);if($.test(_))return true;else return false}function isMatch(_,A){if(typeof(_)=="object")_=_.value;if(typeof(A)=="object")A=A.value;var $=new RegExp(A);if($.test(_))return true;else return false}function isChinaMobileNo(_){if(typeof(_)=="object")_=_.value;var $=/^(13[0-9]|15[0-9]|18[0-9]|147)\d{8}$/;B=new RegExp($);if(B.test(_))return true;return false}function isPhoneNo(_){if(typeof(_)=="object")_=_.value;var $=/(^([0][1-9]{2,3}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0][1-9]{2,3}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/,A=new RegExp($);if(A.test(_))return true;return false}function isNumberOr_Letter($){if(typeof($)=="object")$=$.value;if(/[^(\w*)]/.test($))return false;return true}function isNumberOrLetter($){if(typeof($)=="object")$=$.value;if(/[^(a-z)*(A-Z)*(0-9)*]/.test($))return false;return true}function isFolder(_){if(typeof(_)=="object")_=_.value;var $=/(^[^\.])/,A=new RegExp($);if(!A.test(_))return false;$=/(^[^\\\/\?\*\"\<\>\:\|]*$)/;A=new RegExp($);if(A.test(_))return true;return false}function isChinaOrNumbOrLett(_){if(typeof(_)=="object")_=_.value;var $="^[0-9a-zA-Z\u4e00-\u9fa5]+$",A=new RegExp($);if(A.test(_))return true;return false}function isChinaZipcode($){if(typeof($)=="object")$=$.value;if(!isInteger($))return false;if($.length!=6)return false;return true}function isChinaIDNo(_){if(typeof(_)=="object")_=_.value;var C=EOS_CITY_LIST,B=0,$="",F=_,G=F.length;if(!/^\d{17}(\d|X|x)$/i.test(F)&&!/^\d{15}$/i.test(F))return false;F=F.replace(/X|x$/i,"a");if(C[parseInt(F.substr(0,2))]==null)return false;if(G==18){sBirthday=F.substr(6,4)+"-"+Number(F.substr(10,2))+"-"+Number(F.substr(12,2));var E=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(E.getFullYear()+"-"+(E.getMonth()+1)+"-"+E.getDate()))return false;for(var D=17;D>=0;D--)B+=(Math.pow(2,D)%11)*parseInt(F.charAt(17-D),11);if(B%11!=1)return false}else if(G==15){sBirthday="19"+F.substr(6,2)+"-"+Number(F.substr(8,2))+"-"+Number(F.substr(10,2));var E=new Date(sBirthday.replace(/-/g,"/")),A=E.getFullYear().toString()+"-"+(E.getMonth()+1)+"-"+E.getDate();if(sBirthday!=A)return false}return true}function checkPeriod(_,$){if(typeof(_)=="object")_=_.value;if(typeof($)=="object")$=$.value;if(!isDate(_))return false;if(!isDate($))return false;if($>=_)return true;else return false}function matchRegExp($,A,B){if(typeof($)=="object")$=$.value;if(A==null||A=="")return false;var _;if(B==null||B=="")_=new RegExp(A);else{if(/[^mig]/.test(B))return false;_=new RegExp(A,B)}if(_.test($))return true;return false}function checkInput(obj){if(processExtAttr(obj))return true;var is_Null=obj.getAttr("allowNull");if(is_Null=="false"){if(isNull(obj)){f_alert(obj,CHECK_MUST_INPUT);return false}}else if(isNull(obj)){f_alert_verify_successful(obj);return true}var maxLength=obj.getAttr("maxLength"),minLength=obj.getAttr("minLength");if(maxLength!=null)if(obj.value.length>maxLength){f_alert(obj,CHECK_INPUT_LENGTH_CANNOT_MORE_THAN+maxLength);return false}if(minLength!=null)if(obj.value.length<minLength){f_alert(obj,CHECK_INPUT_LENGTH_CANNOT_LESS_THAN+minLength);return false}var type=obj.getAttr("type");if(type!=null){try{if(!eval("f_check_"+type+"(obj)"))return false}catch(o){alert(type+":"+CHECK_ERROROCCUR);return false}}var maxValue=obj.getAttr("maxValue"),minValue=obj.getAttr("minValue");if(!(maxValue==null&&minValue==null)){var inputValue,oMinValue,oMaxValue;if(isNaN(parseFloat(obj.value)))inputValue=obj.value;else inputValue=parseFloat(obj.value);if(maxValue!=null){if(isNaN(parseFloat(maxValue))||minValue==null||isNaN(parseFloat(minValue))||isNaN(parseFloat(obj.value)))oMaxValue=maxValue;else oMaxValue=parseFloat(maxValue);if(inputValue>oMaxValue){f_alert(obj,CHECK_NOT_MORE_THAN+maxValue);return false}}if(minValue!=null){if(isNaN(parseFloat(minValue))||maxValue==null||isNaN(parseFloat(maxValue))||isNaN(parseFloat(obj.value)))oMinValue=minValue;else oMinValue=parseFloat(minValue);if(inputValue<oMinValue){f_alert(obj,CHECK_NOT_LESS_THAN+minValue);return false}}}f_alert_verify_successful(obj);return true}function processExtAttr(C){if(C.EOS_extendedAttribute!=null)return false;var D=C.validateAttr||C.getAttribute("validateAttr");if(!D)return true;var $=new Object(),B=D.split(";");for(var _=0;_<B.length;_++){var F=B[_].split("=");if(F.length!=2)continue;var E=F[0],A=F[1];$[E]=A}C.EOS_extendedAttribute=$;C.getAttr=function($){return this.EOS_extendedAttribute[$]}}function f_check_number($){if(/^\d+$/.test($.value))return true;else{f_alert($,CHECK_INPUT_NUMBER);return false}}function f_check_naturalNumber($){var _=$.value;if(_.length>1&&_.charAt(0)=="0"){f_alert($,CHECK_INPUT_NATURALNUMBER);return false}if(/^[0-9]+$/.test(_))return true;else{f_alert($,CHECK_INPUT_NATURALNUMBER);return false}}function f_check_integer($){if(isInteger($))return true;else{f_alert($,CHECK_IUPUT_INT);return false}}function f_check_float($){if(/^(\+|-)?\d+($|\.\d+$)/.test($.value))return true;else{f_alert($,CHECK_INPUT_FLOAT);return false}}function f_check_zh($){if(/^[\u4e00-\u9fa5]+$/.test($.value))return true;f_alert($,CHECK_INPUT_ZH);return false}function f_check_letter($){if(/^[A-Za-z]+$/.test($.value))return true;f_alert($,CHECK_INPUT_LETTER);return false}function f_check_IP($){if(isIP($.value))return true;f_alert($,CHECK_INVALID_IP);return false}function f_check_port($){if(isPort($.value))return true;f_alert($,CHECK_INVALID_PORT);return false}function f_check_URL($){if(isURL($.value))return true;f_alert($,CHECK_INVALID_WEBSITE);return false}function f_check_email($){if(isEmail($.value))return true;f_alert($,CHECK_INVALID_EMAIL);return false}function f_check_folder($){if(isFolder($.value))return true;f_alert($,CHECK_INVALID_FOLDER);return false}function f_check_chinaMobile($){if(isChinaMobileNo($.value))return true;f_alert($,CHECK_INVALD_HANDPHONE);return false}function f_check_phone($){if(isPhoneNo($.value))return true;f_alert($,CHECK_INVALID_PHONE);return false}function f_check_chinaZipcode($){if(!/^\d+$/.test($.value)){f_alert($,CHECK_POSTALCODE_MUST_NUMBER);return false}if($.value.length!=6){f_alert($,CHECK_INVAILID_POSTALCODE_LENGTH);return false}return true}function f_check_chinaIDNo($){if(isChinaIDNo($))return true;else{f_alert($,CHECK_INVALID_ID);return false}}function f_check_formatStr($){var _=$.getAttr("regExpr");if(matchRegExp($,_))return true;f_alert($,CHECK_INVALID_EXP);return false}function f_check_double(B){var _=B.getAttr("totalDigit"),$=B.getAttr("fracDigit");if(isDecimal(B,_,$))return true;var A=CHECK_INPUT_NUMBER;if(_!=null)A=A+CHECK_LEGNT_NOT_THAN+_+CHECK_WEI;if($!=null)A=A+CHECK_FRACTION_LENGTH_NOT_THAN+$+CHECK_WEI;f_alert(B,A);return false}function f_alert(_,A){try{checkTabPage(_)}catch($){}var B;if(_.getAttr)B=_.getAttr("message");if(B!=null)A=B;f_alert_verify_failure(_,A);f_alert_resetMessagePos()}function checkTabPage(B){var $=B.parentNode;while($&&$.getAttribute){var A=$.eos_tabpage_id||$.getAttribute("eos_tabpage_id");if(A){var _=$id(A);if(_){try{_.getTabPane().selectTab(_)}catch(C){}}break}$=$.parentNode}}function checkForm(C){var $=true,A=null,_;for(_=C.elements.length-1;_>=0;_--){if((C.elements[_].validateAttr||C.elements[_].getAttribute("validateAttr"))+""=="undefined")continue;if(C.elements[_].disabled==true)continue;if(C.elements[_].name==null||C.elements[_].name=="")if(!(C.elements[_].id!=null&&C.elements[_].id.indexOf("_input")!=-1))continue;if(checkInput(C.elements[_])==false){A=C.elements[_];$=false}}if($)return $;var B=A.type;if(B=="text"||B=="TEXT"||B=="textarea"||B=="TEXTAREA")A.select();return $}function f_alert_getPosition(C){var D=C.id;if(D!=null){var E=D.indexOf("_input");if(E!=-1)C=$id(D.substr(0,E)+"_container")||C}var _=C.offsetTop,B=C.offsetLeft,$=C,A=true;while($=$.offsetParent){if($.tagName=="BODY")continue;_+=$.offsetTop-$.scrollTop;B+=$.offsetLeft-$.scrollLeft;if($.style.position.toLowerCase()=="absolute")A=false}B=B+C.offsetWidth+10;return{left:B,top:_}}function f_alert_create_Message_plane(_,$){var B=document.createElement("DIV");B.className="alert_message";var A=f_alert_getPosition(_);B.style.top=A.top;B.style.left=A.left;B.style.height=isFF?_.offsetHeight-4:_.offsetHeight;B.style.whiteSpace="nowrap";B.onclick=function(){this.hidden()};B.show=function($){this.innerHTML="&nbsp;"+$+"&nbsp;";if(B.isLoading){if(B.timeout)clearTimeout(B.timeout);B.timeout=setTimeout(function(){return _showMessage.apply(B,[B,$])},10)}else if(!this.isShow){document.body.appendChild(this);this.isShow=true;this.isLoading=true;setOpacity(this,0);fx_fadeIn(this,function(){return loadingFinished.apply(B,[B])},500)}};B.hidden=function(){if(B.isLoading){if(B.timeout)clearTimeout(B.timeout);B.timeout=setTimeout(function(){return _hiddenMessage.apply(B,[B])},10)}else{this.isLoading=true;this.isShow=false;fx_fadeOut(this,function(){try{document.body.removeChild(B)}catch($){}return loadingFinished.apply(B,[B])},400)}};B.setPos=function($){this.style.top=$.top;this.style.left=$.left};document.body.appendChild(B);B.show($);_.Eos_Message=B;Eos_All_Message[Eos_All_Message.length]=_}function loadingFinished($){this.isLoading=false}function _hiddenMessage($){if($.isLoading)$.timeout=setTimeout(function(){return _hiddenMessage.apply($,[$])},10);else $.hidden()}function _showMessage($,_){if($.isLoading)$.timeout=setTimeout(function(){return _showMessage.apply($,[$,_])},10);else $.show(_)}function f_alert_show_message($,_){if($.Eos_Message!=null){f_alert_resetMessagePos();$.Eos_Message.show(_)}else f_alert_create_Message_plane($,_)}function f_alert_hidden_message($){if($.Eos_Message!=null)$.Eos_Message.hidden()}function f_alert_verify_failure($,_){removeClass($,"verify_successful");addClass($,"verify_failure");f_alert_show_message($,_)}function f_alert_verify_successful($){removeClass($,"verify_failure");addClass($,"verify_successful");f_alert_hidden_message($)}function f_alert_resetMessagePos(){for(var $=0;$<Eos_All_Message.length;$++){var _=f_alert_getPosition(Eos_All_Message[$]);Eos_All_Message[$].Eos_Message.setPos(_)}}function f_alert_hidden_all_message(){f_alert_resetMessagePos();for(var $=0;$<Eos_All_Message.length;$++)Eos_All_Message[$].Eos_Message.hidden()}eventManager.add(window,"resize",f_alert_resetMessagePos);function regCheckEvent($,A){if($==null)return;A=A||"blur";var _;for(_=$.elements.length-1;_>=0;_--){if(($.elements[_].validateAttr||$.elements[_].getAttribute("validateAttr"))+""=="undefined")continue;var B=$.elements[_];eventManager.add(B,A,function(_){_=eventManager.getEvent()||_;var $=_.srcElement||_.target;checkInput($)})}}function checkOnblur($){regCheckEvent($)}function checkOnkeypress($){regCheckEvent($,"keyup");regCheckEvent($,"focus")}var EOSMaskCache={};function Mask(_,A){var $=this;this.id=_;this.inited=false;EOSMaskCache[this.id]=this;this.isFrameSetPage=false;this.win=A||window;this.init=function(){this.frameList=this.win.document.getElementsByTagName("frame");if(this.frameList.length>0){this.isFrameSetPage=true;this.inited=true;return this.inited}this.container=this.container||this.win.document.body;if(!this.inited&&this.win.document.body){this.core=this.win.document.createElement("div");this.core.id=this.id+"_div";this.core.onmousedown=function(){eventManager.stopBubble()};if(isIE){var $="<iframe style=\"filter:Alpha(Opacity=0);position:absolute;z-index:-1;width:expression(this.parentNode.offsetWidth);height:expression(this.parentNode.offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);\" frameborder=\"0\" ></iframe>";$+="<div style=\"width:expression(this.parentNode.offsetWidth);height:expression(this.parentNode.offsetHeight);z-index:1\" class=\"eos-page-mask\"></div>";this.core.innerHTML=$}this.core.className="eos-page-mask";this.core.style.display="none";this.win.document.body.appendChild(this.core);this.inited=true}return this.inited};this.setContainer=function($){if(this.container&&this.container.setAttribute)this.container.setAttribute("_mask",null);this.container=$;if(this.container&&this.container.setAttribute)this.container.setAttribute("_mask",this.id)};this.isHidden=function(){return this.core.style.display=="none"};this.autoResize=function(){if(this.isHidden())return;var E=parseInt(this.container.style.marginTop),D=parseInt(this.container.style.marginLeft);E=E||0;D=D||0;var B=0,A=0,_,C;if(this.container==this.win.document.body){_=this.win.screen.width;C=this.win.screen.height}else{B=getElementXY(this.container);A=B[0];B=B[1];_=this.container.offsetWidth;C=this.container.offsetHeight}_+=E;C+=D;var $=this.core;$.style.top=B-E+"px";$.style.left=A-D+"px";$.style.width=_+"px";$.style.height=C+"px";if(this.container==this.win.document.body){this.container.scrollTop=0;this.container.scrollLeft=0}},this.show=function(B){if(this.isFrameSetPage){for(var _=0;_<this.frameList.length;_++){try{if(!this.frameList[_].contentWindow.eos_pageMask)this.frameList[_].contentWindow.eos_pageMask=new Mask("eos_pageMask"+"_f_"+_,this.frameList[_].contentWindow);this.frameList[_].contentWindow.eos_pageMask.show()}catch($){}}return}if(!this.init()||!this.isHidden())return;if(B)this.setContainer(B);this.oldOverFlowX=this.container.style.overflowX;this.oldOverFlowY=this.container.style.overflowY;this.container.style.overflowX="hidden";this.container.style.overflowY="hidden";var A=getMaxZindex(this.container.ownerDocument||document);A++;this.container.style.zIndex=A;this.core.style.display="block";A++;this.core.style.zIndex=A;this.core.focus();this.autoResize()};this.hide=function(){if(this.isFrameSetPage){for(var $=0;$<this.frameList.length;$++){try{if(!this.frameList[$].contentWindow.eos_pageMask)this.frameList[$].contentWindow.eos_pageMask=new Mask("frame_"+this.frameList[$].contentWindow.location,this.frameList[$].contentWindow);this.frameList[$].contentWindow.eos_pageMask.hide()}catch(_){}}return}if(this.isHidden()||!this.container)return;this.container.style.overflowX=this.oldOverFlowX;this.container.style.overflowY=this.oldOverFlowY;this.core.style.display="none"};this.hideAfterTime=function(_){this.win.setTimeout(function(){$.hide()},_||100)};if(window.addEventListener)window.addEventListener("load",function(){$.init()},false);else window.attachEvent("onload",function(){$.init()})}window.eos_pageMask=new Mask("eos_pageMask");function maskElement(F,E){E=E||window;F=$id(F);F.maskId="_eos_"+F.id+"_mask";var C=$id(F.maskId,E.document),D=F.offsetWidth,$=F.offsetHeight;if(!C){C=$create("div",E.document);C.style.display="none";C.id=F.maskId;if(document!=E.document)moveCss(document,E.document);E.document.body.appendChild(C)}C.style.position="absolute";C.style.width=D+"px";C.style.height=$+"px";var _=getElementXY(F);setElementXY(C,_);C.className="eos-page-mask";C.style.display="block";E._bakscroll=E.onscroll;var A=getMaxZindex(E.document);C.onmousedown=function(){eventManager.stopBubble()};C.onkeydown=function(){eventManager.stopBubble()};C.onkeypress=function(){eventManager.stopBubble()};C.style.zIndex=A+2;C.pActiveElement=document.activeElement;try{C.focus()}catch(B){}try{C.getElementsByTagName("a")[0].focus()}catch(B){}}function unMaskElement(A,_){_=_||window;A=$id(A);var $=$id(A.maskId);if($)$.style.display="none"}function maskTop(){maskWindow(top)}function maskWindow(A){A=A||window;hideSelect(A);if(isFrameSet(A)){var $=A.document.getElementsByTagName("frame");for(var _=0;_<$.length;_++){try{maskWindow($[_].contentWindow)}catch(D){}}}else{var C=$id("_eos_page_mask",A.document);if(!C){C=$create("div",A.document);C.style.display="none";C.id="_eos_page_mask";C.className="eos-page-mask";if(document!=A.document)moveCss(document,A.document);A.document.body.appendChild(C)}function B(){var G=parseInt(A.document.body.style.marginTop),F=parseInt(A.document.body.style.marginLeft);G=G||0;F=F||0;var H=0,E=0,D,_,B=(Math.max(A.document.documentElement.scrollLeft,A.document.body.scrollLeft)||0),$=(Math.max(A.document.documentElement.scrollTop,A.document.body.scrollTop)||0);D=Math.max(A.document.body.scrollWidth,(A.document.body.clientWidth+B));_=Math.max(A.document.body.scrollHeight,(A.document.body.clientHeight+$));D+=G;_+=F;C.style.top=H-G+"px";C.style.left=E-F+"px";C.style.width=D+"px";C.style.height=_+"px"}C.className="eos-page-mask";C.style.display="block";B();A._bakresize=A.onresize;window.onresize=function(){B()};var E=getMaxZindex(A.document);C.onmousedown=function(){eventManager.stopBubble()};C.onkeydown=function(){eventManager.stopBubble()};C.onkeypress=function(){eventManager.stopBubble()};C.style.zIndex=E+2;C.pActiveElement=document.activeElement;try{C.focus()}catch(D){}try{C.getElementsByTagName("a")[0].focus()}catch(D){}}}function hideSelect($){}function showSelect($){}function unMaskWindow($){$=$||window;showSelect($);if(isFrameSet($)){var A=$.document.getElementsByTagName("frame");for(var _=0;_<A.length;_++){try{unMaskWindow(A[_].contentWindow)}catch(C){}}}else{var B=$id("_eos_page_mask",$.document);if(B){try{B.style.display="none";B.pActiveElement&&B.pActiveElement.focus();B.pActiveElement=null}catch(C){}}$.onresize=$._bakresize}}function unMaskTop(){unMaskWindow(top)}function isFrameSet($){return $.document.getElementsByTagName("frameset").length!=0}var EOSProgressCache={},ProgressBar=function($){$=$||"eos_pageProgressBar";this.winWidth=160;this.winHeight=60;this.id=$;var _="__progressbar_"+$+"_title";EOSProgressCache[$]=this;var B=$id($);if(!B){B=$create("div");B.id=$;B.className="eos-popwin";B.style.width="100px";var A=["<div  class=\"eos-popwin-body\">","<div style=\"margin:5px;margin-top:15px\" ><div class=\"eos-progress-icon\"></div>","<span id=\"__progressbar_"+$+"_title\" ></span></div>","</div>"].join("\n");B.innerHTML=A;document.body.appendChild(B)}this.isHidden=true;this.container=B;this.titleBar=$id("__progressbar_"+$+"_title");this.show=function(B,$,A){B=B||"Please Waiting ...";this.titleBar.innerHTML=B;var _;this.container.style.width=this.winWidth+"px";this.container.style.height=this.winHeight+"px";this.container.style.display="";if($&&A){this.container.style.left=$+"px";this.container.style.top=A+"px"}else if(typeof($)=="object"&&$.offsetLeft){_=$;$=_.offsetLeft+(_.offsetWidth-this.winWidth)/2;A=_.offsetTop+(_.offsetHeight-this.winHeight)/2;this.container.style.left=$+"px";this.container.style.top=A+"px"}else moveDivToCenter(this.container);try{this.container.focus()}catch(C){}this.isHidden=false};this.hide=function(){if(this.container)this.container.style.display="none";this.isHidden=true}};function showProgressBar(C,B,$,A){var _=EOSProgressCache[C]||null;if(!_)_=new ProgressBar(C);_.show(B,$,A);return _}function hideProgressBar(_){_=_||"eos_pageProgressBar";var $=EOSProgressCache[_]||null;if($)$.hide();return $}function hideAllProgressBar(){for(var $ in EOSProgressCache)EOSProgressCache[$].hide()}var EOStopWin=EOStopWin||_get_top_window()||window;EOStopWin["_eos_modal_dialog"]=EOStopWin["_eos_modal_dialog"]||[];function getModalDialogId(){return"_eos_modal_dialog"+Math.random()+EOStopWin["_eos_modal_dialog"].length}var getCurrentModalArguments=function(){var $=EOStopWin["_eos_modal_dialog"].length;if($>0)return EOStopWin["_eos_modal_dialog"][$-1];else return null},getModalDialog=function($){var _=EOStopWin["_eos_modal_dialog"].length;for(var B=0;B<_;B++){var A=EOStopWin["_eos_modal_dialog"][B];if(A.id==$)return A}return null},lockLatestModelDialog=function(){var $=getCurrentModalArguments();if($){$.showMask();hideSelect($.win)}else maskTop()},unLockLatestModelDialog=function(){var $=getCurrentModalArguments();if($){$.hideMask();showSelect($.win)}else unMaskTop()},hideModelDialog=function(D,_){try{var $=getModalDialog(D);EOStopWin["_eos_modal_dialog"].pop();if(!$)return;var B=$.frameWin||$.iframe.contentWindow;top.currStack=B.bfCurrStack||[];try{var C=B["returnValue"]}catch(A){}if($.container)$.container.style.display="none";if($.win)unLockLatestModelDialog()}catch(A){}if(!_){try{if($["callBack"])$["callBack"](C)}catch(A){}}try{$.iframe.src="";$.ddDiv.style.display="none";ReleaseElemEvents($.container);ReleaseElemEvents($.ddDiv);$.ddDiv.parentNode.removeChild($.ddDiv);$.container.parentNode.removeChild($.container)}catch(A){}},resizeModelDialog=function(A,B,$){var E=getModalDialog(A);E.container.style.width=B+"px";E.container.style.height=$+"px";E.maskDiv.style.width=B+"px";E.maskDiv.style.height=$+"px";var C=$id(E.id+"__model_dialog_body",E.win.document);if($-27>0)C.style.height=$-27-7+"px";var _=$id(E.id+"__model_dialog_frame",E.win.document);if(_){if($-28>=0)_.style.height=$-32+"px";_.style.width=B-14+"px"}try{E.ddDiv.style.width=B+"px";E.ddDiv.style.height=$+"px"}catch(D){}},moveModelDialog=function($,B,_){var A=getModalDialog($);A.container.style.left=B+"px";A.container.style.top=_+"px";try{A.ddDiv.style.left=B+"px";A.ddDiv.style.top=_+"px"}catch(C){}},moveModelDialogToCenter=function(_){var $=getModalDialog(_);$.container.style.top=((EOStopWin.document.body.clientHeight-$.container.offsetHeight)/2+EOStopWin.document.body.scrollTop)+"px";$.container.style.left=((EOStopWin.document.body.clientWidth-$.container.offsetWidth)/2+EOStopWin.document.body.scrollLeft)+"px"};function ModalArguments($){this.id=$;this.win=null;this.parentWin=null;this.callBack=null;this.Argument=null;this.iframe=null;this.container=null;this.mask=null;this.frameWin=null;this.maskDiv=null;this.ddDiv=null}ModalArguments.prototype.init=function(){};ModalArguments.prototype.showMask=function(){this.maskDiv.style.display=""};ModalArguments.prototype.hideMask=function(){this.maskDiv.style.display="none"};function showModalCenter(B,A,_,F,E,D){var $=null,C=null;return showModal(B,A,_,F,E,$,C,D)}function showModal(E,$,A,L,D,_,J,C){L=L?parseInt(L,10):300;D=D?parseInt(D,10):200;L=L+14;D=D+14;var F=_get_top_window(),H=F.document.getElementsByTagName("BODY")[0];if(_==null||_==""){_=((F.document.body.clientWidth-L)/2+F.document.body.scrollLeft);if(_<0)_=0}else _=parseInt(_,10);if(J==null||J==""){J=((EOStopWin.document.body.clientHeight-D)/2+F.document.body.scrollTop);if(J<0)J=0}else J=parseInt(J,10);var I=F.document.body.scrollTop,G=getModalDialogId(),B=new ModalArguments(G);B.parentWin=window;B.callBack=A;B.Argument=$;B.win=F;B.init();try{lockLatestModelDialog()}catch(K){}EOStopWin["_eos_modal_dialog"].push(B);__showModal(G,E,B,L,D,_,J,C);F.document.body.scrollTop=I}function __showModal(L,D,Q,$,W,S,C,R){var V=$create("div",Q.win.document);V.id=L+"__model_dialog_container";V.className="eos-popwin";V.onfocus=function(){V.blur()};var H="";if(isIE)H="<iframe style=\"z-index:-1;filter:Alpha(Opacity=0);position:absolute;width:expression(this.nextSibling.offsetWidth);height:expression(this.nextSibling.offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);\" frameborder=\"0\" ></iframe>";var F=navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1,U="";if(F)U="style=\"filter:alpha(opacity=50)\"";var M=[H,"<div style=\"width:100%;height:100%\">","<div id=\""+L+"__model_dialog_mask\" class=\"eos-div-mask\" style=\"position:absolute;top:0px;left:0px;display:none;\"></div>","<TABLE  cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" height=\"100%\" class=\"eos-dialog\"><TR><TD ",U," class=\"left-top-conner\"><div class=\"ieBlank\"></div></TD><TD  ",U," class=\"top\"></TD><TD  ",U," class=\"right-top-conner\"><div class=\"ieBlank\"></div></TD></TR><TR><TD  ",U," class=\"left\"><div class=\"ieBlank\"></div></TD><TD style=\"background-color: #eaf0f2;\">","<div style=\"width:100%;cursor:move\" id=\""+L+"__model_dialog_head\" class=\"eos-popwin-head\" ><a id=\""+L+"__model_dialog_focus\" href=\"#f\"></a>","<div class=\"eos-popwin-head-icon\">&#160;</div>","<div class=\"eos-popwin-head-title\">"+(R||" Dialog Window")+"</div>","<div id=\"popupControls\" class=\"eos-popwin-head-button\"  >","<a href=\"javascript:void(0);\" id=\""+L+"__model_dialog_closebutton\" onmousedown=\"window.returnValue=undefined;hideModelDialog('"+L+"',true)\">&#160;</a>","</div>","</div>","<div id=\""+L+"__model_dialog_body\" class=\"eos-popwin-body\">","</div>","</TD><TD  ",U," class=\"right\" id=\"",L,"_right\"><div class=\"ieBlank\"></div></TD></TR><TR><TD  ",U," class=\"left-bottom-conner\"></TD><TD  ",U," class=\"bottom\" id=\"",L,"_bottom\"></TD><TD  ",U," class=\"right-bottom-conner\" id=\"",L,"_rightBottom\"></TD></TR></TABLE>","</div>"].join(""),B=["<iframe type=\"_eos_modal_dialog\" eosid=\""+L+"\" name=\""+L+"__model_dialog_frame\" id=\""+L+"__model_dialog_frame\" scrolling=\"auto\" ","  HSPACE =\"0\" VSPACE=\"0\" MARGINHEIGHT=\"0\" MARGINWIDTH=\"0\" "," class=\"eos-popwin-body-iframe\"  border =\"0\"   ","frameborder=\"0\" allowtransparency=\"true\" ></iframe>"].join("\n"),N=getMaxZindex(Q.win.document);V.style.width=$+"px";V.style.height=W+"px";V.style.left=S+"px";V.style.top=C+"px";V.style.overflow="hidden";V.innerHTML=M;Q.win.document.body.appendChild(V);var A=getMaxZindex(Q.win.document||document);A++;V.tabIndex=A;V.onmousedown=function(){try{this.focus()}catch($){}eventManager.stopEvent()};V.onkeypress=function(){eventManager.stopEvent()};V.onkeydown=function(_){var $=(eventManager.getEvent(Q.win)||_).keyCode;if($==27){eventManager.stopEvent();window.returnValue=undefined;hideModelDialog(L)}};var G=$id(L+"__model_dialog_mask",Q.win.document);G.style.width=$+"px";G.style.height=W+"px";Q.maskDiv=G;G.style.zIndex=N+2;V.style.zIndex=N+1;var J=$id(L+"__model_dialog_body",Q.win.document),P=J.offsetWidth;J.style.height=(W-27)>0?(W-27-7):0+"px";J.innerHTML=B;var X=$id(L+"__model_dialog_frame",Q.win.document);if(X){X.src=D;X.style.height=(W-28)>0?(W-28-7):0+"px";X.style.width=P;X.style.zIndex=N+1}var K=$id(L+"__model_dialog_head",Q.win.document);K.onmousedown=function(){try{V.focus()}catch($){}eventManager.stopEvent()};var T=$create("div",Q.win.document);T.style.position="absolute";T.style.width=$+"px";T.style.height=W+"px";T.style.left=S+"px";T.style.top=(C)+"px";T.style.cursor="move";T.onmousedown=function(){eventManager.stopEvent()};T.style.zIndex=N;Q.win.document.body.appendChild(T);var I=Q.win.fx_DD||fx_DD;if(I)I(T,{handle:K,limit:{x:[0,Q.win.offsetWidth],y:[0,Q.win.offsetHeight]},onStart:function(){T.style.height=V.style.height;T.style.zIndex=(T.style.zIndex*1)+2;Q.win.document.body.onselectstart=function(){return false}},onDrag:function(){T.style.border="1px dotted #000093";V.style.display="none"},onComplete:function(){this.isdraging=false;T.style.height="24px";V.style.left=T.style.left;V.style.top=T.style.top;T.style.zIndex=T.style.zIndex-2;T.style.border="";V.style.display="";Q.win.document.body.onselectstart=null}});Q.iframe=X;Q.container=V;Q.ddDiv=T;V.style.display="none";var _=$id(L+"__model_dialog_focus",Q.win.document),O=$id(L+"_right",Q.win.document),Y=$id(L+"_bottom",Q.win.document),E=$id(L+"rightBottom",Q.win.document);I(V,{handle:Y,modifiers:true,onDrag:function(){var _=this.mouse.start["y"],$=this.mouse.now["y"];if($-_+this.value.now["y"]>=27)this.element.style.height=$-_+this.value.now["y"];resizeModelDialog(L,parseInt(V.style.width),parseInt(V.style.height));Q.iframe.style.display="none"},onComplete:function(){Q.iframe.style.display=""},onStart:function(){this.value.now["y"]=this.element.getStyle("height").toInt();Q.iframe.style.display="none"}});I(V,{handle:O,modifiers:true,onDrag:function(){var _=this.mouse.start["x"],$=this.mouse.now["x"];if($-_+this.value.now["x"]>=150)this.element.style.width=$-_+this.value.now["x"];resizeModelDialog(L,parseInt(V.style.width),parseInt(V.style.height));Q.iframe.style.display="none"},onComplete:function(){Q.iframe.style.display=""},onStart:function(){this.value.now["x"]=this.element.getStyle("width").toInt();Q.iframe.style.display="none"}});I(V,{handle:E,modifiers:true,onStart:function(){this.value.now["x"]=this.element.getStyle("width").toInt();this.value.now["y"]=this.element.getStyle("height").toInt();Q.iframe.style.display="none"},onDrag:function(){var B=this.mouse.start["y"],_=this.mouse.now["y"];if(_-B+this.value.now["y"]>=27)V.style.height=_-B+this.value.now["y"];var $=this.mouse.start["x"],A=this.mouse.now["x"];if(A-$+this.value.now["x"]>=150)V.style.width=A-$+this.value.now["x"];resizeModelDialog(L,parseInt(V.style.width),parseInt(V.style.height));Q.iframe.style.display="none"},onComplete:function(){Q.iframe.style.display=""}});fx_fadeIn(V,function(){},550)}function openNewWindow(E,C,_,G,B,H,F,D,$,A){H=(H||H=="yes")?"yes":"no";F=(F||F=="yes")?"yes":"no";D=(D||D=="yes")?"yes":"no";$=($||$=="yes")?"yes":"no";A=(A||A=="yes")?"yes":"no";newwin=window.open(E,"popupnav","width="+C+","+"height="+_+","+"left="+G+","+"top="+B+","+"status="+H+","+"menubar="+F+","+"location="+D+","+"toolbar="+$+","+"scrollbars="+A);newwin.focus();return newwin}var dialogArguments;if(window.frameElement){var windowType,eosid;if(isIE){windowType=window.frameElement.type;eosid=window.frameElement.eosid}else{windowType=window.frameElement.getAttribute("type");eosid=window.frameElement.getAttribute("eosid")}if(windowType=="_eos_modal_dialog"){var modal=getModalDialog(eosid);window["dialogArguments"]=modal["Argument"];window["returnValue"]=null;window["parentWindow"]=modal.parentWin;window["_eos_dialog_id"]=modal.id;modal.frameWin=window;initDialogWindowEvent();window.bfCurrStack=top.currStack;top.currStack=[];eventManager.add(window,"unload",function(){top.currStack=window.bfCurrStack||[]})}}function initDialogWindowEvent(){var $=window.close;window.close=function(){hideModelDialog(window["_eos_dialog_id"])};window.resize=function($,_){resizeModelDialog(window["_eos_dialog_id"],$,_)};var _=window.moveTo;window.moveTo=function(_,$){moveModelDialog(window["_eos_dialog_id"],_,$)};window.moveCenter=function(){moveModelDialogToCenter(window["_eos_dialog_id"])}}function loadParent($){if(window.parentWindow)if($)window.parentWindow.location=$;else window.parentWindow.location=window.parentWindow.location}function hideAllSelect(B){if(isIE&&B){var $=B.getElementsByTagName("select");for(var _=0;_<$.length;_++){$[_].back_display=$[_].style.display;$[_].style.display="none"}var A=getFrameDocuments(B);for(_=0;_<A.length;_++)hideAllSelect(A[_])}}function showAllSelect(B){if(isIE&&B){var $=B.getElementsByTagName("select");for(var _=0;_<$.length;_++)$[_].style.display=$[_].back_display;var A=getFrameDocuments(B);for(_=0;_<A.length;_++)showAllSelect(A[_])}}function getFrameDocuments(B){var $=[];if(isIE){var A=B.frames;for(var _=0;_<A.length;_++)$.push(A[_].document)}else{A=B.getElementsByTagName("iframe");for(_=0;_<A.length;_++)$.push(A[_].contentDocument);A=B.getElementsByTagName("frame");for(_=0;_<A.length;_++)$.push(A[_].contentDocument)}return $}var _eos_colsed_panel=[],_eos_curr_open_panel=null;function Panel($){this.id=$;PageControl.add($,this);this.container=null;this.title=null;this.onExpandFunc=null;this.onCloseFunc=null;this.status=null;this.button=null}Panel.OPEN_STYLE_BUTTON="PANEL_OPEN_BUTTON";Panel.CLOSE_STYLE_BUTTON="PANEL_CLOSE_BUTTON";Panel.prototype.init=function(){this.container=$id(this.id+"_container");this.button=$id(this.id+"_button");this.titleObj=$id(this.id+"_title");this.table=$id("_"+this.id+"_panel_table");this.freshButton();var $=this;this.button.onclick=function(){$.changeStatus()}};Panel.prototype.setTitle=function($){this.title=$;this.titleObj.innerHTML=$};Panel.prototype.getTitle=function(){return this.title};Panel.prototype.freshButton=function(){if(this.status)this.button.className=Panel.CLOSE_STYLE_BUTTON;else this.button.className=Panel.OPEN_STYLE_BUTTON};Panel.prototype.changeStatus=function(){var $=this.button;if($)if(!this.status)this.open($);else this.close($)};Panel.prototype.open=function(obj){var table=$id("_"+this.id+"_panel_table");if(!table)return;_eos_curr_open_panel=this;if(this.onExpandFunc){try{var result=eval(this.onExpandFunc+"();");if(result!=false){table.rows[1].style.display="";if(table.backupHeight!=null){table.height=table.backupHeight;this.container.style.height=this.height}this.status=true;this.freshButton()}}catch(e){}}else{table.rows[1].style.display="";if(table.backupHeight!=null){table.height=table.backupHeight;this.container.style.height=this.height}this.status=true;this.freshButton();if(this.needResize===true){_eos_colsed_panel.pop(this);for(var i=0;i<_registryEvent.length;i++){var e=_registryEvent[i];if(e.obj==window&&e.type=="resize")e.fn()}this.needResize=false}}_eos_curr_open_panel=null};Panel.prototype.close=function(obj){var table=$id("_"+this.id+"_panel_table");if(!table)return;if(this.onCloseFunc){try{_eos_colsed_panel.push(this);var result=eval(this.onCloseFunc+"();");if(result!=false){table.rows[1].style.display="none";table.backupHeight=table.height;table.height="20px";this.height=this.container.style.height;this.container.style.height="20px";this.status=false;this.freshButton()}}catch(e){}}else{_eos_colsed_panel.push(this);table.rows[1].style.display="none";table.backupHeight=table.height;table.height="20px";this.height=this.container.style.height;this.container.style.height="20px";this.status=false;this.freshButton()}};Panel.prototype.collapse=Panel.prototype.close;Panel.prototype.expand=Panel.prototype.open;function RichTextEditor($){this.id=$;this.name="";this.value="";this.width="100%";this.height=200;this.value="";this.BasePath=contextPath+"/common/fckeditor/";this.hiddenInput=null;this.toolbarSet="Default";this.container=null;this.richEditor=null;PageControl.add($,this)}RichTextEditor.prototype.init=function(){var $=new FCKeditor(this.id+"_textarea");$.BasePath=this.BasePath;this.container=$id(this.id+"_container");if(isNaN(parseInt(this.width)))this.width="100%";if(isNaN(parseInt(this.height)))this.height=200;$.Height=this.height;$.Width=this.width;$.Value=this.value;$.ToolbarSet=this.toolbarSet;$.ReplaceTextarea();this.richEditor=$};RichTextEditor.prototype.getValue=function(){var _=this.getFCKEditor(),$=_.GetHTML();if($&&this.value)if($=="<p>"+this.value+"</p>")return this.value;if($==""||$=="<p></p>")return this.value;return $};RichTextEditor.prototype.getFCKEditor=function(){var $=FCKeditorAPI.GetInstance(this.id+"_textarea");return $};RichTextEditor.prototype.setValue=function($){if($!=null&&$!=undefined){var _=this.getFCKEditor();_.SetHTML($)}else _.SetHTML("");this.value=$};RichTextEditor.prototype.setFocus=function(){};RichTextEditor.prototype.lostFocus=function(){};RichTextEditor.prototype.showEditor=function(){this.container.style.display=""};RichTextEditor.prototype.hideEditor=function(){this.container.style.display="none"};RichTextEditor.prototype.hide=function(){this.hideEditor()};RichTextEditor.prototype.validate=function(){return true};RichTextEditor.prototype.isFocus=function(){return false};RichTextEditor.prototype.getDisplayValue=function($){return $};RichTextEditor.prototype.setPosition=function($,_,B,A){this.container.style.position="absolute";this.container.style.top="0px";this.container.style.left="0px";var C=getMaxZindex(document);if(this.container.style.zIndex!=C)this.container.style.zIndex=C;setElementXY(this.container,[$,_])};function DictRadioGroup($){this.id=$;this.value=null;this.container=$id(this.id+"_container");this.radioes=this.container.getElementsByTagName("input");this.container.onmousedown=function(){eventManager.stopPropagation()};this.hiddenInput=new Object();this.jsonObj=null;this.initEvent();PageControl.add($,this)}DictRadioGroup.prototype.init=function(){};DictRadioGroup.prototype.initEvent=function(){var A=this;function $(){A.refreshValue()}for(var _=0;_<this.radioes.length;_++){var B=this.radioes[_];eventManager.add(B,"click",$)}eventManager.add(this.container,"keypress",$)};DictRadioGroup.prototype.refreshInput=function(){str=this.hiddenInput.value;for(var $=0;$<this.radioes.length;$++){var _=this.radioes[$];if(_.value==str)_.checked=true;else _.checked=false}};DictRadioGroup.prototype.refreshValue=function(){var _;for(var $=0;$<this.radioes.length;$++){var A=this.radioes[$];if(A.checked){_=A.value;break}}this.hiddenInput.value=_};DictRadioGroup.prototype.setValue=function($){this.hiddenInput.value=$;this.refreshInput()};DictRadioGroup.prototype.getValue=function(){this.refreshValue();return this.hiddenInput.value};DictRadioGroup.prototype.setFocus=function(){var A=false;for(var $=0;$<this.radioes.length;$++){var _=this.radioes[$];if(_.checked==true){_.focus();A=true;break}if(!A)this.radioes[0].focus()}};DictRadioGroup.prototype.lostFocus=function(){};DictRadioGroup.prototype.showEditor=function(){var $=getMaxZindex();this.container.style.zIndex=$;this.container.style.display="";addClass(this.container.firstChild,"dict_comp");if(this.isDcEdit==true){var _=this.container.firstChild;_.style.width=_.firstChild.offsetWidth;initShadow(_)}this.setFocus()};DictRadioGroup.prototype.hideEditor=function(){this.container.style.display="none"};DictRadioGroup.prototype.setPosition=function($,B,_,A){this.container.style.position="absolute";this.container.zIndex=9999;this.container.style.left=$+"px";this.container.style.top=B+"px"};DictRadioGroup.prototype.isFocus=function(){return true};DictRadioGroup.prototype.validate=function(){return true};DictRadioGroup.prototype.getDisplayValue=function($){if($==null)$=this.getValue();if(!this.jsonObj)return $;var _=this.jsonObj[$];return _!==undefined&&_!==null?_:$};function CheckGroup($){this.id=$;PageControl.add($,this);this.subCheck=new Array();this.selectCheck=new Array()}CheckGroup.prototype.getRows=function(){return this.subCheck};CheckGroup.prototype.init=function(){for(var $=0;$<this.subCheck.length;$++){var _=this.subCheck[$];_.inited=true;if(_.isChecked)_.setSelected();else _.disSelected()}this.afterInit()};CheckGroup.prototype.getSelectLength=function(){var _=0;for(var $=0;$<this.subCheck.length;$++)if(this.subCheck[$].getStatus())_++;return _};CheckGroup.prototype.getIndex=function(A){var _=-1;for(var $=0;$<this.subCheck.length;$++)if(this.subCheck[$]==A){_=$;break}return _};CheckGroup.prototype.getLength=function(){return this.subCheck.length};CheckGroup.prototype.getSelectRows=function(){var _=[];for(var $=0;$<this.subCheck.length;$++)if(this.subCheck[$].getStatus())_.push(this.subCheck[$]);return _};CheckGroup.prototype.getSelectParams=function($){var C=this.getSelectRows(),A=[];for(var _=0;_<C.length;_++){var B=C[_].getParam($);A.push(B)}return A};CheckGroup.prototype.selectAll=function(){for(var $=0;$<this.subCheck.length;$++){var _=this.subCheck[$];_.setSelected()}};CheckGroup.prototype.selectReverse=function(){for(var $=0;$<this.subCheck.length;$++){var _=this.subCheck[$];_.reverseSelect()}};CheckGroup.prototype.disSelectAll=function(){for(var $=0;$<this.subCheck.length;$++){var _=this.subCheck[$];_.disSelected()}};CheckGroup.prototype.get=function($){return this.subCheck[$]};CheckGroup.prototype.register=function($){this.subCheck.push($)};CheckGroup.prototype.afterInit=function(){};function rowCheckBox($){this.id=$;this.isChecked=false;PageControl.add($,this);this.params=[];this.checkbox=null;this.container=null;this.subboxes=new Array();this.row=null;this.selectStyle="";this.rowSelect=true;this.rowEvent="click";this.onSelectFunc=null;this.onUnSelectFunc=null;this.groupid=null;this.tagName="tr";this.showCheckBox=true;this.inited=false;this.backClassName=null;this.beforeSelectFunc=null;this.afterSelectFunc=null;this.beforeUnSelectFunc=null;this.afterUnSelectFunc=null}rowCheckBox.prototype.init=function(){this.container=$id(this.id+"_container");this.checkbox=$createElement("input",{id:this.id+"_checkbox",type:"checkbox"});this.container.appendChild(this.checkbox);for(var _=0;_<this.params.length;_++){var B=$createElement("input",{name:this.params[_].name,value:this.params[_].value,type:"checkbox",style:{display:"none"}});this.container.appendChild(B)}if(this.showCheckBox)this.checkbox.style.display="";else this.checkbox.style.display="none";var D=this.container.getElementsByTagName("input");if(D)for(_=0;_<D.length;_++){var A=D[_];if(A.id!=this.id){this.subboxes.push(A);A.checked=this.value}}var E=this;this.checkbox.onclick=function(){setTimeout($,1);eventManager.stopPropagation();return false};function $(){E.reverseSelect()}if(this.rowSelect){this.row=getRow(this.container,this.tagName);this.backClassName=this.row.className;eventManager.add(this.row,this.rowEvent,$)}var C=PageControl.getOne(this.groupid);C.register(this)};rowCheckBox.prototype.changeStatus=function(){for(var $=0;$<this.subboxes.length;$++){var _=this.subboxes[$];_.checked=this.value}if(this.row)if(this.value)this.row.className=this.selectStyle;else this.row.className=this.backClassName};rowCheckBox.prototype.getStatus=function(){return this.value};rowCheckBox.prototype.getIndex=function(){return this.group.getIndex(this)};rowCheckBox.prototype.getParam=function(_){for(var $=0;$<this.subboxes.length;$++){var A=this.subboxes[$];if(A.name.replace(/\[\d*\]/,"[*]")==_||A.name.replace(/\[\d*\]/,"")==_)return A.value}return null};rowCheckBox.prototype.reverseSelect=function(){if(this.value)this.disSelected();else this.setSelected()};rowCheckBox.prototype.setSelected=function(){if(this.beforeSelectFunc&&this.inited)if(eval(this.beforeSelectFunc+"(this)")===false)return;this.checkbox.checked=true;this.value=true;this.changeStatus();if(this.onSelectFunc&&this.inited)if(typeof(this.onSelectFunc)=="string")eval(this.onSelectFunc+"(this)");else this.onSelectFunc(this);if(this.afterSelectFunc&&this.inited)eval(this.afterSelectFunc+"(this)")};rowCheckBox.prototype.disSelected=function(){if(this.beforeUnSelectFunc&&this.inited)if(eval(this.beforeUnSelectFunc+"(this)")===false)return;if(this.onUnSelectFunc&&this.inited)if(typeof(this.onUnSelectFunc)=="string")eval(this.onUnSelectFunc+"(this)");else this.onUnSelectFunc(this);this.checkbox.removeAttribute("checked");this.value=false;this.changeStatus();if(this.afterUnSelectFunc&&this.inited)eval(this.afterUnSelectFunc+"(this)")};function getRow(A,_){_=_?_.toUpperCase():"TR";var $=A;while($){if($.tagName.toUpperCase()==_)return $;$=$.parentNode}}function selectAll(_){var $=PageControl.getOne(_);$.selectAll()}function selectOther(_){var $=PageControl.getOne(_);$.selectReverse()}function selectReverse($){selectOther($)}function selectNone(_){var $=PageControl.getOne(_);$.disSelectAll()}function disSelectAll($){selectNone($)}function controlCheckGroup($,_){if($.checked)selectAll(_);else selectNone(_)}function RadioGroup($){this.id=$;PageControl.add($,this);this.subRadio=new Array();this.currRadio=null;this.defaultRow=null}RadioGroup.prototype.getRows=function(){return this.subRadio};RadioGroup.prototype.init=function(){for(var $=0;$<this.subRadio.length;$++){if(this.subRadio[$].isChecked)this.subRadio[$].reverseSelect();else this.subRadio[$].disSelected();this.subRadio[$].inited=true}this.afterInit()};RadioGroup.prototype.getParam=function(_){var $=this.getSelectRow();if($)return $.getParam(_);return null};RadioGroup.prototype.getIndex=function(A){var _=-1;for(var $=0;$<this.subRadio.length;$++)if(this.subRadio[$]==A)return $;return _};RadioGroup.prototype.getSelectRow=function(){return this.currRadio};RadioGroup.prototype.get=function($){return this.subRadio[$]};RadioGroup.prototype.getLength=function(){return this.subRadio.length};RadioGroup.prototype.getSelectLength=function(){if(this.currRadio)return 1;else return 0};RadioGroup.prototype.register=function($){this.subRadio.push($)};RadioGroup.prototype.refresh=function(jsRadio){if(this.currRadio!=jsRadio)if(jsRadio.setSelected()!==false){if(this.currRadio)this.currRadio.disSelected();this.currRadio=jsRadio;if(jsRadio.afterSelectFunc&&jsRadio.inited)eval(jsRadio.afterSelectFunc+"(this)")}};RadioGroup.prototype.afterInit=function(){};function rowRadio($){this.id=$;this.isChecked=false;PageControl.add($,this);this.params=[];this.radio=null;this.container=null;this.subboxes=new Array();this.row=null;this.selectStyle="";this.rowSelect=true;this.rowEvent="click";this.onSelectFunc=null;this.onUnSelectFunc=null;this.groupid=null;this.group=null;this.tagName="tr";this.showRadio=true;this.inited=false;this.backClassName=null;this.beforeSelectFunc=null;this.afterSelectFunc=null}rowRadio.prototype.init=function(){this.container=$id(this.id+"_container");this.radio=$createElement("input",{id:this.id+"_radio",type:"radio"});this.container.appendChild(this.radio);for(var _=0;_<this.params.length;_++){var B=$createElement("input",{name:this.params[_].name,value:this.params[_].value,type:"checkbox",style:{display:"none"}});this.container.appendChild(B)}if(this.showRadio)this.radio.style.display="";else this.radio.style.display="none";var D=this.container.getElementsByTagName("input");if(D)for(_=0;_<D.length;_++){var A=D[_];if(A.id!=this.id){this.subboxes.push(A);A.checked=this.value}}var E=this;this.radio.onclick=function(){eventManager.stopPropagation();setTimeout($,1);return false};function $(){E.reverseSelect()}if(this.rowSelect){this.row=getRow(this.container,this.tagName);this.backClassName=this.row.className;eventManager.add(this.row,this.rowEvent,$)}var C=$o(this.groupid);C.register(this);this.group=C};rowRadio.prototype.changeStatus=function(){for(var $=0;$<this.subboxes.length;$++){var _=this.subboxes[$];_.checked=this.value}if(this.row)if(this.value)this.row.className=this.selectStyle;else this.row.className=this.backClassName};rowRadio.prototype.getStatus=function(){return this.value};rowRadio.prototype.getParam=function(_){for(var $=0;$<this.subboxes.length;$++){var A=this.subboxes[$];if(A.name.replace(/\[\d*\]/,"[*]")==_||A.name.replace(/\[\d*\]/,"")==_)return A.value}return null};rowRadio.prototype.reverseSelect=function(){this.group.refresh(this)};rowRadio.prototype.getIndex=function(){return this.group.getIndex(this)};rowRadio.prototype.setSelected=function(){if(this.beforeSelectFunc&&this.inited)if(eval(this.beforeSelectFunc+"(this)")===false)return false;this.radio.checked=true;this.value=true;this.changeStatus();if(this.onSelectFunc&&this.inited)if(typeof(this.onSelectFunc)=="string")eval(this.onSelectFunc+"(this)");else this.onSelectFunc(this)};rowRadio.prototype.disSelected=function(){if(this.onUnSelectFunc&&this.inited)if(typeof(this.onUnSelectFunc)=="string")eval(this.onUnSelectFunc+"(this)");else this.onUnSelectFunc(this);this.radio.removeAttribute("checked");this.value=false;this.changeStatus()};function Entity($){if(!$)$="entity";this.status=Entity.STATUS_INIT;this.name=$;this.values={};this.parent=new Dataset($);this.keys=[];this.__keys={};this.__type=null;this.id=null}Entity.STATUS_NEW=0;Entity.STATUS_INIT=1;Entity.STATUS_MODIFIED=2;Entity.STATUS_DELT=3;Entity.STATUS_HIDDEN=4;Entity.XPATH_LEVEL=2;Entity.LINK_SIGN="__collection";Entity.prototype.getPropertyByFieldName=function($){return this.values[$]};Entity.prototype.setPropertyByFieldName=function(_,$){var A=false;A=this.setValue(_,$);if(A)this.update()};Entity.prototype.setPropertyByXpath=function(B,_){var A=(B+"").split("/"),C=A[A.length-1];if(A.length==1){this.setPropertyByFieldName(C,_);return}A=A.slice(0,A.length-1);B=A.join("/");var $=this.getPropertyByXpath(B);if($ instanceof Entity)$.setPropertyByFieldName(C,_);else if($!==undefined&&$!==null){oldValue=$[C];$[C]=_}else{$=this.createEntityTree(B);$.setPropertyByFieldName(C,_)}};Entity.prototype.createEntityTree=function(B){var $=(B+"").split("/"),A=this,C;for(var _=0;_<$.length;_++){var D=$[_];C=A.getPropertyByFieldName(D);if(C===null||C===undefined){C=new Entity(D);A.setPropertyByFieldName(D,C)}A=C}return C};Entity.prototype.getPropertyByXpath=function(A){var $=(A+"").split("/"),B=this;for(var _=0;_<$.length;_++){var C=$[_];if(B instanceof Entity)B=B.getPropertyByFieldName(C);else B=B[C];if(B===null||B===undefined)break}return B};function deepEntity($){Entity.prototype.getProperty=Entity.prototype.getPropertyByFieldName;Entity.prototype.setProperty=Entity.prototype.setPropertyByFieldName;if($){Entity.prototype.getProperty=Entity.prototype.getPropertyByXpath;Entity.prototype.setProperty=Entity.prototype.setPropertyByXpath}}deepEntity(false);Entity.prototype.clone=function($){var C=new Entity(this.name);C.__type=this.__type;for(var B=0;B<this.keys.length;B++){var _=this.keys[B],A=this.getProperty(_);if(A instanceof Dataset||A instanceof Entity)C.setProperty(_,A.clone($));else C.setValue(_,A)}return C};Entity.prototype.toXMLString=function(B){B=B!==false;var J=new StringBuffer(),I="",F=this.name;if(B){if(this.name&&this.name.indexOf("/")>0){I=this.name.split("/")[0];F=this.name.split("/")[1];J.append("<").append(I).append(">\n")}J.append("<").append(F);if(this.__type)J.append(" __type=\"").append(this.__type).append("\"");if(this.id);J.append(">\n")}var H=this.getKeys(),$={};for(var A=0;A<H.length;A++){var _=this.getProperty(H[A]),D=_ instanceof Dataset,C=_ instanceof Entity;if(_===null||_===undefined||_===""){if(H[A].indexOf("/")>0){var K=H[A].split("/");if(!$[K[0]])$[K[0]]=[];var E="<"+K[1]+" __isNullOrEmpty=\"null\"/>\n";$[K[0]].push(E)}else J.append("<").append(H[A]).append(" __isNullOrEmpty=\"null\"/>\n")}else if(!D&&!C){if(H[A].indexOf("/")>0){K=H[A].split("/");if(!$[K[0]])$[K[0]]=[];E="<"+K[1]+">"+xmlConversion(_+"")+"</"+K[1]+">\n";$[K[0]].push(E)}else{J.append("<").append(H[A]).append(">");if(_||_===0)J.append(xmlConversion(_.toString()));J.append("</").append(H[A]).append(">\n")}}else J.append(_+"")}for(var G in $)if($.hasOwnProperty(G)){J.append("<").append(G).append(">");J.append($[G].join(""));J.append("</").append(G).append(">\n")}if(B){J.append("</").append(F).append(">\n");if(I)J.append("</").append(I).append(">\n")}return J.toString()};Entity.prototype.toString=Entity.prototype.toXMLString;Entity.prototype.getKeys=function(){return this.keys};Entity.prototype.xpathParse=function(_){_+="";var $=_.indexOf("/");if($<0)return _;else{var A=_.split("/");if(A.length!=2)$error(" \u93c6\u509b\u6902\u6d93\u5d86\u656e\u93b8\u4f79\u6d3f\u6fb6\u6c31\u9a87\u9428\u524epath ");return A}};Entity.prototype.setValue=function($,A){var _=false;if(!this.values[$]){if(!this.__keys[$]){this.keys.push($);this.__keys[$]=true}_=true}else if(this.values[$]!=A)_=true;this.values[$]=A;return _};Entity.prototype.getValue=function($){return this.values[$]};Entity.prototype.update=function(){if(this.parent){if(this.parent instanceof Dataset)this.parent.onUpdateEntity(this);this.parent.update()}this.__onUpdate();this.onUpdate()};Entity.prototype.onUpdate=function(){};Entity.prototype.__onUpdate=function(){};function Dataset($){this.values=[];this.entityType=$}Dataset.prototype.addEntity=function($,_){this.values.push($);$.parent=this;if(_!==false)$.status=Entity.STATUS_NEW;this.onAddEntity($);this.update()};Dataset.prototype.addBlankEntity=function(){var $=new Entity(this.entityType);if(this.getLength()!=0)$=this.get(0).clone();this.values.push($);$.parent=this;$.status=Entity.STATUS_NEW;this.onAddEntity($);this.update();return $};Dataset.prototype.removeEntity=function(A,B){if(this.onDeleteEntity(A)){if(B===true){for(var _=0;_<this.values.length;_++){var $=this.values[_];if($===A){this.values.splice(_,1);break}}}else A.status=Entity.STATUS_DELT;this.update()}};Dataset.prototype.getAlltEntities=function(){var _=[];for(var $=0;$<this.values.length;$++){var A=this.values[$];_.push(A)}return _};Dataset.prototype.setValue=function(_,$,A){_.setValue($,A)};Dataset.prototype.getModifiedEntities=function(){var _=[];for(var $=0;$<this.values.length;$++){var A=this.values[$];if(A.status==Entity.STATUS_MODIFIED)_.push(A)}return _};Dataset.prototype.getInsertEntities=function(){var _=[];for(var $=0;$<this.values.length;$++){var A=this.values[$];if(A.status==Entity.STATUS_NEW)_.push(A)}return _};Dataset.prototype.getRemovedEntities=function(){var _=[];for(var $=0;$<this.values.length;$++){var A=this.values[$];if(A.status==Entity.STATUS_DELT)_.push(A)}return _};Dataset.prototype.filter=function(_,A){var C=[];for(var B=0;B<this.values.length;B++){var $=this.values[B];if($.getProperty(_)==A)C.push($)}return C};Dataset.prototype.findEntity=function($,B){for(var _=0;_<this.values.length;_++){var A=this.values[_];if(A.getProperty($)==B)return A}return null};Dataset.prototype.toString=function(){var A=new StringBuffer();for(var $=0;$<this.values.length;$++){var _=this.values[$];A.append(_.toString())}return A.toString()};Dataset.prototype.clear=function(){this.values=[];this.update()};Dataset.prototype.appendDataset=function(A){for(var $=0;$<A.getLength();$++){var _=A.get($).clone(true);this.addEntity(_);_.status=Entity.STATUS_INIT}this.update()};Dataset.prototype.init=function($){if($.length==1){var C=$[0].getAttribute("__isNullOrEmpty");if(C=="empty"||C=="null")return}for(var _=0;_<$.length;_++){var B=$[_];if(!B.tagName)continue;var A=Dataset.initEntity(B);A.id=B.getAttribute(Entity.LINK_SIGN)?B.getAttribute(Entity.LINK_SIGN):null;this.onFillEntity(A);this.addEntity(A);A.status=Entity.STATUS_INIT}};Dataset.initEntity=function(E){if(!E)return null;var D=new Entity(E.tagName);D.__type=E.getAttribute("__type");var C=E.childNodes,$=[];$["type"]=null;for(var A=0;A<C.length;A++){var _=C[A];if(_.nodeType==1)if(!_.getAttribute(Entity.LINK_SIGN))Dataset.initField(D,_);else if($["type"]==_.tagName)$.push(_);else{if($["type"]!=null){var B=new Dataset($["type"]);B.init($);D.setProperty($["type"],B)}$=[];$["type"]=_.tagName;$.push(_)}}if($["type"]!=null){B=new Dataset($["type"]);B.init($);D.setProperty($["type"],B)}$=[];return D};Dataset.initField=function($,A){if(A.childNodes.length>1){for(var B=0;B<A.childNodes.length;B++){var _=A.childNodes[B];if(_.nodeType==1){var C=A.tagName+"/"+_.tagName;$.setProperty(C,getNodeValue(_))}}}else $.setProperty(A.tagName,getNodeValue(A))};Dataset.prototype.slice=function(B,A){var $=new Dataset(this.entityType);if(!A)A=this.getLength();if(A>this.getLength())A=this.getLength();for(var _=B;_<A;_++){var C=this.get(_).clone();$.addEntity(C)}return $};Dataset.prototype.update=function(){this.onUpdate()};Dataset.prototype.getEntities=function(){return this.values};Dataset.prototype.getLength=function(){return this.getEntities().length};Dataset.prototype.get=function($){return this.values[$]};Dataset.prototype.onFillEntity=function($){};Dataset.prototype.onUpdateEntity=function($){};Dataset.prototype.onAddEntity=function($){};Dataset.prototype.onDeleteEntity=function($){return true};Dataset.prototype.onUpdate=function(){};Dataset.prototype.clone=function($){var B=new Dataset(this.entityType);if(!$)return B;else{for(var _=0;_<this.values.length;_++){var A=this.values[_].clone($);B.values.push(A)}return B}};Dataset.prototype.getInsertDataset=function(){var A=new Dataset(this.entityType),_=this.getInsertEntities();for(var $=0;$<_.length;$++)A.addEntity(_[$].clone(true));return A};Dataset.prototype.getRemovedDataset=function(){var A=new Dataset(this.entityType),_=this.getRemovedEntities();for(var $=0;$<_.length;$++)A.addEntity(_[$].clone(true));return A};Dataset.prototype.getModifiedDataset=function(){var A=new Dataset(this.entityType),_=this.getModifiedEntities();for(var $=0;$<_.length;$++)A.addEntity(_[$].clone(true));return A};Dataset.prototype.getSubmitXML=function($){var B=new StringBuffer();if($.xpath=="map"){var A=this.getInsertEntities();if(A.length>0)for(var _=0;_<A.length;_++){A[_].name="insertEntities";B.append(A[_].toString())}A=this.getModifiedEntities();if(A.length>0)for(_=0;_<A.length;_++){A[_].name="updateEntities";B.append(A[_].toString())}A=this.getRemovedEntities();if(A.length>0)for(_=0;_<A.length;_++){A[_].name="deleteEntities";B.append(A[_].toString())}B.append("<xpath>map</xpath>")}else{A=this.getInsertEntities();B.append("<entry><string>insertEntities</string><list>");if(A.length>0)for(_=0;_<A.length;_++)B.append(A[_].toString());B.append("</list></entry>");A=this.getModifiedEntities();B.append("<entry><string>updateEntities</string><list>");if(A.length>0)for(_=0;_<A.length;_++)B.append(A[_].toString());B.append("</list></entry>");A=this.getRemovedEntities();B.append("<entry><string>deleteEntities</string><list>");if(A.length>0)for(_=0;_<A.length;_++)B.append(A[_].toString());B.append("</list></entry>")}return B.toString()};Dataset.create=function(A,E,D){var $=null;$debug("type of xml"+typeof(A));if(typeof(A)=="string"){$=createXmlDom();$.loadXML(A)}else if(typeof(A)=="object")$=A;else{$error("error xml of "+A);return null}if(E.indexOf("/")!=0)E="/"+E;if(E.indexOf("/root/data")<0)E="/root/data"+E;var C=$.selectNodes(E);if(C){if(!D){var B=E.split("/");D=B[B.length-1]}var _=new Dataset(D);_.init(C);return _}else{$error("no node found by xpath:"+E+"in xml:"+$.xml);return null}};function Dataset2Array(_,D,H){var C=[];if(!_)return C;D=D||"";var F=_.getLength();for(var I=0;I<F;I++){var A=_.get(I);if(H)if(A.status==Entity.STATUS_DELT||A.status==Entity.STATUS_HIDDEN)continue;var $=Entity2Array(A),G=I+1;for(var E=0;E<$.length;E++){var B=D+"["+G+"]/"+$[E].key;C.push({key:B,value:$[E].value})}}return C}function Entity2Array(G){var _=[];if(!G)return _;if(G.__type)_.push({key:"__type",value:G.__type});var A=G.keys.length;for(var E=0;E<A;E++){var C=G.keys[E],H=G.getProperty(C);if(H instanceof Entity){var D=Entity2Array(H);for(var B=0;B<D.length;B++){var $=C+"/"+D[B].key;_.push({key:$,value:D[B].value})}}else if(H instanceof Dataset){var F=Dataset2Array(H,C);for(B=0;B<F.length;B++){C=F[B].key;_.push({key:C,value:F[B].value})}}else{C=C;_.push({key:C,value:H})}}return _}function isEmptyObject(_){if(typeof(_)!="object")return false;for(var $ in _)return false;return true}function Json2Entity($,A){if(!$)return $;A=A||new Entity();for(var _ in $)if($.hasOwnProperty(_)){var B=$[_];if(isArray(B))B=Json2Dataset(B,_);else if(isEmptyObject(B))B=null;else if(B!==null&&B!==undefined&&typeof(B)=="object"){B=Json2Entity(B);B.parent=A;B.name=_}A.setProperty(_,B)}return A}function Json2Dataset(A,_,B){B=B||new Dataset();A=A||[];if(!isArray(A))A=[A];for(var C=0,D=A.length;C<D;C++){var $=Json2Entity(A[C]);$.name=_||$.name;B.addEntity($,false)}return B}function Entity2Json(A,D){D=D||{};var _=A.getKeys();for(var C=0,$=_.length;C<$;C++){var B=A.getProperty(_[C]);if(B instanceof Entity)B=Entity2Json(B);else if(B instanceof Dataset)B=Dataset2Json(B);D[_[C]]=B}return D}function Dataset2Json(B,A,C){A=A||[];for(var _=0,D=B.values.length;_<D;_++){var $=B.values[_];if(C!==true&&($.status==Entity.STATUS_DELT||$.status==Entity.STATUS_HIDDEN))continue;A.push(Entity2Json($))}return A}function SimpleEditor($){var _=null;if($)if(!$.getAttribute("__eos__editor__inited")){if($.tagName&&$.tagName.toLowerCase()=="form")_=initFormEditor($);else _=initSimpleEditor($);$.setAttribute("__eos__editor__inited",true)}return _}function initSimpleEditor($){$.onmouseover=function(){this.mouseOver=true};$.onmouseout=function(){this.mouseOver=false};$.onmousedown=function(){eventManager.stopEvent()};$.setValue=function(B){if(this.type=="select-multiple"){var A,C=[];if(B instanceof Array)A=B;else A=B.split(",");for(var _=0;_<this.options.length;_++)for(var $=0;$<A.length;$++)if(A[$]==this.options[_].value){this.options[_].selected=true;break}}else if(B===null||B===undefined)this.value="";else this.value=B};$.getValue=function(){if(this.type=="select-multiple"){var _=[];for(var $=0;$<this.options.length;$++)if(this.options[$].selected==true)_.push(this.options[$].value);return _}return this.value};$.showEditor=function(){this.style.display="";try{this.focus()}catch(_){}var $=this;setTimeout(function(){try{$.focus()}catch(_){}},1)};$.hideEditor=function(){this.style.display="none";this.hiddenMessage()};$.setPosition=function($,_,B,A){this.style.position="absolute";var C=getMaxZindex(document);if(this.style.zIndex!=C)this.style.zIndex=C;this.style.top="0px";this.style.left="0px";setElementXY(this,[$,_]);if(this.type=="text"||this.type=="password"||this.type=="select-one"){this.style.width=B+"px";this.style.height=A+"px"}else if(this.type=="select-multiple")this.style.width=B+"px"};$.isFocus=function(){return this.mouseOver};$.validate=function(){return checkInput(this)};$.onkeyup=function(){if(this.validate()==false){var _=this,$=this.timeout;clearTimeout($);this.timeout=setTimeout(function(){return f_alert_hidden_message.apply(_,[_])},3500)}};$.hiddenMessage=function(){f_alert_verify_successful(this)};$.getDisplayValue=function(B){if(!B)return null;if(this.type=="select-one"){for(var _=0;_<this.options.length;_++)if(this.options[_].value==B)return this.options[_].text}else if(this.type=="select-multiple"){var A,C=[];if(B instanceof Array)A=B;else A=B.split(",");for(_=0;_<this.options.length;_++)for(var $=0;$<A.length;$++)if(A[$]==this.options[_].value){C.push(this.options[_].text);break}if(B instanceof Array)return C;else return C.join(",")}else if(this.type=="password")return"******";return B};return $}function initFormEditor(F){F.value=null;F.onmouseover=function(){this.mouseOver=true};F.onmouseout=function(){this.mouseOver=false};F.setValue=function($){F.value=$;setTimeout(A,50)};F.getValue=function(){return this.value};F.showEditor=function(){this.style.display=""};F.hideEditor=function(){this.style.display="none"};F.setPosition=function($,B,_,A){setPosition(this,[$,B]);if(this.type=="text"||this.type=="password"||this.type=="select-one"||this.type=="select-multiple"){this.style.width=_+"px";this.style.height=A+"px"}};F.isFocus=function(){return this.mouseOver};F.validate=function(){return checkForm(this)};F.getDisplayValue=function($){return $};F.freshFromEntity=function($){this.value=$;A()};F.update=function(){E()};function E(){if(F.value)for(var $ in F.editors){var _=F.editors[$];F.value.setProperty($,_.getValue())}}function B(){}function A(){if(F.value)for(var $ in F.editors){var _=F.editors[$];_.setValue(F.value.getProperty($))}}F.editors={};for(var C=0;C<F.elements.length;C++){var D=F.elements[C];if(D.name){var _=D.getAttribute("jsid");if(_&&_.length>0){var $=$id(_);if($)F.editors[D.name]=$}else F.editors[D.name]=(SimpleEditor(D))}}return F}function TimeSelect($){this.id=$;PageControl.add(this.id,this);this.name=null;this.hour="00";this.minute="00";this.second="00";this.hourInput=null;this.minuteInput=null;this.secondInput=null;this.container=null;this.upButton=null;this.downButton=null;this.hiddenInput=null;this.dateTime=null;this.defaultValue=null;this.__privateFormat="HH:mm:ss";this.format="HH:mm:ss";this.tabIndex=null;this.accesskey=null;this.currInput=null;this.BUTTON_UP_ID="BUTTON_UP"+$;this.BUTTON_DOWN_ID="BUTTON_DOWN"+$;this.INPUT_HOUR_ID="INPUT_HOUR"+$;this.INPUT_MINUTE_ID="INPUT_MINUTE"+$;this.INPUT_SECOND_ID="INPUT_SECOND"+$;this.INPUT_HIDDEN_ID="INPUT_HIDDEN"+$;this.maxValue="23:59:59";this.minValue="00:00:00";this.maxHour=23;this.minHour=0;this.maxMinute=59;this.minMinute=0;this.maxSecond=59;this.minSecond=0;this.readonly=false;this.isOver=false;this.disabled=false;this.allowNull=true}TimeSelect.prototype.setReadOnly=function($){this.readonly=$;if($){this.hourInput.readOnly=true;this.minuteInput.readOnly=true;this.secondInput.readOnly=true}else{this.hourInput.readOnly=false;this.minuteInput.readOnly=false;this.secondInput.readOnly=false}};TimeSelect.prototype.getReadOnly=function(){return this.readonly};TimeSelect.prototype.setDisabled=function($){this.disabled=$;if($){this.hiddenInput.disabled=true;this.hourInput.disabled=true;this.minuteInput.disabled=true;this.secondInput.disabled=true}else{this.hiddenInput.disabled=false;this.hourInput.disabled=false;this.minuteInput.disabled=false;this.secondInput.disabled=false}};TimeSelect.prototype.getDisabled=function(){return this.disabled};TimeSelect.prototype.init=function(){var _=this.toHtml(),$=$create("div");$.innerHTML=_;this.container=$id(this.id+"_container");this.container.appendChild($);this.container.className="eos-time";this.container.onmouseover=function(){this.className="eos-time-over";this.isOver=true};this.container.onmouseout=function(){this.className="eos-time";this.isOver=false};this.container.onmousedown=function(){};if(!this.defaultValue&&!this.defaultNull)this.defaultValue="00:00:00";if(this.defaultValue&&timeFormat(this.defaultValue,this.format)){if(this.maxValue&&this.defaultValue>this.maxValue)this.defaultValue=this.maxValue;if(this.minValue&&this.defaultValue<this.minValue)this.defaultValue=this.minValue}this.initObject();this.setReadOnly(this.readonly);this.setDisabled(this.disabled);this.currInput=null};TimeSelect.prototype.initObject=function(){this.setCheckValue();this.hourInput=$id(this.INPUT_HOUR_ID);this.minuteInput=$id(this.INPUT_MINUTE_ID);this.secondInput=$id(this.INPUT_SECOND_ID);this.upButton=$id(this.BUTTON_UP_ID);this.downButton=$id(this.BUTTON_DOWN_ID);this.hiddenInput=$id(this.INPUT_HIDDEN_ID);var $=this;this.hourInput.onkeydown=function(){var _=eventManager.getKeyCode();return $.downkeyCode(_)};this.minuteInput.onkeydown=function(){var _=eventManager.getKeyCode();return $.downkeyCode(_)};this.secondInput.onkeydown=function(){var _=eventManager.getKeyCode();return $.downkeyCode(_)};this.setValue(this.defaultValue)};TimeSelect.prototype.setCheckValue=function(){if(isFormatTime(this.maxValue,this.format))this.maxValue=timeFormat(this.maxValue,this.format,this.__privateFormat);if(!isFormatTime(this.maxValue,this.__privateFormat))this.maxValue="23:59:59";var _=this.maxValue.split(":");this.maxHour=_[0];this.maxMinute=_[1];this.maxSecond=_[2];if(isFormatTime(this.minValue,this.format))this.minValue=timeFormat(this.minValue,this.format,this.__privateFormat);if(!isFormatTime(this.minValue,this.__privateFormat))this.minValue="00:00:00";var $=this.minValue.split(":");this.minHour=$[0];this.minMinute=$[1];this.minSecond=$[2]};TimeSelect.prototype.downkeyCode=function($){if($==38){this.up();return false}if($==40){this.down();return false}if($==9||$==8||$==37||$==39)return true;if($==229)return false;if($<106&&$>95)return true;if($==46)return true;if($>47&&$<58)return true;else return false};TimeSelect.prototype.clear=function(){if(this.allowNull)this.setValue(null)};TimeSelect.prototype.up=function(){if(this.readonly||this.disabled)return;if(!this.currInput){this.currInput=this.secondInput;if(allTrim(this.hourInput.value)==""&&allTrim(this.minuteInput.value)==""){this.hourInput.value="00";this.minuteInput.value="00"}}var $=this.currInput.value*1+1;this.currInput.value=dateToStringValue($);this.prevent(this.currInput);this.currInput.focus();this.currInput.select()};TimeSelect.prototype.down=function(){if(this.readonly||this.disabled)return;$debug(this.currInput);if(!this.currInput){this.currInput=this.secondInput;if(this.hourInput.value==""&&this.minuteInput.value==""){this.hourInput.value="00";this.minuteInput.value="00"}}var $=this.currInput.value*1-1;this.currInput.value=dateToStringValue($);this.prevent(this.currInput);this.currInput.focus();this.currInput.select()};TimeSelect.prototype.getHours=function(){this.refreshValue();return dateToStringValue(this.hourInput.value)};TimeSelect.prototype.getMinutes=function(){this.refreshValue();return dateToStringValue(this.minuteInput.value)};TimeSelect.prototype.getSeconds=function(){this.refreshValue();return dateToStringValue(this.secondInput.value)};TimeSelect.prototype.setHours=function($){this.hourInput.value=dateToStringValue($);this.refreshValue()};TimeSelect.prototype.setMinutes=function($){this.minuteInput.value=dateToStringValue($);this.refreshValue()};TimeSelect.prototype.setSeconds=function($){this.secondInput.value=dateToStringValue($);this.refreshValue()};TimeSelect.prototype.getValue=function(){this.refreshValue();if(this.dateTime)return timeFormat(this.dateTime,this.__privateFormat,this.format);else return null};TimeSelect.prototype.setValue=function($){if($===null||$===undefined||$=="")this.dateTime=null;else this.dateTime=timeFormat($,this.format,this.__privateFormat);this.refresh()};TimeSelect.prototype.setFocus=function(){this.hourInput.focus()};TimeSelect.prototype.isFocus=function(){return this.isOver};TimeSelect.prototype.showEditor=function(){this.container.style.display=""};TimeSelect.prototype.hideEditor=function(){this.container.style.display="none"};TimeSelect.prototype.getDisplayValue=function($){return $};TimeSelect.prototype.setPosition=function($,_,B,A){if(this.container){this.container.style.position="absolute";var C=getMaxZindex(document);if(this.container.style.zIndex!=C)this.container.style.zIndex=C;setElementXY(this.container,[$,_])}};TimeSelect.prototype.refresh=function(){if(this.dateTime){var $=this.dateTime.split(":");$[0]=$[0]||"00";$[1]=$[1]||"00";$[2]=$[2]||"00";this.hourInput.value=$[0];this.minuteInput.value=$[1];this.secondInput.value=$[2]}else{this.hourInput.value="";this.minuteInput.value="";this.secondInput.value=""}this.refreshValue()};TimeSelect.prototype.refreshValue=function(){var $=dateToStringValue(this.hourInput.value),A=dateToStringValue(this.minuteInput.value),_=dateToStringValue(this.secondInput.value);if($&&A&&_){this.dateTime=$+":"+A+":"+_;this.hiddenInput.value=this.dateTime}};TimeSelect.prototype.toHtml=function(){var A="tabIndex=\""+this.tabIndex+"\" accesskey=\""+this.accesskey+"\" ",$=A+"type=\"text\" autocomplete=\"off\" onpropertychange=\"$o('"+this.id+"').setForObjValue(this)\"  maxlength=\"2\" onclick=\"this.focus();this.select()\" onfocus=\"$o('";$+=this.id+"').Focus(this);\" onkeyup=\"$o('"+this.id+"').keyPress(this)\"";$+=" onpaste=\"return false\" ondragenter=\"return false\" onchange=\"$o('";$+=this.id+"').setForObjValue(this)\" onblur=\"$o('"+this.id+"').Blur(this)\"";var _="";_+="<div id=\""+this.id+"_time_container\" class=\"eos-time-container\" style=\"background-color:#ffffff;width: 91px;height:22px;float:left;overflow:hidden\">";_+="<div style=\"font-size:11pt;float:left;width: 72px;height:22px;overflow:hidden;float:left;padding-top:1px;padding-buttom:3px;padding-left:3px;\">";_+="<input numtype=\"h\" id=\""+this.INPUT_HOUR_ID+"\"  "+$+" style=\"ime-mode:disabled;width:18px;height:14px;vertical-align:middle;background-color:transparent;border:0px solid black;font-size: 9pt;text-align: center;\"><b>:</b>";_+="<input numtype=\"m\" id=\""+this.INPUT_MINUTE_ID+"\"  "+$+" style=\"ime-mode:disabled;width:18px;height:14px;vertical-align:middle;background-color:transparent;border:0px solid black;font-size: 9pt;text-align: center;\"><b>:</b>";_+="<input numtype=\"s\" id=\""+this.INPUT_SECOND_ID+"\"  "+$+" style=\"ime-mode:disabled;width:18px;height:14px;vertical-align:middle;background-color:transparent;border:0px solid black;font-size: 9pt;text-align: center;\">";_+="</div>";_+="<div style=\"width: 16px;height:22px;overflow:hidden;float:right;padding-top:0px;\">";_+="<div style=\"width: 16px;height:11px;overflow:hidden;\">";_+="<div onclick=\"$id('"+this.id+"').controlTime(true)\" id=\""+this.BUTTON_UP_ID+"\" class=\"eos-time-arrow-up\" onmouseover=\"this.className='eos-time-arrow-up-over'\" onmouseout=\"this.className='eos-time-arrow-up'\" style=\"width: 16px;height:10px;\">";_+="</div>";_+="</div>";_+="<div style=\"width: 16px;height:11px;overflow:hidden;\">";_+="<div onclick=\"$id('"+this.id+"').controlTime(false)\" id=\""+this.BUTTON_DOWN_ID+"\" class=\"eos-time-arrow-down\" onmouseover=\"this.className='eos-time-arrow-down-over'\" onmouseout=\"this.className='eos-time-arrow-down'\" style=\"width: 16px;height:10px;\">";_+="</div>";_+="</div>";_+="</div>";_+="</div>";_+="<div><input validateAttr='type=eos_time'  type='hidden' ";if(this.name)_+="name='"+this.name+"'";_+="id='"+this.INPUT_HIDDEN_ID+"' value='"+this.dateTime+"'></div>";return _};TimeSelect.prototype.keyPress=function($){if($.value.length==2)this.prevent($)};TimeSelect.prototype.Blur=function(_){this.lostFocus=true;var $=this;if(_.value.length==2)this.prevent(_);else if(_.value.length==1){_.value="0"+_.value;this.prevent(_)}window.tmpTimeout=setTimeout(function(){if($.lostFocus)$.validate()},300)};TimeSelect.prototype.Focus=function($){this.currInput=$;this.lostFocus=false};TimeSelect.prototype.validate=function(){if(allTrim(this.hourInput.value+this.minuteInput.value+this.secondInput.value)=="")if(this.allowNull){f_alert_verify_successful($id(this.id+"_time_container"));return true}else{f_alert($id(this.id+"_time_container"),CHECK_MUST_INPUT);return false}if(allTrim(this.hourInput.value)==""||allTrim(this.minuteInput.value)==""||allTrim(this.secondInput.value)==""){f_alert($id(this.id+"_time_container"),TIME_INPUTTIME+this.hourInput.value+":"+this.minuteInput.value+":"+this.secondInput.value+TIME_FORMATERROR);return false}if(parseInt(this.maxHour*3600+this.maxMinute*60+this.maxMinute)<parseInt(this.hourInput.value*3600+this.minuteInput.value*60+this.secondInput.value)){f_alert($id(this.id+"_time_container"),TIME_INPUTTIME+this.hourInput.value+":"+this.minuteInput.value+":"+this.secondInput.value+TIME_LESSTHAN+this.maxValue);return false}if((this.minHour*3600+this.minMinute*60+this.minMinute)>(this.hourInput.value*3600+this.minuteInput.value*60+this.secondInput.value)){f_alert($id(this.id+"_time_container"),TIME_INPUTTIME+this.hourInput.value+":"+this.minuteInput.value+":"+this.secondInput.value+TIME_MORETHAN+this.minValue);return false}f_alert_verify_successful($id(this.id+"_time_container"));return true};TimeSelect.prototype.prevent=function($){if($.value==""||$.value===null||$.value===undefined)return;numtype=$.getAttribute("numtype");if(numtype=="h"){if($.value*1>23)$.value="00";else if($.value*1<0)$.value="23";else if(isNaN($.value))$.value="00"}else if(numtype=="m"||numtype=="s")if($.value*1>59)$.value="00";else if($.value*1<0)$.value="59";else if(isNaN($.value))$.value="00"};TimeSelect.prototype.setForObjValue=function($){this.prevent($);this.refreshValue()};TimeSelect.prototype.controlTime=function($){if($)this.up();else this.down();this.refreshValue()};function f_check_eos_time($){if($.id){var _=$.id;if(_.indexOf("INPUT_HIDDEN")>=0){_=_.replace("INPUT_HIDDEN","");var A=$id(_);if(A)return A.validate()}}return true}function Calendar($,_){this.showMoreDay=true;this.id=$;this.Obj=$;this.date=null;this.mouseOffset=null;this.timer=null;this.timeSelect=null;this.format=isDateFormat(_)?_:"yyyy-MM-dd";if(isTimeFormat(this.format)){this.showTime=true;this.__privateFormat="yyyy-MM-dd HH:mm:ss";this.maxValue=dateFormat("2500-12-31 23:59:59","yyyy-MM-dd HH:mm:ss",this.format);this.minValue=dateFormat("1700-01-01 00:00:00","yyyy-MM-dd HH:mm:ss",this.format)}else{this.showTime=false;this.__privateFormat="yyyy-MM-dd";this.maxValue=dateFormat("2500-12-31","yyyy-MM-dd",this.format);this.minValue=dateFormat("1700-01-01","yyyy-MM-dd",this.format)}this.submitFormat=null;this.inputObject=null;this.eventObject=null;this.hiddenObject=null;this.canClose=true;this.container=null;this.focusStatus=false;this.defaultNull=false;this.allowInput=true;this.onSelectFunc=null;this.value=null;PageControl.add(this.id,this)}Calendar.currentCalendar=null;Calendar.editorContainer=null;Calendar.doc=document;Calendar.prototype.init=function(){this.container=$id(this.id+"_container");this.inputObject=$id(this.id+"_input");this.hiddenObject=$id(this.id+"_hidden");this.eventObject=$id(this.id+"_button");this.button=this.eventObject;this.text=this.inputObject;this.hidden=this.hiddenObject;this.setReadOnly(this.readOnly);this.setDisabled(this.isDisabled);if(this.width!=null)this.text.style.width=this.width;this.refreshDisplayValue();this.refreshHiddenValue();this.initEvent();if(this.maxValue)this.maxValue=dateFormat(this.maxValue,this.format,this.__privateFormat);if(this.minValue)this.minValue=dateFormat(this.minValue,this.format,this.__privateFormat)};Calendar.prototype.setReadOnly=function($){this.readOnly=$;this.inputObject.readOnly=$||!this.allowInput;if($)this.eventObject.style.cursor="default";else this.eventObject.style.cursor="pointer"};Calendar.prototype.getReadOnly=function(){return this.readOnly};Calendar.prototype.setDisabled=function($){this.isDisabled=$;if($){this.disabled();this.eventObject.style.cursor="default"}else{this.enable();this.eventObject.style.cursor="pointer"}};Calendar.prototype.getDisabled=function(){return this.isDisabled};Calendar.prototype.refreshDisplayValue=function(){if(this.value){this.inputObject.value=dateFormat(this.value,this.__privateFormat,this.format);f_alert_verify_successful(this.inputObject)}};Calendar.prototype.refreshHiddenValue=function(){if(this.value){var $=this.__privateFormat;if(this.submitFormat&&this.submitFormat!=this.__privateFormat)$=this.submitFormat;this.hiddenObject.value=dateFormat(this.value,this.__privateFormat,$)}else this.hiddenObject.value=""};Calendar.prototype.isFocus=function(){return this.focusStatus};Calendar.prototype.initEvent=function(){var $=this;this.inputObject.onkeyup=function(){if(checkInput(this)==false)return;if(!$.validate())f_alert($.eventObject,CALENDAR_ERROR_BETWEEN.replace("{0}",this.value).replace("{1}",$.format).replace("{2}",$.minValue).replace("{3}",$.maxValue));else{f_alert_verify_successful(this);$.date=dateFormat(this.value,$.format,$.__privateFormat);if(this.value=="")$.value="";else $.value=dateFormat(this.value,$.format,$.__privateFormat);$.refreshHiddenValue()}};this.inputObject.onblur=this.inputObject.onkeyup;this.eventObject.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button.gif";this.eventObject.onmouseover=function(){if($.getDisabled()||$.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button_over.gif"};this.eventObject.onmouseout=function(){if($.getDisabled()||$.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button.gif"};this.eventObject.onmousedown=function(){if($.getDisabled()||$.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button_down.gif"};this.eventObject.onmouseup=function(){if($.getDisabled()||$.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button_over.gif";if(CalendarEditor.inited===false){CalendarEditor.init();CalendarEditor.inited=true}if(CalendarEditor.getCalendar()==$){if(CalendarEditor.showStatus)$.hide();else $.show()}else $.show();eventManager.stopPropagation()}};Calendar.prototype.show=function(){PageControl.addtoStack(this);var _={maxValue:this.maxValue,minValue:this.minValue,value:this.value,format:this.__privateFormat,showTime:this.showTime};CalendarEditor.reFreshEditor(_);CalendarEditor.showEditor();var B=getPosition(this.container),D=B.left,$=B.top;if(window!=CalendarEditor.win)if(isIE){var C=getAbsPos(this.inputObject,CalendarEditor.win);D=C.left;$=C.top;if(CalendarEditor.win!=window){D=D-2;$=$-2}}else{C=getScreenPos(window,CalendarEditor.win);D=D+C.left-document.body.scrollLeft;$=$+C.top-document.body.scrollTop}$=$*1+this.inputObject.offsetHeight*1;CalendarEditor.setPosition(D,$);CalendarEditor.setCurrEditor(this);if(!this.inputObject){$error("err parameters of date in Calendar:"+this.id+".show");return}var A=this.inputObject.value,E=false;if(A)if(isDate(A,this.format))if(this.showTime){if(isFormatTime(A,this.format)){A=dateFormat(A,this.format,this.__privateFormat);E=true}}else{A=dateFormat(A,this.format,this.__privateFormat);E=true}if(!E)A=dateToString(new Date(),this.__privateFormat);this.focusStatus=true};Calendar.prototype.hide=function(){try{CalendarEditor.hideEditor();this.focusStatus=false}catch($){}};Calendar.prototype.getValue=function(){if(this.inDatacell)return this.hiddenObject.value;else return this.value};Calendar.prototype.setValue=function($){if(!$||$==""){this.value=null;this.inputObject.value="";this.hiddenObject.value="";return}if((typeof($))!="string"){this.value=dateToString($,this.__privateFormat);this.refreshDisplayValue();this.refreshHiddenValue()}else{if(isDate($,this.__privateFormat)){this.value=$;this.refreshDisplayValue();this.refreshHiddenValue()}else if(this.submitFormat&&isDate($,this.submitFormat)){this.value=dateFormat($,this.submitFormat,this.__privateFormat);this.refreshDisplayValue();this.refreshHiddenValue()}if(isDate($,"yyyy-MM-dd HH:mm:ss.S")||isDate($,"yyyy-MM-dd HH:mm:ss")||isDate($,"yyyyMMddHH")||isDate($,"yyyyMMddHHmm")||isDate($,"yyyyMMddHHmmss")||isDate($,"yyyyMMddHHmmssS")||isDate($,"yyyy-MM-dd")||isDate($,"yyyy-MM-dd HH")||isDate($,"yyyy-MM-dd HH:mm")){this.value=dateFormat($,"yyyy-MM-dd HH:mm:ss",this.__privateFormat);this.refreshDisplayValue();this.refreshHiddenValue()}else{this.inputObject.value="";this.hiddenObject.value=""}}};Calendar.prototype.setPosition=function($,_,B,A){this.hide();if(this.container){this.container.style.display="";this.container.style.position="absolute";var C=getMaxZindex(document);if(this.container.style.zIndex!=C)this.container.style.zIndex=C;this.container.style.left=$;this.container.style.top=_;this.eventObject.style.height=A;this.container.style.height=A;this.container.style.width=B;this.inputObject.style.height=A;this.inputObject.style.width=B-17}};Calendar.prototype.setFocus=function(){};Calendar.prototype.onValidate=function(_,$){return true};Calendar.prototype.validate=function(){var C=this.inputObject.value;if(C){var A=isDate(this.inputObject.value,this.format),_=true;if(this.showTime)_=isFormatTime(this.inputObject.value,this.format);if(A&&_){var $=stringToDate(this.maxValue,this.__privateFormat),B=stringToDate(this.minValue,this.__privateFormat),D=stringToDate(C,this.format);if(D-$>0){f_alert(this.inputObject,CALENDAR_ERROR_MIN.replace("{0}",C).replace("{1}",this.maxValue));return false}if(D-B<0){f_alert(this.inputObject,CALENDAR_ERROR_MAX.replace("{0}",C).replace("{1}",this.minValue));return false}}else{f_alert(this.inputObject,CALENDAR_ERROR_RORMAT.replace("{0}",C).replace("{1}",this.format));return false}}return this.onValidate(this.hidden.value,this.text.value)};Calendar.prototype.hideEditor=function(){f_alert_verify_successful(this.inputObject);this.hide();this.container.style.display="none";this.eventObject.style.display="none"};Calendar.prototype.showEditor=function(){this.container.style.display="";this.eventObject.style.display=""};Calendar.prototype.disabled=function(){this.inputObject.disabled=true;this.eventObject.disabled=true;this.hiddenObject.disabled=true;this.container.disabled=true};Calendar.prototype.getDisplayValue=function($){if($===null||$===undefined||$=="")return"";if(isDate($,this.__privateFormat))return dateFormat($,this.__privateFormat,this.format);else{if(isDate($,"yyyy-MM-dd"))return dateFormat($,"yyyy-MM-dd",this.format);if(isDate($,"yyyy-MM-dd HH:mm:ss"))return dateFormat($,"yyyy-MM-dd HH:mm:ss",this.format);if(isDate($,"yyyy-MM-dd HH:mm:ss.S"))return dateFormat($,"yyyy-MM-dd HH:mm:ss",this.format);return $}};Calendar.prototype.enable=function(){this.inputObject.disabled=false;this.eventObject.disabled=false;this.hiddenObject.disabled=false;this.container.disabled=false};function ShowCalendar(_){var $=$o(_);if($)$.show()}function CalendarEditor(){}CalendarEditor.container=null;CalendarEditor.value=null;CalendarEditor.maxValue="2500-12-31";CalendarEditor.minValue="1700-01-01";CalendarEditor.format="yyyy-MM-dd";CalendarEditor.showTime=false;CalendarEditor.MAX_YEAR=2500;CalendarEditor.MIN_YEAR=1700;CalendarEditor.lastYear=null;CalendarEditor.nextYear=null;CalendarEditor.year=null;CalendarEditor.month=null;CalendarEditor.lastMonth=null;CalendarEditor.nextMonth=null;CalendarEditor.today=null;CalendarEditor.body=null;CalendarEditor.showStatus=false;CalendarEditor.inited=false;CalendarEditor.currCell=null;CalendarEditor.init=function(){var C="";if(window.isWebkit)C="\"eos-button-gc\"";else C="\"eos-button\"";CalendarEditor.win=_get_top_window()||window;CalendarEditor.doc=CalendarEditor.win.document||document;var D=$id("_eos_webcomp_calendar_container",CalendarEditor.doc);if(D)CalendarEditor.container=D;else{var E="";if(isIE)E+="<iframe style=\"position:absolute;z-index:-1;width:expression(this.nextSibling.offsetWidth);height:expression(this.nextSibling.offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);\" frameborder=\"0\" ></iframe>";E+="<div id=\"_eos_calendar_editor_container\" onmousedown=\"eventManager.stopPropagation();\" oncontextmenu=\"return false\" class=\"eos-celendar-editor-container\" style=\" width: 228px;\">";E+="    <div class=\"eos-celendar-editor-container2\" style=\" width: 100%;\">";E+="    <table style=\"width: 100%\" cellspacing=\"0\" cellpadding=\"0\">";E+="        <tr>";E+="            <td class=\"eos-calendar-head\" style=\"height:26px\">";E+="            <div>";E+="            <table  cellspacing=\"0\" cellpadding=\"0\" style=\"width: 100%\">";E+="                <tr>";E+="                    <td>&nbsp;</td>";E+="                    <td style=\"width: 11px\">";E+="                        <img style=\"cursor:hand;cursor:pointer;\" id=\"_eos_calendar_last_year\" alt=\"\" src=\""+PICTURE_ARROW_LEFT+"\" width=\"11\" height=\"10\" /></td>";E+="                    <td align=\"center\" style=\"width: 41px\">";E+="                        <input maxLength=\"4\" id=\"_eos_calendar_year\" class=\"eos-calendar-editor-date\" onmouseover=\"eventManager.stopPropagation();\" onmousedown=\"eventManager.stopPropagation();this.select();\" onclick=\"eventManager.stopPropagation();this.select();\" onmouseup=\"eventManager.stopPropagation();this.select();\"   type=\"text\" style=\"width:35px;padding-left:3;height:20px\" />";E+="                    </td>";E+="                    <td style=\"width: 10px\">";E+="                        <img style=\"cursor:hand;cursor:pointer;\" id=\"_eos_calendar_next_year\" alt=\"\" src=\""+PICTURE_ARROW_RIGHT+"\" width=\"11\" height=\"10\" /></td>";E+="                    <td width=\"30px\">&nbsp;</td>";E+="                    <td style=\"width: 10px\">";E+="                        <img style=\"cursor:hand;cursor:pointer;\" id=\"_eos_calendar_last_month\" alt=\"\" src=\""+PICTURE_ARROW_LEFT+"\" width=\"11\" height=\"10\" /></td>";E+="                    <td align=\"center\"style=\"width:41px\">";E+="                        <input maxLength=\"2\" id=\"_eos_calendar_month\"class=\"eos-calendar-editor-date\" onmouseover=\"eventManager.stopPropagation();\" onmousedown=\"eventManager.stopPropagation();this.select();\" onclick=\"eventManager.stopPropagation();this.select();\" onmouseup=\"eventManager.stopPropagation();this.select();\" type=\"text\" style=\"width:35px;padding-left:9;height:20px\" /></td>";E+="                    <td style=\"width: 9px\">";E+="                        <img style=\"cursor:hand;cursor:pointer;\" id=\"_eos_calendar_next_month\" alt=\"\" src=\""+PICTURE_ARROW_RIGHT+"\" width=\"11\" height=\"10\" /></td>";E+="                    <td>&nbsp;</td>";E+="                </tr>";E+="            </table>";E+="            </div>";E+="            </td>";E+="        </tr>";E+="        <tr>";E+="            <td style=\"height: 144px\"><div style=\"height: 144px\">";E+="            <table  style=\"width:"+(isIE?"100%":"228px")+";height:24px\" cellspacing=\"0\" cellpadding=\"0\">";E+="                ";E+="                <tr>";E+="                    <td style=\"width: "+(isIE?"31":"33")+"px; height: 24px\" class=\"eos-calendar-editor-week-left\">"+CALENDAR_SUNDAY+"</td>";E+="                    <td style=\"width: "+(isIE?"31":"32")+"px; height: 24px\" class=\"eos-calendar-editor-week\">"+CALENDAR_MONDAY+"</td>";E+="                    <td style=\"width: "+(isIE?"31":"33")+"px; height: 24px\" class=\"eos-calendar-editor-week\">"+CALENDAR_TUESDAY+"</td>";E+="                    <td style=\"width: 31px; height: 24px\" class=\"eos-calendar-editor-week\">"+CALENDAR_WEDNESDAY+"</td>";E+="                    <td style=\"width: 31px; height: 24px\" class=\"eos-calendar-editor-week\">"+CALENDAR_THURSDAY+"</td>";E+="                    <td style=\"width: 31px; height: 24px\" class=\"eos-calendar-editor-week\">"+CALENDAR_FRIDAY+"</td>";E+="                    <td style=\"width: "+(isIE?"32":"33")+"px; height: 24px\" class=\"eos-calendar-editor-week-right\">"+CALENDAR_SATURDAY+"</td>";E+="                </tr>";E+="                </table>";E+="            <table id=\"_eos_calendar_editor_body\" style=\"width:224;height:120px;table-layout:fixed\" cellspacing=\"0\" cellpadding=\"0\" class=\"eos-calendar-editor-body\">";if(isIE){E+="                <tr>";E+="                    <td id=\"_eos_calendar_day0\" style=\"width: 32px; height: 18px\" >25</td>";E+="                    <td id=\"_eos_calendar_day1\" style=\"width: 32px; height: 18px\" >26</td>";E+="                    <td id=\"_eos_calendar_day2\" style=\"width: 32px; height: 18px\" >27</td>";E+="                    <td id=\"_eos_calendar_day3\" style=\"width: 32px; height: 18px\" >28</td>";E+="                    <td id=\"_eos_calendar_day4\" style=\"width: 32px; height: 18px\" >29</td>";E+="                    <td id=\"_eos_calendar_day5\" style=\"width: 32px; height: 18px\" >30</td>";E+="                    <td id=\"_eos_calendar_day6\" style=\"width: 32px; height: 18px\" >1</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day7\" style=\"width: 32px; height: 18px\" >2</td>";E+="                    <td id=\"_eos_calendar_day8\" style=\"width: 32px; height: 18px\" >3</td>";E+="                    <td id=\"_eos_calendar_day9\" style=\"width: 32px; height: 18px\" >4</td>";E+="                    <td id=\"_eos_calendar_day10\" style=\"width: 32px; height: 18px\" >5</td>";E+="                    <td id=\"_eos_calendar_day11\" style=\"width: 32px; height: 18px\" >6</td>";E+="                    <td id=\"_eos_calendar_day12\" style=\"width: 32px; height: 18px\" >7</td>";E+="                    <td id=\"_eos_calendar_day13\" style=\"width: 32px; height: 18px\" >8</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day14\" style=\"width: 32px; height: 18px\" >9</td>";E+="                    <td id=\"_eos_calendar_day15\" style=\"width: 32px; height: 18px\" >10</td>";E+="                    <td id=\"_eos_calendar_day16\" style=\"width: 32px; height: 18px\" >11</td>";E+="                    <td id=\"_eos_calendar_day17\" style=\"width: 32px; height: 18px\" >12</td>";E+="                    <td id=\"_eos_calendar_day18\" style=\"width: 32px; height: 18px\" >13</td>";E+="                    <td id=\"_eos_calendar_day19\" style=\"width: 32px; height: 18px\" >14</td>";E+="                    <td id=\"_eos_calendar_day20\" style=\"width: 32px; height: 18px\" >15</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day21\" style=\"width: 32px; height: 18px\" >16</td>";E+="                    <td id=\"_eos_calendar_day22\" style=\"width: 32px; height: 18px\" >17</td>";E+="                    <td id=\"_eos_calendar_day23\" style=\"width: 32px; height: 18px\" >18</td>";E+="                    <td id=\"_eos_calendar_day24\" style=\"width: 32px; height: 18px\" >19</td>";E+="                    <td id=\"_eos_calendar_day25\" style=\"width: 32px; height: 18px\" >20</td>";E+="                    <td id=\"_eos_calendar_day26\" style=\"width: 32px; height: 18px\" >21</td>";E+="                    <td id=\"_eos_calendar_day27\" style=\"width: 32px; height: 18px\" >22</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day28\" style=\"width: 32px; height: 18px\" >23</td>";E+="                    <td id=\"_eos_calendar_day29\" style=\"width: 32px; height: 18px\" >24</td>";E+="                    <td id=\"_eos_calendar_day30\" style=\"width: 32px; height: 18px\" >25</td>";E+="                    <td id=\"_eos_calendar_day31\" style=\"width: 32px; height: 18px\" >26</td>";E+="                    <td id=\"_eos_calendar_day32\" style=\"width: 32px; height: 18px\" >27</td>";E+="                    <td id=\"_eos_calendar_day33\" style=\"width: 32px; height: 18px\" >28</td>";E+="                    <td id=\"_eos_calendar_day34\" style=\"width: 32px; height: 18px\" >29</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day35\" style=\"width: 32px; height: 18px\" >30</td>";E+="                    <td id=\"_eos_calendar_day36\" style=\"width: 32px; height: 18px\" >1</td>";E+="                    <td id=\"_eos_calendar_day37\" style=\"width: 32px; height: 18px\" >2</td>";E+="                    <td id=\"_eos_calendar_day38\" style=\"width: 32px; height: 18px\" >3</td>";E+="                    <td id=\"_eos_calendar_day39\" style=\"width: 32px; height: 18px\" >4</td>";E+="                    <td id=\"_eos_calendar_day40\" style=\"width: 32px; height: 18px\" >5</td>";E+="                    <td id=\"_eos_calendar_day41\" style=\"width: 32px; height: 18px\" >6</td>";E+="                </tr>"}else{E+="                <tr>";E+="                    <td id=\"_eos_calendar_day0\" style=\"width: 32px; height: 18px\" >25</td>";E+="                    <td id=\"_eos_calendar_day1\" style=\"width: 32px; height: 18px\" >26</td>";E+="                    <td id=\"_eos_calendar_day2\" style=\"width: 32px; height: 18px\" >27</td>";E+="                    <td id=\"_eos_calendar_day3\" style=\"width: 31px; height: 18px\" >28</td>";E+="                    <td id=\"_eos_calendar_day4\" style=\"width: 31px; height: 18px\" >29</td>";E+="                    <td id=\"_eos_calendar_day5\" style=\"width: 31px; height: 18px\" >30</td>";E+="                    <td id=\"_eos_calendar_day6\" style=\"width: 31px; height: 18px\" >1</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day7\" style=\"width: 32px; height: 18px\" >2</td>";E+="                    <td id=\"_eos_calendar_day8\" style=\"width: 32px; height: 18px\" >3</td>";E+="                    <td id=\"_eos_calendar_day9\" style=\"width: 32px; height: 18px\" >4</td>";E+="                    <td id=\"_eos_calendar_day10\" style=\"width: 31px; height: 18px\" >5</td>";E+="                    <td id=\"_eos_calendar_day11\" style=\"width: 31px; height: 18px\" >6</td>";E+="                    <td id=\"_eos_calendar_day12\" style=\"width: 31px; height: 18px\" >7</td>";E+="                    <td id=\"_eos_calendar_day13\" style=\"width: 31px; height: 18px\" >8</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day14\" style=\"width: 32px; height: 18px\" >9</td>";E+="                    <td id=\"_eos_calendar_day15\" style=\"width: 32px; height: 18px\" >10</td>";E+="                    <td id=\"_eos_calendar_day16\" style=\"width: 32px; height: 18px\" >11</td>";E+="                    <td id=\"_eos_calendar_day17\" style=\"width: 31px; height: 18px\" >12</td>";E+="                    <td id=\"_eos_calendar_day18\" style=\"width: 31px; height: 18px\" >13</td>";E+="                    <td id=\"_eos_calendar_day19\" style=\"width: 31px; height: 18px\" >14</td>";E+="                    <td id=\"_eos_calendar_day20\" style=\"width: 31px; height: 18px\" >15</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day21\" style=\"width: 32px; height: 18px\" >16</td>";E+="                    <td id=\"_eos_calendar_day22\" style=\"width: 32px; height: 18px\" >17</td>";E+="                    <td id=\"_eos_calendar_day23\" style=\"width: 32px; height: 18px\" >18</td>";E+="                    <td id=\"_eos_calendar_day24\" style=\"width: 31px; height: 18px\" >19</td>";E+="                    <td id=\"_eos_calendar_day25\" style=\"width: 31px; height: 18px\" >20</td>";E+="                    <td id=\"_eos_calendar_day26\" style=\"width: 31px; height: 18px\" >21</td>";E+="                    <td id=\"_eos_calendar_day27\" style=\"width: 31px; height: 18px\" >22</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day28\" style=\"width: 32px; height: 18px\" >23</td>";E+="                    <td id=\"_eos_calendar_day29\" style=\"width: 32px; height: 18px\" >24</td>";E+="                    <td id=\"_eos_calendar_day30\" style=\"width: 32px; height: 18px\" >25</td>";E+="                    <td id=\"_eos_calendar_day31\" style=\"width: 31px; height: 18px\" >26</td>";E+="                    <td id=\"_eos_calendar_day32\" style=\"width: 31px; height: 18px\" >27</td>";E+="                    <td id=\"_eos_calendar_day33\" style=\"width: 31px; height: 18px\" >28</td>";E+="                    <td id=\"_eos_calendar_day34\" style=\"width: 31px; height: 18px\" >29</td>";E+="                </tr>";E+="                <tr>";E+="                    <td id=\"_eos_calendar_day35\" style=\"width: 32px; height: 18px\" >30</td>";E+="                    <td id=\"_eos_calendar_day36\" style=\"width: 32px; height: 18px\" >1</td>";E+="                    <td id=\"_eos_calendar_day37\" style=\"width: 32px; height: 18px\" >2</td>";E+="                    <td id=\"_eos_calendar_day38\" style=\"width: 31px; height: 18px\" >3</td>";E+="                    <td id=\"_eos_calendar_day39\" style=\"width: 31px; height: 18px\" >4</td>";E+="                    <td id=\"_eos_calendar_day40\" style=\"width: 31px; height: 18px\" >5</td>";E+="                    <td id=\"_eos_calendar_day41\" style=\"width: 31px; height: 18px\" >6</td>";E+="                </tr>"}E+="            </table>";E+="            </div></td>";E+="        </tr>";E+="        <tr id=\"_eos_calendar_time_container\">";E+="            <td style=\"height: 26px\" align=\"left\" class=\"eos-calendar-time\">";E+="              <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\"><tr><td width=\"150px\"><div style=\"float:left\" align=\"left\" id=\"_eos_calendar_time_editor_container\"></div></td>";E+="              <td align=\"right\">";E+="              </td></tr></table>";E+="            </td>";E+="        </tr>";E+="        <tr>";E+="            <td class=\"eos-calendar-bottom\" style=\"height: 30px\" align=\"right\">";E+="<div  id=\"_eos_calendar_ok\" class="+C+" onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">"+CALENDAR_BUTTON_OK+"</div></div>&nbsp;";E+="<div  id=\"_eos_calendar_today\" class="+C+" onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">"+CALENDAR_TODAY+"</div></div>&nbsp;";E+="<div  id=\"_eos_calendar_clear\" class="+C+" onmouseover=\"buttonMouseOver(this)\" onmouseout=\"buttonMouseOut(this)\" onmousedown=\"buttonMouseDown(this)\" onmouseup=\"buttonMouseUp(this)\"><div align=\"center\" class=\"eos-button-inner\">"+CLEAR+"</div></div>";E+="            </td>";E+="        </tr>        ";E+="    </table>";E+="    </div>";E+="</div>";var _=$create("div",CalendarEditor.doc);_.onmousedown=function(){eventManager.stopPropagation()};_.style.height="222px";_.style.width="228px";_.style.position="absolute";_.id="_eos_webcomp_calendar_container";_.innerHTML=E;_.style.display="none";CalendarEditor.container=_;function $(){CalendarEditor.doc.body.appendChild(_);CalendarEditor.container.onkeydown=function(){var $=eventManager.getKeyCode();if($==13)if(CalendarEditor.showTime)CalendarEditor.onOk();if($==27)CalendarEditor.hideEditor()}}try{$()}catch(A){CalendarEditor.win.eventManager.add(window,"load",$)}if(document!=CalendarEditor.doc)moveCss(document,CalendarEditor.doc);if(CalendarEditor.win["createTimeSelect"]){var B=CalendarEditor.win["createTimeSelect"]("_eos_calendar_time_editor");CalendarEditor.setTimeSelect(B);B.init()}}CalendarEditor.okBtn=$id("_eos_calendar_ok",CalendarEditor.doc);CalendarEditor.okBtn.onclick=CalendarEditor.onOk;CalendarEditor.lastYear=$id("_eos_calendar_last_year",CalendarEditor.doc);CalendarEditor.nextYear=$id("_eos_calendar_next_year",CalendarEditor.doc);CalendarEditor.year=$id("_eos_calendar_year",CalendarEditor.doc);CalendarEditor.month=$id("_eos_calendar_month",CalendarEditor.doc);CalendarEditor.lastMonth=$id("_eos_calendar_last_month",CalendarEditor.doc);CalendarEditor.nextMonth=$id("_eos_calendar_next_month",CalendarEditor.doc);CalendarEditor.today=$id("_eos_calendar_today",CalendarEditor.doc);CalendarEditor.clear=$id("_eos_calendar_clear",CalendarEditor.doc);CalendarEditor.body=$id("_eos_calendar_editor_body",CalendarEditor.doc);CalendarEditor.timeContainer=$id("_eos_calendar_time_container",CalendarEditor.doc);CalendarEditor.timeSelect=CalendarEditor.getTimeSelect();CalendarEditor.lastYear.onmouseover=function(){this.src=PICTURE_ARROW_LEFT_OVER};CalendarEditor.lastYear.onmouseout=function(){this.src=PICTURE_ARROW_LEFT};CalendarEditor.nextYear.onmouseover=function(){this.src=PICTURE_ARROW_RIGHT_OVER};CalendarEditor.nextYear.onmouseout=function(){this.src=PICTURE_ARROW_RIGHT};CalendarEditor.lastMonth.onmouseover=function(){this.src=PICTURE_ARROW_LEFT_OVER};CalendarEditor.lastMonth.onmouseout=function(){this.src=PICTURE_ARROW_LEFT};CalendarEditor.nextMonth.onmouseover=function(){this.src=PICTURE_ARROW_RIGHT_OVER};CalendarEditor.nextMonth.onmouseout=function(){this.src=PICTURE_ARROW_RIGHT};if(isFF){buttonForFF(CalendarEditor.okBtn);buttonForFF(CalendarEditor.today);buttonForFF(CalendarEditor.clear)}};function calendarUnload(){try{CalendarEditor.hideEditor()}catch(_){var $=$id("_eos_webcomp_calendar_container",CalendarEditor.doc);$.style.display="none"}}eventManager.add(window,"unload",calendarUnload);CalendarEditor.initEvent=function(){};CalendarEditor.setTimeSelect=function($){CalendarEditor.win["_eos_calendar_time_select"]=$};CalendarEditor.getTimeSelect=function(){return CalendarEditor.win["_eos_calendar_time_select"]};CalendarEditor.showEditor=function(){if(CalendarEditor.showTime){CalendarEditor.timeContainer.style.display="";CalendarEditor.okBtn.style.display="";if(isFF){CalendarEditor.container.style.height="226px";CalendarEditor.container.firstChild.style.height="226px"}}else{CalendarEditor.timeContainer.style.display="none";CalendarEditor.okBtn.style.display="none";if(isFF){CalendarEditor.container.style.height="200px";CalendarEditor.container.firstChild.style.height="200px"}}CalendarEditor.initCalendarEvent();CalendarEditor.freshDate(CalendarEditor.value);CalendarEditor.freshTimeComp();CalendarEditor.showStatus=true;CalendarEditor.container.style.display="";var $=$id("_eos_calendar_editor_container",CalendarEditor.doc);initShadow($,CalendarEditor.doc)};CalendarEditor.initCalendarEvent=function(){CalendarEditor.lastYear.onclick=function(){CalendarEditor.changeYear(CalendarEditor.year.value-1)};CalendarEditor.nextYear.onclick=function(){CalendarEditor.changeYear(CalendarEditor.year.value*1+1)};CalendarEditor.year.onkeyup=function(){CalendarEditor.changeYear(CalendarEditor.year.value)};CalendarEditor.year.onblur=function(){CalendarEditor.changeYear(CalendarEditor.year.value)};CalendarEditor.month.onkeyup=function(){CalendarEditor.changeMonth(CalendarEditor.month.value)};CalendarEditor.month.onblur=function(){CalendarEditor.changeMonth(CalendarEditor.month.value)};CalendarEditor.lastMonth.onclick=function(){CalendarEditor.changeMonth(dateToStringValue(CalendarEditor.month.value-1))};CalendarEditor.nextMonth.onclick=function(){CalendarEditor.changeMonth(dateToStringValue(CalendarEditor.month.value*1+1))};CalendarEditor.today.onclick=function(){CalendarEditor.returnValue(new Date())};CalendarEditor.clear.onclick=function(){var $=CalendarEditor.getCalendar();if($){$.inputObject.value="";$.hiddenObject.value="";$.value=null}CalendarEditor.hideEditor()}};CalendarEditor.hideEditor=function(){if(CalendarEditor.container){CalendarEditor.container.style.display="none";CalendarEditor.showStatus=false}};CalendarEditor.setPosition=function(D,C,B,$){CalendarEditor.container.style.position="absolute";var A=getMaxZindex(CalendarEditor.doc);if(CalendarEditor.container.style.zIndex!=A)CalendarEditor.container.style.zIndex=A;var _;if(isIE)_=CalendarEditor.doc.body.offsetHeight+CalendarEditor.doc.body.scrollTop;else _=CalendarEditor.win.screen.availHeight+CalendarEditor.doc.body.scrollTop;if((C+228)>_)if(CalendarEditor.showTime){if(C-258>=0)C=C-258}else if(C-228>=0)C=C-228;CalendarEditor.container.style.left=D;CalendarEditor.container.style.top=C};CalendarEditor.reFreshEditor=function($){CalendarEditor.maxValue=$.maxValue;CalendarEditor.minValue=$.minValue;CalendarEditor.format=$.format;CalendarEditor.value=$.value;CalendarEditor.showTime=$.showTime};CalendarEditor.setCurrEditor=function($){CalendarEditor.win["_eos_curr_calendar"]=$};CalendarEditor.getCalendar=function($){return CalendarEditor.win["_eos_curr_calendar"]};CalendarEditor.getMaxYear=function(){if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var $=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);return $.getFullYear()}return CalendarEditor.MAX_YEAR};CalendarEditor.getMaxMonth=function(){if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var $=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);return $.getMonth()}return 11};CalendarEditor.getMaxDay=function(){if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var $=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);return $.getDate()}return 31};CalendarEditor.getMinYear=function(){if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var $=stringToDate(CalendarEditor.minValue,CalendarEditor.format);return $.getFullYear()}return CalendarEditor.MIN_YEAR};CalendarEditor.getMinMonth=function(){if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var $=stringToDate(CalendarEditor.minValue,CalendarEditor.format);return $.getMonth()}return 0};CalendarEditor.getMinDay=function(){if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var $=stringToDate(CalendarEditor.minValue,CalendarEditor.format);return $.getDate()}return 1};CalendarEditor.isHoliday=function(B,_,$){var A=new Date(B,_,$);A.setFullYear(B);return(A.getDay()==6||A.getDay()==0)};CalendarEditor.freshTimeComp=function(){if(!CalendarEditor.showTime)return;var $=CalendarEditor.value.getHours(),A=CalendarEditor.value.getMinutes(),_=CalendarEditor.value.getSeconds();CalendarEditor.timeSelect.setHours($);CalendarEditor.timeSelect.setMinutes(A);CalendarEditor.timeSelect.setSeconds(_)};CalendarEditor.refreshTime=function($){if(CalendarEditor.showTime){$.setHours(CalendarEditor.timeSelect.getHours());$.setMinutes(CalendarEditor.timeSelect.getMinutes());$.setSeconds(CalendarEditor.timeSelect.getSeconds())}return $};CalendarEditor.freshHeader=function(){CalendarEditor.month.value=dateToStringValue(CalendarEditor.value.getMonth()+1);CalendarEditor.year.value=CalendarEditor.value.getFullYear()};CalendarEditor.changeMonth=function(_){if(isNaN(_))return;if(_=="")return;if(_.length!=2)return;_=_-1;var B=CalendarEditor.getMaxMonth(),C=CalendarEditor.getMinMonth(),$=CalendarEditor.value.getFullYear(),E=CalendarEditor.getMaxYear(),D=CalendarEditor.getMinYear();if(_>B&&$==E)_=B;if(_<C&&$==D)_=C;var A=CalendarEditor.value.getDate(),F=new Date($,_,A);F.setFullYear($);F=CalendarEditor.refreshTime(F);CalendarEditor.freshDate(dateToString(F,CalendarEditor.format))};CalendarEditor.changeYear=function(_){if(isNaN(_))return;if(_.length<=3)return;var A=CalendarEditor.getMaxYear(),C=CalendarEditor.getMinYear();if(_>A)_=A;if(_<C)_=C;var B=CalendarEditor.value.getMonth(),D=CalendarEditor.value.getDate();if(B==1&&D==29)if(_%4!=0)D=28;var $=new Date(_,B,D);$.setFullYear(_);$=CalendarEditor.refreshTime($);CalendarEditor.freshDate(dateToString($,CalendarEditor.format))};CalendarEditor.onClick=function($){if($.innerHTML!=""){var _=$.value;if(CalendarEditor.showTime){if(CalendarEditor.currCell)removeClass(CalendarEditor.currCell,"eos-calendar-editor-currday");addClass($,"eos-calendar-editor-currday");CalendarEditor.currCell=$;CalendarEditor.value=_}else CalendarEditor.returnValue(_)}};CalendarEditor.onOk=function(){if(CalendarEditor.value!=null)CalendarEditor.returnValue(CalendarEditor.value)};CalendarEditor.outClick=function($){try{CalendarEditor.hideEditor()}catch(_){}};CalendarEditor.returnValue=function(_date){_date=CalendarEditor.refreshTime(_date);if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var maxDate=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);if(_date-maxDate>0)return}if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var minDate=stringToDate(CalendarEditor.minValue,CalendarEditor.format);if(_date-minDate<0)return}var calendar=CalendarEditor.getCalendar();if(calendar){calendar.setValue(_date);if(calendar.onSelectFunc){try{eval(calendar.onSelectFunc+"(_date);")}catch(e){alert(e)}}calendar.validate()}CalendarEditor.hideEditor()};CalendarEditor.hideTime=function(){};CalendarEditor.isShow=function(){return CalendarEditor.showStatus};CalendarEditor.freshDate=function(H){var J=new Array(31,30,31,30,31,30,31,31,30,31,30,31),R=new Date();if(isDate(H,CalendarEditor.format))R=stringToDate(H,CalendarEditor.format);var A=null,S=null;if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){A=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);if(R-A>0)R=A}if(isDate(CalendarEditor.minValue,CalendarEditor.format)){S=stringToDate(CalendarEditor.minValue,CalendarEditor.format);if(R-S<0)R=S}CalendarEditor.value=R;CalendarEditor.freshHeader();var I=R.getFullYear(),K=R.getMonth(),G=1,M=new Date(I,K,1).getDay(),_=K==0?I-1:I,$=K==0?11:K-1,P=J[$];if($==1)P=((_%4==0)&&(_%100!=0)||(_%400==0))?29:28;P-=M-1;var C=1;J[1]=((I%4==0)&&(I%100!=0)||(I%400==0))?29:28;for(i=0;i<42;i++){var F=$id("_eos_calendar_day"+i,CalendarEditor.doc);F.onmouseover=function(){addClass(this,"eos-calendar-editor-overday")};F.onmouseout=function(){removeClass(this,"eos-calendar-editor-overday")};F.onclick=function(){CalendarEditor.onClick(this)};F.className="eos-calendar-editor-day";if(i<M){var Q=new Date(I,K-1,P);F.innerHTML=P;F.title=dateToString(Q,CALENDAR_DEFAULT_FORMAT);F.value=Q;F.className="eos-calendar-editor-moreday";P++}else if(G>J[K]){var L=new Date(I,K+1,C);F.innerHTML=C;F.title=dateToString(L,CALENDAR_DEFAULT_FORMAT);F.value=L;F.className="eos-calendar-editor-moreday";C++}else if(i>=new Date(I,K,1).getDay()&&G<=J[K]){var B=new Date(I,K,G);B.setFullYear(I);F.title=dateToString(B,CALENDAR_DEFAULT_FORMAT);F.value=B;F.innerHTML=G;var E=new Date(),O=F.value;if(CalendarEditor.isHoliday(I,K,G))F.className="eos-calendar-editor-holiday";G++}else{F.innerHTML="";F.title=""}if(F.value){E=new Date();if(F.value.getYear()==E.getYear()&&F.value.getMonth()==E.getMonth()&&F.value.getDate()==E.getDate()){addClass(F,"eos-calendar-editor-today");F.onmouseover=null;F.onmouseout=null}var T=CalendarEditor.value;if(F.value.getYear()==T.getYear()&&F.value.getMonth()==T.getMonth()&&F.value.getDate()==T.getDate()){addClass(F,"eos-calendar-editor-currday");CalendarEditor.currCell=F;F.onmouseover=null;F.onmouseout=null}else removeClass(F,"eos-calendar-editor-currday");var N=false;if(A!=null)if(F.value-A>0)N=true;if(S!=null){var D=CalendarEditor.refreshTime(F.value);if(D-S<0)N=true}if(N){F.onclick=null;F.onmouseover=null;F.onmouseout=null;F.title=""}}}};function createTimeSelect(_){var $=new TimeSelect(_);return $}function f_check_calendar(A){if(A.id){var _=A.id;if(_.indexOf("_input")>0){_=_.replace("_input","");var $=$id(_);if($)return $.validate()}}return true}function LookUp($){this.id=$;PageControl.add($,this);this.value=null;this.lookupBtn=null;this.lookupText=null;this.lookupUrl=null;this.lookupParam=null;this.lookupHidden=null;this.width=300;this.height=200;this.left=null;this.top=null;this.center=true;this.buttonImg=null;this.params=[];this.displayValue=null;this.container=null;this.onReturnFunc=null;this.useIeModel=false;this.dialogTitle=null;this.disabled=false;this.allowInput=true;this.readOnly=false}LookUp.prototype.init=function(){this.container=$id(this.id+"_container");this.lookupHidden=$id(this.id+"_hidden");this.lookupText=$id(this.id+"_input");this.lookupBtn=$id(this.id+"_button");this.button=this.lookupBtn;this.text=this.lookupText;this.hidden=this.lookupHidden;if(this.lookupWidth!=null)this.text.style.width=this.lookupWidth;var _=this;this.lookupBtn.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button.gif";this.lookupBtn.onmouseover=function(){if(_.getDisabled()||_.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button_over.gif"};this.lookupBtn.onmouseout=function(){if(_.getDisabled()||_.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button.gif"};this.lookupBtn.onmousedown=function(){if(_.getDisabled()||_.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button_down.gif"};this.lookupBtn.onmouseup=function(){if(_.getDisabled()||_.getReadOnly())return;_.lookupBtn.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button.gif";_.show()};function $(){if(_.lookupText.value!=_.displayValue){_.displayValue=_.lookupText.value;_.value=_.lookupText.value;_.lookupHidden.value=_.value}}this.setReadOnly(this.readOnly);this.setDisabled(this.disabled);eventManager.add(this.lookupText,"keyup",$)};LookUp.prototype.setReadOnly=function($){this.readOnly=$;this.lookupText.readOnly=$||!this.allowInput;if($)this.lookupBtn.style.cursor="default";else this.lookupBtn.style.cursor="pointer"};LookUp.prototype.getReadOnly=function(){return this.readOnly};LookUp.prototype.getValue=function(){this.refreshValue();return this.value};LookUp.prototype.setValue=function($){this.value=$;this.displayValue=$;this.refreshInput()};LookUp.prototype.setDisplayValue=function($){this.displayValue=$;this.refreshInput()};LookUp.prototype.setFocus=function(){};LookUp.prototype.lostFocus=function(){};LookUp.prototype.show=function(){var lookup=this;if(this.disabled)return;if(lookup.beforeOpenDialog)if(lookup.beforeOpenDialog(lookup)===false)return;this.refreshValue();var urlStr=this.getParamURL(),argument=[this.value,this.displayValue];function callBack(returnValue){try{if(lookup.onReturnFunc){var func=lookup.onReturnFunc;if((typeof lookup.onReturnFunc)=="string")func=eval(lookup.onReturnFunc);if(func(returnValue)){lookup.value=returnValue[0];lookup.displayValue=returnValue[1]}}else{lookup.value=returnValue[0];lookup.displayValue=returnValue[1]}}catch(e){$handle(e);$error("returnValue of dialog is not a array")}lookup.refreshInput()}if(this.useIeModel){var retValue=window.showModalDialog(urlStr,argument,"width:"+this.width+";"+"height:"+this.height+";"+"left:"+this.left+";"+"top:"+this.top+";");callBack(retValue)}else showModal(urlStr,argument,callBack,this.width,this.height,this.left||"",this.top||"",this.dialogTitle)};LookUp.prototype.refreshInput=function(){var $=this.displayValue!==null&&this.displayValue!==undefined?this.displayValue:this.value;this.lookupHidden.value=this.value;this.lookupText.value=$};LookUp.prototype.refreshValue=function(){this.value=this.lookupHidden.value;this.displayValue=this.lookupText.value};LookUp.prototype.getParamURL=function(){var B="";for(var _=0;_<this.params.length;_++){var A=this.params[_];B+="&"+A.key+"="+A.value}var $=addContextPath(this.lookupUrl);if($.indexOf("?")>-1)$+=B;else $+="?"+B.replace("&","");return $};LookUp.prototype.addParam=function($,_){this.params.push({key:$,value:encodeURIComponent(_)})};LookUp.prototype.clearParam=function(){this.params=[]};LookUp.prototype.setDisabled=function($){this.disabled=$;if($){this.lookupText.disabled=true;this.lookupHidden.disabled=true;this.lookupBtn.style.cursor="default"}else{this.lookupText.disabled=false;this.lookupHidden.disabled=false;this.lookupBtn.style.cursor="pointer"}};LookUp.prototype.getDisabled=function(){return this.disabled};LookUp.prototype.setPosition=function($,_,B,A){if(this.container){this.container.style.display="";this.container.style.position="absolute";this.container.style.left=$;this.container.style.top=_;var C=getMaxZindex(document);if(this.container.style.zIndex!=C)this.container.style.zIndex=C;this.lookupText.style.width=B-17;this.lookupText.style.height=A;this.container.style.width=B;this.container.style.height=A;this.lookupBtn.style.height=A}};LookUp.prototype.hideEditor=function(){this.container.style.display="none";this.lookupBtn.style.display="none"};LookUp.prototype.showEditor=function(){this.container.style.display="";this.lookupBtn.style.display=""};LookUp.prototype.validate=function(){return true};LookUp.prototype.isFocus=function(){return false};LookUp.prototype.getDisplayValue=function($){if($==this.value)return this.displayValue;return $};function MultiBox($){this.id=$;this.value=null;this.container=$id(this.id+"_container");this.checkboxes=[];var A=this.container.getElementsByTagName("input");for(var _=0;_<A.length;_++){var B=A[_];if(B.type=="checkbox")this.checkboxes.push(B)}this.hiddenInput=null;this.splitChar=",";this.jsonObj=null;PageControl.add($,this)}MultiBox.prototype.init=function(){this.hiddenInput=$id(this.id+"_hidden");this.initEvent()};MultiBox.prototype.initEvent=function(){var A=this;function $(){A.refreshValue()}function C(){var B=eventManager.getEvent(),C=B.keyCode;if(!(C==37||C==39))return;var _=A.checkboxes;for(var $=0;$<_.length;$++){var D=_[$];if((isIE?document.activeElement:B.explicitOriginalTarget)==D&&D.type=="checkbox"){if(C==37)if($==0)_[_.length-1].focus();else _[$-1].focus();if(C==39)if($==_.length-1)_[0].focus();else _[$+1].focus();break}}}for(var _=0;_<this.checkboxes.length;_++){var B=this.checkboxes[_];eventManager.add(B,"click",$)}eventManager.add(this.container,"keyup",C)};MultiBox.prototype.refreshInput=function(){if(this.hiddenInput)this.hiddenInput.value=this.value;str=this.splitChar+this.value+this.splitChar;for(var $=0;$<this.checkboxes.length;$++){var A=this.checkboxes[$],_=this.splitChar+A.value+this.splitChar;if(str.indexOf(_)>-1)A.checked=true;else A.checked=false}};MultiBox.prototype.refreshValue=function(){var _="";for(var $=0;$<this.checkboxes.length;$++){var A=this.checkboxes[$];if(A.checked&&A.type=="checkbox")_+=A.value+this.splitChar}if(_.length>1)_=_.substr(0,_.length-1);this.value=_;if(this.hiddenInput)this.hiddenInput.value=_};MultiBox.prototype.setValue=function($){this.value=$;this.refreshInput()};MultiBox.prototype.getValue=function(){this.refreshValue();return this.value};MultiBox.prototype.setFocus=function(){this.checkboxes[0].focus()};MultiBox.prototype.lostFocus=function(){};MultiBox.prototype.showEditor=function(){var $=getMaxZindex();this.container.style.zIndex=$;this.container.style.display="";addClass(this.container.firstChild,"dict_comp");if(this.isDcEdit==true){var _=this.container.firstChild;_.style.width=_.firstChild.offsetWidth;initShadow(_)}this.setFocus()};MultiBox.prototype.hideEditor=function(){this.container.style.display="none"};MultiBox.prototype.setPosition=function($,B,_,A){this.container.style.position="absolute";this.container.zIndex=9999;this.container.style.left=$+"px";this.container.style.top=B+"px"};MultiBox.prototype.isFocus=function(){return true};MultiBox.prototype.validate=function(){return true};EOS_DICT_DISPLAY_SEPERATOR=null;MultiBox.prototype.getDisplayValue=function($){if($==null)$=this.getValue();var C;if(EOS_DICT_DISPLAY_SEPERATOR)C=EOS_DICT_DISPLAY_SEPERATOR;else C=this.splitChar;var D=$.split(C),A="",_=[];for(var B=0;B<D.length;B++)_.push(this.jsonObj[D[B]]||D[B]);A=_.join(C);return A};function MultiSelect($){this.id=$;this.container=$id(this.id+"_container");this.container.onmousedown=function(){eventManager.stopPropagation()};this.value=null;this.select=$id(this.id+"_select");this.hiddenInput=null;this.splitChar=",";this.jsonObj=null;PageControl.add($,this)}MultiSelect.prototype.init=function(){this.hiddenInput=$id(this.id+"_hidden");this.initEvent()};MultiSelect.prototype.initEvent=function(){var $=this;function _(){$.refreshValue()}eventManager.add(this.select,"change",_)};MultiSelect.prototype.refreshInput=function(){str=this.value+this.splitChar;if(this.hiddenInput)this.hiddenInput.value=this.value;for(var $=0;$<this.select.options.length;$++){var A=this.select.options[$],_=A.value+this.splitChar;if(str.indexOf(_)>-1)A.selected=true;else A.selected=false}};MultiSelect.prototype.refreshValue=function(){var _="";for(var $=0;$<this.select.options.length;$++){var A=this.select.options[$];if(A.selected)_+=A.value+this.splitChar}if(_.length>1)_=_.substr(0,_.length-1);this.value=_;if(this.hiddenInput)this.hiddenInput.value=_};MultiSelect.prototype.setValue=function($){this.hiddenInput.value=$;this.refreshInput()};MultiSelect.prototype.getValue=function(){this.refreshValue();return this.value};MultiSelect.prototype.setFocus=function(){};MultiSelect.prototype.lostFocus=function(){};MultiSelect.prototype.showEditor=function(){var $=getMaxZindex();this.container.style.zIndex=$;this.container.style.display=""};MultiSelect.prototype.hideEditor=function(){this.container.style.display="none"};MultiSelect.prototype.setPosition=function($,B,_,A){this.container.style.position="absolute";this.container.zIndex=9999;this.container.style.left=$+"px";this.container.style.top=B+"px";this.container.style.width=_+"px"};MultiSelect.prototype.isFocus=function(){return true};MultiSelect.prototype.validate=function(){return true};EOS_DICT_DISPLAY_SEPERATOR=null;MultiSelect.prototype.getDisplayValue=function(A){if(A==null)A=this.getValue();var _;if(EOS_DICT_DISPLAY_SEPERATOR)_=EOS_DICT_DISPLAY_SEPERATOR;else _=this.splitChar;var $=A.split(_),C="";for(var B=0;B<$.length;B++)C=C+(this.jsonObj[$[B]]||$[B])+_;if(C.length>1)C=C.substr(0,C.length-1);return C};function PopMenu($){this.id=$;PageControl.add($,this);this.container=null;this.subMenuContainer=null;this.submenu=[];this.canClose=true;this.currMenu=null;this.level=0;this.openLevel=[];this.menuContainer=null;this.doc=document;this.win=window;this.onClickFunc=null;this.args=null;this.isShow=false}PopMenu.prototype.init=function(){this.win=_get_top_window()||window;this.doc=this.win.document;var E=getDocumentId(document);this.container=$id(this.id+E+"_container",this.doc);if(!this.container){this.container=$create("<div id='"+this.id+E+"_container' style='width:164px;overflow:hidden;position:absolute;display:none'></div>",this.doc);bodyAddNode(this.container,this.doc)}this.container.style.width="164px";this.container.style.overflow="hidden";var D=getMaxZindex(this.win.document);this.container.style.zIndex=D+1;var B=$create("div",this.doc);this.menuContainer=$create("div",this.doc);if(isIE)this.menuContainer.innerHTML="<iframe style=\"position:absolute;z-index:"+this.zIndex+";width:expression(this.nextSibling.childNodes[0].offsetWidth);height:expression(this.nextSibling.childNodes[0].offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);\" frameborder=\"0\" ></iframe>";this.menuContainer.appendChild(this.container);var $=$create("ul",this.doc),_=$create("div",this.doc);this.shadowdiv=_;$.className="eos-popmenu-list";this.container.appendChild(_);_.appendChild($);_.className="eos-popmenu";B.appendChild(this.menuContainer);bodyAddNode(B,this.doc);B.style.zIndex=D+1;for(var C=0;C<this.submenu.length;C++){var A=this.submenu[C];$.appendChild(A.container);A.container.style.zIndex=D+1;A.zIndex=D+1;A.root=this;A.level=this.level+1;A.init()}this.initEvent();this.openLevel[0]=this};PopMenu.prototype.appendChild=function($){this.submenu.push($);$.parent=this};PopMenu.prototype.initEvent=function(){var _=this;function $(){_.hide(true)}};PopMenu.prototype.addObject=function($){if(!$)return;var _=this};PopMenu.prototype.show=function(){PageControl.setFocus(this);this.container.style.display="";this.isShow=true;if(this.isShadowInit!=true){if(isFF){initShadow(this.shadowdiv,this.doc);this.shadowdiv.style.width=this.shadowdiv.parentNode.offsetWidth-7}else initShadowIe(this.shadowdiv,this.doc);this.isShadowInit=true}};PopMenu.prototype.setPosition=function(_,$){this.container.style.left=_+"px";this.container.style.top=$+"px"};PopMenu.prototype.hide=function(_){if(this.canClose||_){for(var $=0;$<this.submenu.length;$++){var A=this.submenu[$];A.hide(_)}this.container.style.display="none";this.isShow=false;return true}else return false};PopMenu.prototype.openByLevel=function($){$debug($);for(var A=0;A<this.openLevel.length;A++){var _=this.openLevel[A];if(!_)continue;if(A<=$)_.show();else _.hide(true)}};function PopMenuItem($){this.id=$;PageControl.add($,this);this.parent=null;this.submemu=[];this.win=_get_top_window()||window;this.doc=this.win.document;this.container=$create("li",this.doc);this.subMenuContainer=null;this.url=null;this.name=null;this.seperator=false;this.params=[];this.icon=null;this.canClose=true;this.currMenu=null;this.level=0;this.root=null;this.onClickFunc=null;this.menuKey=null;this.onRefreshFunc=null;this.zIndex=0}PopMenuItem.prototype.init=function(){if(this.seperator){var $="<span></span>";this.container.className="eos-popmenu-line";this.container.innerHTML=$;if(isIE)this.container.style.height="2px";else this.container.style.height="1px"}else{this.initContainer();this.initEvent();this.initSubMenu()}};PopMenuItem.prototype.initSubMenu=function(){if(this.hasChild()){var A=$create("div",this.doc);this.subMenuContainer=$create("div",this.doc);this.subMenuContainer.style.width="164px";this.subMenuContainer.style.overflow="hidden";if(isIE)A.innerHTML="<iframe style=\"position:absolute;z-index:"+this.zIndex+";width:expression(this.nextSibling.childNodes[0].offsetWidth);height:expression(this.nextSibling.childNodes[0].offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);\" frameborder=\"0\" ></iframe>";A.appendChild(this.subMenuContainer);this.subMenuContainer.style.display="none";this.subMenuContainer.style.position="absolute";this.subMenuContainer.style.zIndex=parseInt(this.zIndex)+1;var $=$create("ul",this.doc),_=$create("div",this.doc);$.className="eos-popmenu-list";this.shadowdiv=_;this.subMenuContainer.appendChild(_);_.appendChild($);for(var B=0;B<this.submemu.length;B++){var C=this.submemu[B];C.root=this.root;C.level=this.level+1;C.container.style.zIndex=parseInt(this.zIndex)+1;C.zIndex=this.zIndex+1;C.init();$.appendChild(C.container)}this.root.menuContainer.appendChild(A);_.className="eos-popmenu"}};PopMenuItem.prototype.initContainer=function(){var $=$create("a",this.doc);$.className="eos-popmenu-item";$.hidefocus=true;$.unselectable="on";$.href="#";this.container.appendChild($);$.innerHTML=this.getNomalDiv();this.container.className="eos-popmenu-list-item"};PopMenuItem.prototype.getNomalDiv=function(){var _="";_+="<table cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%;height:25px;background-color:transparent;border-style:none;border:-width:0px\">";_+="    <tr>";_+="    <td  class=\"overLeft\" style=\"width: 5px;height:25px;\"></td>";_+="        <td  class=\"overCenter\"style=\"width: 20px;height:25px;\">";_+="            <div style=\"width: 20px;height:25px;overflow:hidden;background-color:transparent;border-style:none;border:-width:0px\">";this.icon=this.icon?addContextPath(this.icon):PICTURE_BLANK;_+="<img border='0' width='16px' height='20px' src='"+this.icon+"'>";_+="            </div>";_+="        </td>";_+="        <td class=\"overCenter\" style=\"padding-left:10px;height:25px;background-color:transparent;border-style:none;border:-width:0px\">";var $=this.getContent();if(!$||$==null||$=="null")$="";_+="           <div>"+$+"</div>";_+="        </td>";_+="        <td class=\"overCenter\" align=\"right\" style=\"padding-right:10px;height:25px;background-color:transparent;border-style:none;border:-width:0px\">";var A=PICTURE_BLANK;if(this.hasChild())A=POPMENU_ARROW_RIGHT;_+="<img border='0' src='"+A+"'></td>";_+="    <td  class=\"overRight\" style=\"width: 5px;height:25px;\"></td></tr></table>";return _};PopMenuItem.prototype.getContent=function(){if(this.onRefreshFunc){try{return eval(this.onRefreshFunc+"(this);")}catch(e){alert(e);return this.name}}var url=this.getURL();if(url){if(this.target)return"<a href='"+url+"' target='"+this.target+"'>"+this.name+"</a>";else return"<a href='"+url+"'>"+this.name+"</a>"}else return this.name};PopMenuItem.prototype.initEvent=function(){var B=this;function $(){B.hide()}function _(){B.parent.canClose=true;var $=B.parent.currMenu;if($&&$!=B)B.parent.currMenu.hide(true);$=B.root.openLevel[B.level];if($&&$!=B)$.hide(true)}function A(){var $=B.parent.currMenu;if($&&$!=B)B.parent.currMenu.hide(true);$=B.root.openLevel[B.level];if($&&$!=B)$.hide(true);if(B.root.isShow){B.root.openLevel[B.level]=B;B.root.openByLevel(B.level);B.parent.canClose=false;B.parent.currMenu=B}return false}this.container.onmouseover=function(){eventManager.stopEvent();A();return false};this.container.onmouseout=function(){eventManager.stopEvent();_();B.root.openLevel[B.level]=null;return false};this.container.onclick=function(){eventManager.stopEvent();B.root.hide(true);B.onClick();return false}};PopMenuItem.prototype.getURL=function(){if(this.url){var _="";for(var $=0;$<this.params.length;$++){var A=this.params[$];_+="&"+A.key+"="+A.value}if(this.url.indexOf("?")<0){if(_.length>0)_="?"+_;_=_.replace("&","")}return this.url+_}return null};PopMenuItem.prototype.addParam=function($,_){this.params.push({key:$,value:_})};PopMenuItem.prototype.hasChild=function(){return this.submemu.length!=0};PopMenuItem.prototype.appendChild=function($){this.submemu.push($);$.parent=this};PopMenuItem.prototype.showSubMenu=function(){if(this.hasChild()){var $=getPosition(this.container);this.subMenuContainer.style.left=($.left-3+this.container.offsetWidth)+"px";this.subMenuContainer.style.top=$.top+"px";this.subMenuContainer.style.display="";if(this.subMenuContainer.offsetWidth<this.subMenuContainer.scrollWidth)this.subMenuContainer.style.width=this.subMenuContainer.scrollWidth+"px";var D=getPosition(this.subMenuContainer),B=this.doc||document,C=D.left+this.subMenuContainer.offsetWidth,A=B.body.clientWidth;if(C>A){var _=$.left-this.subMenuContainer.offsetWidth;if(_<0)_=0;this.subMenuContainer.style.left=_+"px"}if(this.isShadowInit!=true){if(isFF){initShadow(this.shadowdiv,this.doc);$debug(this.shadowdiv.parentNode.offsetWidth);this.shadowdiv.style.width=this.shadowdiv.parentNode.offsetWidth-7}else initShadowIe(this.shadowdiv,this.doc);this.isShadowInit=true}}};PopMenuItem.prototype.onClick=function(){var root=this.root;if(this.onClickFunc){try{eval(this.onClickFunc+"(this,root.args)")}catch(e){}}if(root.onClickFunc){try{eval(root.onClickFunc+"(this.menuKey,root.args)")}catch(e){}}};PopMenuItem.prototype.hide=function(_){if(this.canClose||_)if(this.hasChild()){for(var $=0;$<this.submemu.length;$++){var A=this.submemu[$];A.hide(_)}this.subMenuContainer.style.display="none"}};PopMenuItem.prototype.show=function(){this.showSubMenu()};function showPopMenu(C,$){var A=$o(C);if(A){A.args=$;var B=eventManager.getEvent(),D=B.x||B.clientX,E=B.y||B.clientY;if(isIE){var _=getAbsPos(document.body,A.win);D=D+_.left+A.doc.body.scrollLeft;E=E+_.top+A.doc.body.scrollTop}else{_=getScreenPos(window,A.win);D=D+_.left;E=E+_.top}if(A.hide(true)){A.show();A.setPosition(D,E)}}}function hideMenu($){var _=$o($);if(_)_.hide(true)}function getDocumentId(_){if(!top.docs)top.docs=[];var $=0;for(;$<top.docs.length;$++)if(top.docs[$]==_)return $;top.docs.push(_);return top.docs.length-1}PopMenu.prototype.bind=function($,A){var _=this.id;if($!=null)$.oncontextmenu=function(){showPopMenu(_,A);return false}};function initShadowIe(B,E){E=E||document;var C=B.nextSibling;if(C==null||!C.isShadow){var $=B.parentNode,A=B.offsetWidth,D=B.offsetHeight,_=$createElement("div",{doc:E});_.isShadow=true;$.style.width=A;$.style.height=D;_.style.width=A-8;_.style.height=D-8;_.style.position="absolute";_.style.left=0;_.style.top=0;_.style.zIndex=-999;_.style.background="#777";_.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius=4)";$.insertBefore(_,B.nextSibling);B.shadowContainter=_;B.style.width=A-4;B.style.height=D-4}}function RTree(D,_,B,E){var $=new Object();$.hasRoot=E;var A=new RTreeView(D,$,_,B);$.setNodeExpandAction=_rtreemodel_setNodeExpandAction;$.getNodeExpandAction=_rtreemodel_getNodeExpandAction;$.getExpandRetXpaths=_rtreemodel_getExpandRetXpaths;$.getExpandParam=_rtreemodel_getExpandParam;$.loadNodeChild=_rtreemodel_loadNodeChild;$.initAttachParam=_rtreemodel_initAttachParam;$.getTreeNodeName=_rtreemodel_getTreeNodeName;$.getTreeNodeIcon=_rtreemodel_getTreeNodeIcon;$.setEntityInfo=_rtreemodel_setEntityInfo;$.getEntityInfo=_rtreemodel_getEntityInfo;$.showNodeMenu=_rtreemodel_showNodeMenu;$.addMenuItem=_rtreemodel_addMenuItem;$.onmenuclick=_rtreemodel_onmenuclick;$.getMovemenu=_rtreemodel_getMovemenu;$.isNodeMovable=_rtreemodel_isNodeMovable;$.moveNode=_rtreemodel_moveNode;$.setMoveAction=_rtreemodel_setMoveAction;$.getMoveAction=_rtreemodel_getMoveAction;$.getMoveParam=_rtreemodel_getMoveParam;$.clearup=_rtreemodel_clearup;$.setExpandInitParamFunc=_rtreemodel_setExpandInitParamFunc;$.setMoveInitParamFunc=_rtreemodel_setMoveInitParamFunc;$.expandRoot=_rtreemodel_expandRoot;$.preLoad=_rtreemodel_preload;$.treeView=A;$.nodeExpandActions=new Object();$.entityInfos=new Object();$.move_node=null;$.moveto_node=null;if(isFF){var C=$id(D.getAttribute("id")+"_container");if(registerTopContainer(C))EOSResizeObjects.push(A)}return A}function _rtreemodel_loadNodeChild($,K){var D;if($.isloadData!==true){var L=this.getNodeExpandAction($),_=this.getExpandParam($),J=this.getExpandRetXpaths($);if(!(L&&J)){$.icon.src=$.openIconSrc;$.loadFinished=true;return}var B=new HideSubmit(L);B.submitXML(_);var F=B.getXMLDom();D=Dataset.create(F,"root/data/"+J[0]);for(var I=1;I<J.length;I++)D.appendDataset(Dataset.create(F,"root/data/"+J[I]))}else D=$.datasetExp;var H=D.getEntities();if(!$.isroot){if(H==undefined||H==null||H.length==0){$.hasChild=false;$.isleaf=true;$.refreshExpendIcon();$.icon.src=$.openIconSrc;$.childrenContainer.style.display="none";$.loadFinished=true;if(K)K($);return}else{$.hasChild=true;$.isleaf=false;$.refreshExpendIcon()}}else if(H.length!=0){$.hasChild=true;$.isleaf=false}var M,P,A,G,N,C,O,E;for(I=0;I<H.length;I++){if(I==0)N=true;else N=false;if(I==H.length-1)C=true;else C=false;P=H[I],A=this.getTreeNodeName(P),G=this.getTreeNodeIcon(P.name),E=this.getEntityInfo(P.name).iconType;if(!(this.getEntityInfo(P.name)).expandAction)O=false;else O=true;M=new RTreeNode($,A,G,P,N,C,O,this.hasRoot,E);$.childrenContainer.appendChild(M);if(O&&this.getEntityInfo(P.name).preload==true)if(this.preLoad(M)==false)M.setLeaf();M.refresh()}$.childrenContainer.style.display="";$.icon.src=$.openIconSrc;if(K)K($);$.loadFinished=true}function _rtreemodel_preload(C){var D=this.getNodeExpandAction(C),F=this.getExpandParam(C),E=this.getExpandRetXpaths(C);C.isloadData=true;if(!(D&&E)){C.icon.src=C.openIconSrc;C.loadFinished=true;return false}var _=new HideSubmit(D);_.submitXML(F);var G=_.getXMLDom(),B=Dataset.create(G,"root/data/"+E[0]);for(var A=1;A<E.length;A++)B.appendDataset(Dataset.create(G,"root/data/"+E[A]));C.datasetExp=B;var $=B.values;if($.length==0)return false;else return true}function _rtreemodel_expandRoot(){var $=new RTreeRootNode(new Entity("root"),this);$.level=0;this.treeView.rootNode=$;this.treeView.appendChild($);this.loadNodeChild($)}function _rtreemodel_setNodeExpandAction($,A,_){var B=this.getEntityInfo($);B.expandAction=A;B.childEntityXpaths=_}function _rtreemodel_setExpandInitParamFunc(_,$){var A=this.getEntityInfo(_);A.InitExpandParamFunc=$}function _rtreemodel_setMoveInitParamFunc(_,$){var A=this.getEntityInfo(_);A.InitMoveParamFunc=$}function _rtreemodel_getNodeExpandAction(A){var _=A.entity.name,$=this.getEntityInfo(_);return $.expandAction}function _rtreemodel_getExpandRetXpaths(A){var _=A.entity.name,$=this.getEntityInfo(_);return $.childEntityXpaths}function _rtreemodel_getExpandParam(A){var B=A.entity.name,$=this.getEntityInfo(B),D=$.InitExpandParamFunc,C=$.submitXpath,E="",F;E=fireUserEvent(D,[A]);if(C==""||C==null)F=A.entity.toString();else{var _=A.entity.name;A.entity.name=C;F=A.entity.toString();A.entity.name=_}return"<root><data>"+E+F+"</data></root>"}function _rtreemodel_initAttachParam($){if($&&isUserEventDefined($))return fireUserEvent($,[]);else return""}function _rtreemodel_getTreeNodeName($){var C=$.name,A=this.getEntityInfo(C),B=A.expression,_=$.getProperty(B);if(_==null)return B;else return _}function _rtreemodel_getTreeNodeIcon(_){var $=this.getEntityInfo(_);return $.iconSrc}function _rtreemodel_getEntityInfo(entityName){entityName=entityName.toLowerCase();var entityInfos=this.entityInfos,_entityInfo;eval("_entityInfo = entityInfos."+entityName);if(!_entityInfo){_entityInfo=new _rtree_EntityInfo();eval("entityInfos."+entityName+"=_entityInfo;")}return _entityInfo}function _rtreemodel_setEntityInfo(K,I,A,$,B,F,G,D,H,E,_,C){K=K.toLowerCase();var J=this.getEntityInfo(K);J.expression=I;J.iconSrc=A;J.onrefresh=B;J.onclick=$;J.ondblclick=F;J.InitExpandParamFunc=D;J.childEntityXpaths=H;J.expandAction=E;J.iconType=G;J.submitXpath=_;J.preload=C}function _rtreemodel_setMoveAction(moveEntity,toEntity,bizAction,InitParamFunc){var moveActions=this.getEntityInfo(moveEntity).moveActions,index;eval("index = moveActions."+toEntity+";");if(!index){index=moveActions.length;eval("moveActions."+toEntity+" = index;")}var moveObj=new Object();moveObj.action=bizAction;moveObj.InitParamFunc=InitParamFunc;moveActions[index]=moveObj}function _rtreemodel_isNodeMovable(A){var $=A.entity.name,_=this.getEntityInfo($),B=_.moveActions;if(B.length>0)return true;else return false}function _rtreemodel_moveNode(){if(isCanMoveTo(document.moveModel,document.movetoModel)==false)return;var D=this.move_node,F=document.movetoModel.moveto_node;this.move_node=null;this.moveto_node=null;this.move_menu.hide();var G=D.getParent(),_=this.getMoveAction(D,F);if(_){var C=D.getTree().beforeMove;if(C)if(C(D,F)==false)return;var B=this.getMoveParam(D,F),E=new HideSubmit(_);E.submitXML(B);var $=D.getTree(),I=$.afterMove;if(I)if($.afterMove(E)==false)return;var A,H;A=!D.getParent().isChildOf(F);H=!F.isChildOf(D.getParent());if(A)D.getParent().reloadChild();if(H)F.reloadChild()}}function _rtreemodel_getMoveAction(move_node,moveto_node){var toTreeId=findRTree(moveto_node).id,entityName=move_node.entity.name,toEntityName=moveto_node.entity.name,entityInfo=this.getEntityInfo(entityName),moveActions=entityInfo.moveActions,index;eval("index = moveActions."+toTreeId+"_"+toEntityName+";");if(typeof(index)!="undefined")return moveActions[index].action;else return null}function _rtreemodel_getMoveParam(move_node,moveto_node){var toTreeId=findRTree(moveto_node).id,entityName=move_node.entity.name,toEntityName=moveto_node.entity.name,entityInfo=this.getEntityInfo(entityName),InitParamFunc="",moveActions=entityInfo.moveActions,index;eval("index = moveActions."+toTreeId+"_"+toEntityName+";");if(typeof(index)!="undefined")InitParamFunc=moveActions[index].InitParamFunc;var from_node=move_node.getParent(),FuncParam="";FuncParam=fireUserEvent(InitParamFunc,[move_node,moveto_node]);var fromNodeName=from_node.entity.name,movetoNodeName=moveto_node.entity.name;from_node.entity.name="from";moveto_node.entity.name="to";var returnValue="<root><data>"+FuncParam+this.initParam+from_node.entity+moveto_node.entity+move_node.entity+"</data></root>";from_node.entity.name=fromNodeName;moveto_node.entity.name=movetoNodeName;return returnValue}function _rtreemodel_clearup(){var $=this;$.setNodeExpandAction=null;$.getNodeExpandAction=null;$.getExpandRetXpaths=null;$.getExpandParam=null;$.loadNodeChild=null;$.initAttachParam=null;$.getTreeNodeName=null;$.getTreeNodeIcon=null;$.setEntityInfo=null;$.getEntityInfo=null;$.showNodeMenu=null;$.addMenuItem=null;$.onmenuclick=null;$.getMovemenu=null;$.isNodeMovable=null;$.moveNode=null;$.setMoveAction=null;$.getMoveAction=null;$.getMoveParam=null;$.clearup=null;$.treeView=null;$.attachParam=null;$.nodeExpandActions=null;$.entityInfos=null;$.initParam=null;$.menu=null;$.move_node=null;$.moveto_node=null;$.move_menu=null}function _rtree_EntityInfo(){this.expandAction=null;this.moveActions=new Array();this.childEntityXpaths=[];this.expression="";this.iconSrc="";this.onrefresh="";this.onclick="";this.ondblclick="";this.menuItems=new Array();this.InitMoveParamFunc=null;this.InitExpaneParamFunc=null;this.submitXpath="";return this}function _rtreemodel_addMenuItem($,A,B){var _=this.getEntityInfo($);_.menuItems.push(new EOSTreeMenuItem(A,B))}function _rtreemodel_showNodeMenu(A){var $=A.getTree();if($.beforeShowMenu&&$.beforeShowMenu(A)===false)return;var B=A.entity.name,F=this.getEntityInfo(B),E=F.menuItems;if(E.length>0){for(var _=0;_<E.length;_++){if(_!=0){var C=_get_top_window(),D=C.document.createElement("div");D.className="rtree-popmenu-item-line";this.menu.insertItem(D)}this.menu.insertItem(E[_])}$.afterShowMenu&&$.afterShowMenu(A,this.menu);this.menu.show()}}function _rtreemodel_onmenuclick($){fireUserEvent($,[this.treeView.cur_node])}function _rtreemodel_getMovemenu(_){if(isIE){if(_.icon)this.move_menu.nodeView.innerHTML=_.icon.outerHTML+_.cell.outerHTML;else this.move_menu.nodeView.innerHTML=_.cell.outerHTML;var $=this.move_menu.nodeView.getElementsByTagName("span");addClass($[0],"RC_TREE_CELL");removeClass($[0],"RC_TREE_ACTIVENODE")}else{if(_.icon)this.move_menu.nodeView.innerHTML="<img style='vertical-align:bottom'src='"+_.icon.src+"'>"+_.cell.innerHTML;else this.move_menu.nodeView.innerHTML=_.cell.innerHTML;addClass(this.move_menu.nodeView,"RC_TREE_CELL")}this.move_menu.style.display="";this.move_menu.container.style.width=1;this.move_menu.style.width=1;initShadow(this.move_menu.container);if(isFF){this.move_menu.container.nextSibling.style.zIndex="999";this.move_menu.container.nextSibling.style.width=this.move_menu.offsetWidth+5}this.move_menu.style.display="none";return this.move_menu}function RTreeView(D,A,B,E){var _=D,$=$id(D.getAttribute("id")+"_container");if(isFF&&E=="100%"){var C=$;while(true){if(C==null)break;if(C.tagName=="TABLE"&&C.getAttribute("class")=="eos-panel-table"){if(C.getAttribute("height")!=null)$.style.height=E;break}C=C.offsetParent}}else $.style.height=E;$.style.width=B;_.style.overflow="auto";_.style.width=B;_.style.height=E;_.className="RC_TREE";_.setAttribute("richclientType","RTREE");_.findTreeNode=_rtreeview_findTreeNode;_.expandLevel=_rree_expand_level;_.getRootNode=function(){return this.rootNode};_.getSelectNode=_rree_getSelectNode;_.moveNode=_rtree_move;_.clearup=_rtreeview_clearup;_.model=A;_.cur_node=null;_.onselectstart=function(){return false};_.onselect=function(){return false};_.onmouseup=_rtreeview_onmouseup;_.onmousemove=_rtreeview_onmousemove;_.onmouseout=_rtreeview_onmouseout;_.onkeydown=_rtreeview_onkeydown;_.setMenuStyle=function(_,$){this.model.menu.style[_]=$};_.autoResizeS1=_rree_auto_resize_step1;_.autoResizeS2=_rree_auto_resize_step2;_.isInCurrPanel=_rtree_isInCurrPanel;_.init=_rtree_init;return _}function _rtree_isInCurrPanel(){if(_eos_curr_open_panel!=null){var $=$id(this.getAttribute("id")+"_container").offsetParent;while(true){if($==null)return false;if($==_eos_curr_open_panel.table)return true;$=$.offsetParent}}else return false}function _rtree_init(){var $=this.model;$.menu=new EOSTreeMenu($);EOSTreeMenu.register($.menu);$.move_menu=new RTreeMoveMenu();$.expandRoot()}function _rtreeview_findTreeNode(C,$,_){function B(C,F,G,H){var A=C.entity.name;if(A==F){var D=C.entity.getProperty(G);if(D&&(D==H))return C}var _=C.getChildren(),$;for(var E=0;E<_.length;E++){$=B(_[E],F,G,H);if($)return $}return null}var A=this.rootNode;return B(A,C,$,_)}function _rree_getSelectNode(){return this.cur_node}function _rtree_move(B,C){var D=B.getTree(),F=D.model.getMoveAction(B,C);if(F){var A=D.model.getMoveParam(B,C),E=new HideSubmit(F);E.submitXML(A);var _=D.afterMove;if(_)if(D.afterMove(E)==false)return;var $,G;$=!B.getParent().isChildOf(C);G=!C.isChildOf(B.getParent());if($)B.getParent().reloadChild();if(G)C.reloadChild()}}function _rtreeview_clearup(){this.rootNode.clearup();this.model.clearup()}function _rtreeview_onmouseout(){if(!__isStartDrag())return;if(this.cur_node){this.cur_node.cell.className="RC_TREE_CELL";document.movetoModel=null}}function _rtreeview_onmouseup(){}var doc_onmousemove=null,doc_onmouseup=null,doc_onmouseout=null;function _rtreeview_onmousemove(){var _=document.moveModel;if(!__isStartDrag())return;var $=_.move_menu}function _rtreeview_onkeydown(){function _($){if($){sibling=$.nextSibling;if(sibling)return sibling;else return _($.getParent())}else return null}function C(A){if(!A)return null;var $=A.getChildren(),_=$.length;if(A.isExpanded()&&(_>0))return C($[_-1]);else return A}var D=eventManager.getEvent();eventManager.stopPropagation();var A=this,$=A.cur_node;if(!$)return;switch(D.keyCode){case 40:if($.getChildren()[0]&&$.isExpanded())$.getChildren()[0].selected();else{var B=_($);if(B)B.selected()}A.cur_node.scrollIntoView();break;case 38:if($.previousSibling){B=C($.previousSibling);if(B)B.selected()}else if($.getParent())$.getParent().selected();A.cur_node.scrollIntoView();break;case 37:if($.isExpanded())$.collapseNode();else if($.getParent())$.getParent().selected();A.cur_node.scrollIntoView();break;case 39:if(!$.isExpanded())$.expandNode();else if($.getChildren()[0])$.getChildren()[0].selected();A.cur_node.scrollIntoView();break}return false}function RTreeNode(A,_,C,B,E,$,H,F,G){var D=document.createElement("DIV");D.noWrap=true;D.openIconSrc=STREE_DEFAULTOPEN_ICON;D.closeIconSrc=STREE_DEFAULTCLOSE_ICON;D.plusIconSrc="";D.minusIconSrc="";D.isFirstNode=E;D.isLastNode=$;D.hasChild=H;D.imgLevel=A.imgLevel;D.isleaf=!H;D.hasRoot=F;_rtreeNode_processNodeStatus(D,B,E,$,F,C,G,_);D.childLoaded=false;D.entity=B;D.isroot=false;D.addChildNode=_rtreeNode_addChildNodes;D.expandNode=_rtreeNode_expandNode;D.collapseNode=_rtreeNode_collapseNode;D.clearChildren=_rtreeNode_clearChildren;D.selected=_rtreeNode_selected;D.select=_rtreeNode_selected;D.refresh=_rtreeNode_refresh;D.refreshExpendIcon=_rtreeNoderefreshExpendIcon;D.isChildOf=_rtreeNode_isChildOf;D.isExpanded=_rtreeNode_isExpanded;D.getParent=_rtreeNode_getParent;D.getChildren=_rtreeNode_getChildren;D.getTree=_rtreeNode_getTree;D.reloadChild=_rtreeNode_reloadChild;D.clearup=_rtreeNode_clearup;D.getProperty=_rtreeNode_getProperty;D.setIcon=_rtreeNode_setIcon;D.setText=_rtreeNode_setText;D.getText=_rtreeNode_getText;D.setLeaf=_rtreeNode_setLeaf;D.isLeaf=_rtreeNode_isLeaf;D.isRootNode=_rtreeNode_isRoot;D.getEntity=_rtreeNode_getEntity;D.hasChildNode=_rtreeNode_hasChildNode;D.onclick=_rtreenode_onclick;D.ondblclick=_rtreenode_ondblclick;D.oncontextmenu=_rtreenode_oncontextmenu;D.onmousedown=_rtreenode_onmousedown;D.onmouseover=_rtreenode_onmouseover;return D}function _rtreeNode_hasChildNode(){return this.hasChild}function _rtreeNode_getEntity(){return this.entity}function _rtreeNode_isRoot(){return this.isroot}function _rtreeNode_isLeaf(){return this.isleaf}function _rtreeNode_getProperty($){return this.entity.getProperty($)}function _rtreeNode_setText($){this.cell.innerHTML=$}function _rtreeNode_getText(){return this.cell.innerHTML}function _rtreeNode_setIcon($,_){this.openIconSrc=_rtree_addContextPath($);if(_)this.closeIconSrc=_rtree_addContextPath(_);else this.closeIconSrc=this.openIconSrc;if(this.closeIconSrc=="null")this.icon.style.display="none";this.icon.src=this.closeIconSrc}function _rtreeNode_setLeaf(){this.isleaf=true;this.hasChild=false;this.childLoaded=true;this.refreshExpendIcon()}function RTreeRootNode(C,_){var G=_.hasRoot,A=_.getTreeNodeName(C),F=_.getTreeNodeIcon(C.name),I=document.createElement("DIV");I.noWrap=true;var B=document.createElement("DIV"),$;$=document.createElement("IMG");if(F=="null")$.style.display="none";if(F=="")F=STREE_DEFAULTOPEN_ICON;else F=_rtree_addContextPath(F);I.openIconSrc=F;$.src=F;$.style.verticalAlign="middle";$.ondrag=function(){eventManager.stopPropagation();return false};B.appendChild($);var E=document.createElement("span");E.innerHTML=A;E.className="RC_TREE_CELL";E.style.verticalAlign="middle";B.appendChild(E);var D=document.createElement("IMG");D.style.verticalAlign="middle";D.src=STREE_BLANK_ICON;B.appendChild(D);var H=document.createElement("DIV");I.appendChild(B);I.appendChild(H);if(!G){$.style.display="none";E.style.display="none"}I.setAttribute("richclientType","RTREENODE");I.expandIcon=new Object();I.icon=$;I.cell=E;I.childLoaded=false;I.entity=C;I.isroot=true;I.isleaf=false;I.level=false;I.childrenContainer=H;I.imgLevel="";I.addChildNode=_rtreeNode_addChildNodes;I.expandNode=_rtreeNode_expandNode;I.collapseNode=_rtreeNode_collapseNode;I.clearChildren=_rtreeNode_clearChildren;I.selected=_rtreeNode_selected;I.select=_rtreeNode_selected;I.refresh=_rtreeNode_refresh;I.isChildOf=_rtreeNode_isChildOf;I.isExpanded=_rtreeNode_isExpanded;I.getParent=_rtreeNode_getParent;I.getChildren=_rtreeNode_getChildren;I.getTree=_rtreeNode_getTree;I.reloadChild=_rtreeNode_reloadChild;I.clearup=_rtreeNode_clearup;I.isRootNode=_rtreeNode_isRoot;I.getEntity=_rtreeNode_getEntity;I.hasChildNode=_rtreeNode_hasChildNode;I.setText=_rtreeNode_setText;I.getText=_rtreeNode_getText;I.onclick=_rtreenode_onclick;I.ondblclick=_rtreenode_ondblclick;I.oncontextmenu=_rtreenode_oncontextmenu;I.onmousedown=_rtreenode_onmousedown;I.onmouseover=_rtreenode_onmouseover;return I}function _rtree_addContextPath($){if($==null)return"";if($.indexOf("/")==0)return contextPath+$;else return $}function _rtreeNode_processNodeStatus(L,B,M,H,$,F,D,G){var K=L.imgLevel,N=F,J=D;if(N!=""&&N!="null"){var C=N.split(",");if(J=="xpath"){if(C.length!=2){if(B.getProperty(C[0])!=null)L.openIconSrc=_rtree_addContextPath(B.getProperty(C[0]));L.closeIconSrc=L.openIconSrc}else{if(B.getProperty(C[0])!=null)L.openIconSrc=_rtree_addContextPath(B.getProperty(C[0]));if(B.getProperty(C[1])!=null)L.closeIconSrc=_rtree_addContextPath(B.getProperty(C[1]))}}else if(C.length!=2){L.openIconSrc=_rtree_addContextPath(C[0]);L.closeIconSrc=L.openIconSrc}else{L.openIconSrc=_rtree_addContextPath(C[0]);L.closeIconSrc=_rtree_addContextPath(C[1])}}if(K==""&&!$&&M){if(H){L.plusIconSrc=STREE_ROOTPLUS_ICON;L.minusIconSrc=STREE_ROOTMINUS_ICON}else if(L.hasChild){L.plusIconSrc=STREE_FPLUS_ICON;L.minusIconSrc=STREE_FMINUS_ICON}else{L.plusIconSrc=STREE_FLEAF_ICON;L.minusIconSrc=""}}else if(H){if(L.hasChild){L.plusIconSrc=STREE_LPLUS_ICON;L.minusIconSrc=STREE_LMINUS_ICON}else{L.plusIconSrc=STREE_LLEAF_ICON;L.minusIconSrc=""}}else if(L.hasChild){L.plusIconSrc=STREE_PLUS_ICON;L.minusIconSrc=STREE_MINUS_ICON}else{L.plusIconSrc=STREE_LEAF_ICON;L.minusIconSrc=""}var E=document.createElement("DIV");for(var A=0;A<K.length;A++){var I=document.createElement("IMG");I.style.verticalAlign="middle";if(K.charAt(A)=="1")I.src=STREE_LINE_ICON;else I.src=STREE_BLANK_ICON;E.appendChild(I)}if(H)L.imgLevel=K+"0";else L.imgLevel=K+"1";I=document.createElement("IMG");I.src=L.plusIconSrc;I.style.verticalAlign="middle";E.appendChild(I);var F;F=document.createElement("IMG");if(N=="null")F.style.display="none";else{F.style.verticalAlign="middle";F.src=L.closeIconSrc}E.appendChild(F);var O=document.createElement("span");O.innerHTML=G;O.className="RC_TREE_CELL";O.style.verticalAlign="middle";E.appendChild(O);var _=document.createElement("DIV");_.style.display="none";L.appendChild(E);L.appendChild(_);L.setAttribute("richclientType","RTREENODE");I.style.cursor="hand";L.expandIcon=I;L.icon=F;L.cell=O;L.childLoaded=false;L.childrenContainer=_}function _rtreeNode_selected(){var $=findRTree(this);if($.cur_node)$.cur_node.cell.className="RC_TREE_CELL";this.cell.className="RC_TREE_ACTIVENODE";$.cur_node=this}function _rtreeNoderefreshExpendIcon(){var _=this.imgLevel,B=this.hasRoot,$=this.isFirstNode,A=this.isLastNode;if(this.getParent().isroot&&!B&&$){if(A){this.plusIconSrc=STREE_ROOTPLUS_ICON;this.minusIconSrc=STREE_ROOTMINUS_ICON}else if(this.hasChild){this.plusIconSrc=STREE_PLUS_ICON;this.minusIconSrc=STREE_MINUS_ICON}else{this.plusIconSrc=STREE_FLEAF_ICON;this.minusIconSrc=STREE_FLEAF_ICON}}else if(A){if(this.hasChild){this.plusIconSrc=STREE_LPLUS_ICON;this.minusIconSrc=STREE_LMINUS_ICON}else{this.plusIconSrc=STREE_LLEAF_ICON;this.minusIconSrc=STREE_LLEAF_ICON}}else if(this.hasChild){this.plusIconSrc=STREE_PLUS_ICON;this.minusIconSrc=STREE_MINUS_ICON}else{this.plusIconSrc=STREE_LEAF_ICON;this.minusIconSrc=STREE_LEAF_ICON}this.expandIcon.src=this.minusIconSrc}function _rtreeNode_addChildNodes($){this.childrenContainer.appendChild($)}function _rtreeNode_expandNode(B){if(this.isleaf)return;var _=this.getTree().beforeExpand;if(_)if(_(this)==false)return;var A=this,$=findRTree(A).model;this.expandIcon.src=this.minusIconSrc;if(!A.childLoaded){this.icon.src=RTREE_DROP_LOADING;setTimeout(function(){return _rtreemodel_loadNodeChild.apply($,[A,B])},1);A.childLoaded=true}else if(!A.isleaf){A.childrenContainer.style.display="";this.icon.src=this.openIconSrc}var C=this.getTree().afterExpand;if(C)C(this)}function _rtreeNode_collapseNode(){this.expandIcon.src=this.plusIconSrc;this.icon.src=this.closeIconSrc;this.childrenContainer.style.display="none"}function _rtreeNode_clearChildren(){var _=this.childrenContainer.childNodes;for(var $=_.length-1;$>=0;$--)if(isFF){var A=_[$].parentNode;A.removeChild(_[$])}else _[$].removeNode(true);this.expandIcon.src=RTree.COLLAPS_ICON;this.childrenContainer.style.display="none";this.isleaf=false;this.childLoaded=false;this.isloadData=false}function _rtreeNode_refresh(A){var _=findRTree(this),$=_.model;if(A)this.entity=A;if(this.isroot)this.level=0;else this.level=this.getParent().level+1;this.cell.innerHTML=$.getTreeNodeName(this.entity);var C=$.getEntityInfo(this.entity.name),B=C.onrefresh;if(!B)return;fireUserEvent(B,[this,this.cell])}function _rtreeNode_getParent(){if(this.isroot)return null;else return this.parentNode.parentNode}function _rtreeNode_getChildren(){return this.childrenContainer.childNodes}function _rtreeNode_getTree(){return findRTree(this)}function _rtreeNode_isChildOf($){var _=this;while(_=_.getParent())if(_==$)return true;return false}function _rtreeNode_isExpanded(){if(this.childrenContainer.style.display=="none")return false;else return true}function _rtreeNode_reloadChild($){if(this.childLoaded||this.isRootNode()){this.clearChildren();this.expandNode($)}else this.expandNode($)}function _rtreeNode_clearup(){var A=this,_=A.getChildren();for(var $=_.length-1;$>=0;$--)_[$].clearup(true);A.expandIcon=null;A.icon=null;A.cell=null;A.entity=null;A.childrenContainer=null;A.addChildNode=null;A.expandNode=null;A.collapseNode=null;A.clearChildren=null;A.selected=null;A.refresh=null;A.isChildOf=null;A.isExpanded=null;A.getParent=null;A.getChildren=null;A.getTree=null;A.reloadChild=null;A.clearup=null;A.onclick=null;A.ondblclick=null;A.oncontextmenu=null;A.onmousedown=null;A.onmouseover=null;A.onmouseup=null;A.removeNode(true)}function _rtreenode_onclick(){var _=findRTree(this),$=_.model;$.menu.hide();function D(){if(C.isleaf)return;if(C.childrenContainer.style.display=="none")C.expandNode();else C.collapseNode()}var C=this,B=eventManager.getElement();if(B==this.cell||B==this.expandIcon||B==this.icon)this.selected();if(B==this.cell){var A=$.getEntityInfo(this.entity.name).onclick;if(A)fireUserEvent(A,[this])}if(B==this.expandIcon)D()}function _rtreenode_ondblclick(){eventManager.stopPropagation();var _=findRTree(this),$=_.model,B=this,A=eventManager.getElement();if(A==this.cell){var C=$.getEntityInfo(this.entity.name).ondblclick;if(C)fireUserEvent(C,[this])}}function _rtreenode_oncontextmenu(){eventManager.stopPropagation();var _=findRTree(this),A=_.model,$=A.menu,B=this;B.selected();if(eventManager.getElement()==this.cell)A.showNodeMenu(B);return false}function _rtreenode_onmousedown(){var A=eventManager.getEvent();if(isFF){if(A.button!=0)return}else if(A.button!=1)return;if(isFF)eventManager.stopPropagation();var B=eventManager.getElement();if(B!=this.cell)return;var C=findRTree(this),$=C.model;if($.isNodeMovable(this)){$.move_node=this;document.moveModel=$;doc_onmousemove=document.onmousemove;doc_onmouseup=document.onmouseup;doc_onmouseout=document.onmouseout;document.onmousemove=function(){_.show();var $=eventManager.getEvent();if(isFF){_.style.top=eventManager.getPointY();_.style.left=eventManager.getPointX()+12}else{_.style.posTop=$.y+document.body.scrollTop;_.style.posLeft=$.x+document.body.scrollLeft+12}if(isCanMoveTo(document.moveModel,document.movetoModel)!=false)_.statusIcon.src=RTREE_DROP_YES;else _.statusIcon.src=RTREE_DROP_NO};document.onmouseup=function(){var $=document.moveModel;if(isCanMoveTo(document.moveModel,document.movetoModel)==false){var A;if($.move_node.icon.style.display=="none")A=getPosition($.move_node.cell);else A=getPosition($.move_node.icon);if(_.style.display!="none"){_.statusIcon.style.display="none";_.reset(A.top,A.left)}}else{document.onmousemove=doc_onmousemove;document.onmouseup=doc_onmouseup;document.onmouseout=doc_onmouseout;_.hide();$.moveNode();document.moveModel=null;document.movetoModel=null;return}document.onmousemove=doc_onmousemove;document.onmouseup=doc_onmouseup;document.onmouseout=doc_onmouseout;document.moveModel=null;document.movetoModel=null};document.onmouseout=function(){if(isFF)if(eventManager.getElement().tagName!="HTML")return;try{if(!(A.clientX<=0||A.clientX>=document.body.clientWidth||A.clientY<=0||A.clientY>=document.body.clientHeight))return;var B=getPosition($.move_node.icon);if(_.style.display!="none"){_.statusIcon.style.display="none";_.reset(B.top,B.left)}document.onmousemove=doc_onmousemove;document.onmouseup=doc_onmouseup;document.onmouseout=doc_onmouseout;document.moveModel=null;document.movetoModel=null}catch(C){}};var _=$.getMovemenu($.move_node);_.statusIcon.style.display=""}}function _rtreenode_onmouseover(){if(eventManager.getElement()!=this.cell)return;var _=findRTree(this),$=_.model;if(__isStartDrag()){eventManager.stopPropagation();$.moveto_node=this;document.movetoModel=$;this.selected()}}function _rtreenode_onmouseup(){}function findRTree(A){var _=A,$;while(_=_.parentNode){$=_.getAttribute("richclientType");if($=="RTREE")return _}return null}function EOSTreeMenu(B){var _=_get_top_window(),A=_.document.createElement("div"),$=_.document.createElement("div");A.appendChild($);A.container=$;$.className="eos-popmenu";A.style.width="120px";A.style.cursor=" hand";A.style.position="absolute";A.style.display="none";_.document.body.appendChild(A);A.clearItems=_treemenu_clearItems;A.insertItem=_treemenu_insertItem;A.addMenuItem=_treemenu_addMenuItem;A.removeMenuItem=_treemenu_removeMenuItem;A.hide=function(){this.clearItems();this.style.display="none"};A.show=function(){PageControl.setFocus(this);this.style.display="";initShadow(this.container,_.document);if(isFF)this.container.nextSibling.style.width=this.container.nextSibling.offsetWidth+5;this.container.nextSibling.style.zIndex="-1";this.style.zIndex="0";if(isFF)setOpacity(this,0);this.style.zindex=999;var C=eventManager.getEvent();if(isIE){this.style.posTop=C.screenY-_.screenTop+_.document.body.scrollTop;this.style.posLeft=C.screenX-_.screenLeft+_.document.body.scrollLeft}else{var $=C.x||C.clientX,A=C.y||C.clientY,B=getScreenPos(window,_);$=$+B.left+_.document.body.scrollLeft;A=A+B.top+_.document.body.scrollTop;this.style.top=A;this.style.left=$}this.tabIndex=1;if(isFF)fx_fadeIn(this,null,500)};A.model=B;A.oncontextmenu=function(){return false};A.onselectstart=function(){return false};A.onblur=function(){EOSTreeMenu.hideAll()};return A}function _treemenu_addMenuItem(A,_){var $=new EOSTreeMenuItem(A,_);this.insertItem($)}function _treemenu_removeMenuItem(A){var _=this.container.children||this.container.childNodes;for(var $=0;$<_.length;$++)if(_[$].innerHTML==A){this.container.removeChild(_[$]);return}}EOSTreeMenu.register=function($){if(!this.menus)this.menus=new Array();this.menus.push($)};EOSTreeMenu.hideAll=function(){if(!this.menus)return;for(var $=0;$<this.menus.length;$++)this.menus[$].hide()};function EOSTreeMenuItem($,B){var _=_get_top_window(),A=_.document.createElement("div");A.className="rtree-popmenu-item";if(isFF)A.style.marginBottom="-6px";A.innerHTML=$;A.onclickFunction=B;A.onmousedown=_treemenuitem_onclick;A.onmouseover=_treemenuitem_onmouseover;A.onmouseout=_treemenuitem_onmouseout;return A}function _treemenu_clearItems(){var $=this.container.children||this.container.childNodes;if($)while($.length>0)this.container.removeChild($[0])}function _treemenu_insertItem($){this.container.appendChild($)}function _treemenuitem_onclick(){var $=this.parentNode.parentNode;removeClass(this,"rtree-popmenu-item-mouseover");$.hide();$.model.onmenuclick(this.onclickFunction);this.style.backgroundColor="";this.style.color="black"}function _treemenuitem_onmouseover(){addClass(this,"rtree-popmenu-item-mouseover");this.style.color="white"}function _treemenuitem_onmouseout(){removeClass(this,"rtree-popmenu-item-mouseover");this.style.color="black"}function RTreeMoveMenu(){var A=document.createElement("div"),_=document.createElement("div"),B=document.createElement("nobr");_.appendChild(B);_.className="RC_TREE_DRAGNODE";A.onselectstart=function(){eventManager.stopPropagation();return false};A.style.position="absolute";A.style.display="none";document.body.appendChild(A);var C=document.createElement("img");C.src=RTREE_DROP_NO;C.style.verticalAlign="middle";var $=document.createElement("span");B.appendChild(C);B.appendChild($);A.appendChild(_);A.nodeView=$;A.statusIcon=C;A.container=_;A.show=_rtreemovemenu_show;A.hide=_rtreemovemenu_hide;A.reset=_rtreemovemenu_reset;return A}function _rtreemovemenu_show(){this.style.display=""}function _rtreemovemenu_reset(A,_){this.hide();return;if(isFF){this.hide();return}var $=this;if(this.style.posTop==A&&this.style.posLeft==_){this.hide();return}if(this.style.posTop>A)if(this.style.posTop-A<=3)this.style.posTop=this.style.posTop-1;else this.style.posTop=this.style.posTop-(this.style.posTop-A)*0.3;if(this.style.posTop<A)if(A-this.style.posTop<=3)this.style.posTop=this.style.posTop+1;else this.style.posTop=this.style.posTop+(A-this.style.posTop)*0.3;if(this.style.posLeft>_)if(this.style.posLeft-_<=3)this.style.posLeft=this.style.posLeft-1;else this.style.posLeft=this.style.posLeft-(this.style.posLeft-_)*0.3;if(this.style.posLeft<_)if(_-this.style.posLeft<=3)this.style.posLeft=this.style.posLeft+1;else this.style.posLeft=this.style.posLeft+(_-this.style.posLeft)*0.3;setTimeout(function(){return _rtreemovemenu_reset.apply($,[A,_])},10)}function _rtreemovemenu_hide(){this.style.display="none"}function fireUserEvent(function_name,param){var result,paramstr="";for(i=0;i<param.length;i++)if(i==0)paramstr="param["+i+"]";else paramstr=paramstr+",param["+i+"]";if(isUserEventDefined(function_name))eval("result="+function_name+"("+paramstr+");");if(!result)result="";return result}function isUserEventDefined(function_name){if(function_name==""||function_name==undefined)return false;var result;eval("result=(typeof("+function_name+")!=\"undefined\");");if(!result)alert(STREE_MOT_FOUND+function_name+"!");return result}function __isStartDrag(){if(document.moveModel!=null)return true;else return false}function isCanMoveTo(E,B){if(!E)return false;if(!B)return false;var C=E.move_node,$=B.moveto_node;if($==null)return false;if(C==null)return false;if(C==$)return false;var _=C.getParent();if($==_)return false;if($.isChildOf(C))return false;var A=E.getMoveAction(C,$),D=C.getTree().isCanMove;if(!A)return false;if(D)if(D(C,$)==false)return false;else return true}function _rree_expand_level($,_){if(_==null)_=this.getRootNode();if(!_.isroot)_.expandNode();var A=this;setTimeout(function(){return isLoadFinish.apply(A,[$,_])},10)}function isLoadFinish(_,A){if(A.loadFinished!=true){setTimeout(function(){return isLoadFinish.apply(tree,[_,A])},10);return}_=_-1;var $=A.getChildren();if(_==0)return;else for(var B=0;B<$.length;B++){if($[B].isleaf)continue;_rree_expand_level(_,$[B])}}function _rree_auto_resize_step1(){$id(this.id+"_container").style.display="none"}function _rree_auto_resize_step2(){var _=$id(this.getAttribute("id")+"_container"),$=_.parentNode;while($!=null)if($.getAttribute&&$.getAttribute("layout")!=null){_.style.height=$.offsetHeight;_.style.display="";$=null}else $=$.parentNode;_.style.display=""}function Relation($,_,B,A){this.entityName=$;this.entityField=_;this.parentEntity=B;this.parnetFeild=A}function EntityInfo(E,C,G,B,_,$,D,F,A){this.icon=E;this.iconType=C;this.showField=G;this.onclick=B;this.refresh=_;this.oncheck=$;this.submitXpath=D;this.url=F;this.target=A}function CheckedInfo(A,_,B,$){this.entityName=A;this.entityField=_;this.checkedEntity=B;this.checkedField=$}function CheckList($){this.entityType=$;this.list=new Array()}CheckList.prototype.push=function($){this.list.push($)};CheckList.prototype.getLength=function(){return this.list.length};CheckList.prototype.getNodeType=function(){return this.entityType};CheckList.prototype.toString=function(){var _="";for(var $=0;$<this.list.length;$++)_=_+this.list[$];return"<list entityType='"+this.entityType+"'>"+_+"</list>"};function STree(B,C,A,E,_,$){if(_!="null")B.style.width=_;if($!="null")B.style.height=$;var D=B.id.substr(0,B.id.indexOf("_container"));PageControl.add(D,this);this.hasCheckbox=C;this.checkType=A;this.treeContainer=B;this.hasRoot=E;this.datasetList=new Object();this.datasetList.root=new Object();this.entityInfoList=new Object();this.relationList=new Array();this.checkedInfoList=new Array()}STree.prototype.addRelation=function(C,_,B,$){var A=new Relation(C,_,B,$);this.relationList.push(A)};STree.prototype.addCheckedInfo=function(A,_,B,C){var $=new CheckedInfo(A,_,B,C);this.checkedInfoList.push($)};STree.prototype.addDataset=function($,_){var B=createXmlDom();B.loadXML(_.innerHTML);var A=new Dataset($);A.init(B.selectSingleNode("/root/data").childNodes);this.datasetList[$]=A};STree.prototype.addEntityInfo=function(A,G,_,C,H,F,I,$,D,B){var E=new EntityInfo(G,_,C,H,F,I,$,D,B);this.entityInfoList[A]=E};STree.prototype.getDataset=function($){return this.datasetList[$]};STree.prototype.getEntityInfo=function($){return this.entityInfoList[$]};STree.prototype.processRelation=function(){var A=this.relationList;for(var $=0;$<A.length;$++){var _=A[$];if(_.parentEntity=="root")_stree_linkToRoot(_,this.getDataset(_.entityName),this.getDataset(_.parentEntity));else _stree_linkToParnet(_,this.getDataset(_.entityName),this.getDataset(_.parentEntity))}};STree.prototype.processCheckBox=function(){var $=this.checkedInfoList;for(var F=0;F<$.length;F++){var J=$[F];if(J.entityName==J.checkedEntity){var C=this.getDataset(J.entityName),A=C.values,K=J.checkedField,G=J.entityField,H=C.getLength();for(var E=0;E<H;E++){var B=A[E].getProperty(G);if(B==K)A[E].checked="1"}}else{var C=this.getDataset(J.entityName),A=C.values,H=C.getLength(),D=this.getDataset(J.checkedEntity),L=D.values,M=D.getLength(),G=J.entityField,_=J.checkedField;for(E=0;E<H;E++){B=A[E].getProperty(G);for(var I=0;I<M;I++){K=L[I].getProperty(_);if(K==B)A[E].checked="1"}}}}this.processParnetCheckBox()};STree.prototype.processParnetCheckBox=function(){if(this.checkType=="simple")return;_stree_processParnetCheckBox(this.getDataset("root"))};function _stree_processParnetCheckBox($){var A="3",B=$.childList;if(B!=null){for(var _=0;_<B.length;_++){var C=_stree_processParnetCheckBox(B[_]);if(A=="3")A=C;else if(A!="2")if(A!=C)A=2}$.checked=A;return A}else if($.checked=="1")return 1;else return 0}function _stree_linkToRoot(_,C,I){if(I.childList==null)I.childList=new Array();var $=I.childList,A=C.getLength(),D=C.values,F=_.entityName,E=_.parnetFeild,G=_.entityField;if(E==="ADD_ALL"){for(var B=0;B<A;B++){var H=D[B];H.type=F;$.push(H)}}else{if(E==="")E="null";for(B=0;B<A;B++){H=D[B];if(H.getProperty(G)+""==E){H.type=F;$.push(H)}}}}function _stree_linkToParnet(_,$,E){var D=$.getLength(),M=$.values,B=E.getLength(),C=E.values,N=_.entityName,L=_.parnetFeild,A=_.entityField,G=L.split(","),J=A.split(",");if(G.length==1){for(var H=0;H<D;H++){var K=M[H].getProperty(A);for(var I=0;I<B;I++){var F=C[I].getProperty(L);if(F==K){M[H].type=N;if(C[I].childList==null)C[I].childList=new Array();C[I].childList.push(M[H]);break}}}}else for(H=0;H<D;H++){K=M[H].getProperty(A);for(I=0;I<B;I++){F=C[I].getProperty(L);if(F==K){M[H].type=N;if(C[I].childList==null)C[I].childList=new Array();C[I].childList.push(M[H]);break}}}}function _streeNode_collapseNode(){this.expandIcon.src=this.plusIconSrc;this.icon.src=this.closeIconSrc;this.childrenContainer.style.display="none"}function _streeNode_expandNode(){this.expandIcon.src=this.minusIconSrc;this.icon.src=this.openIconSrc;if(!this.isChildLoaded)this.addChildNode();else this.childrenContainer.style.display=""}function _streeNode_addChildNodes(){var A=this.entity.childList;if(A==null)return;for(var _=0;_<A.length;_++){var $=false,B=false;if(_==0)$=true;if(_==A.length-1)B=true;var C=new STreeNode(this,A[_],$,B);C.refresh();this.childrenContainer.appendChild(C)}this.childrenContainer.style.display="";this.isChildLoaded=true}function STreeRootNode(B){var G=document.createElement("DIV");G.noWrap=true;G.level="";G.tree=B;G.hasCheckbox=B.hasCheckbox;G.checkType=B.checkType;G.entity=B.datasetList.root;G.openIconSrc=STREE_DEFAULTOPEN_ICON;G.closeIconSrc=STREE_DEFAULTCLOSE_ICON;G.plusIconSrc=STREE_ROOTPLUS_ICON;G.minusIconSrc=STREE_FMINUS_ICON;G.entityInfo=B.getEntityInfo("root");G.hasChild=(G.entity.childList!=null);G.isChildLoaded=true;G.isRoot=true;var E=document.createElement("div"),F=G.entityInfo.icon;if(F!="")G.openIconSrc=_stree_addContextPath(F);var _;_=document.createElement("IMG");_.style.verticalAlign="middle";if(G.openIconSrc=="null")_.style.display="none";_.src=G.openIconSrc;E.appendChild(_);var A=null;if(G.hasCheckbox){A=document.createElement("IMG");A.style.verticalAlign="middle";if(G.entity.checked==null||G.entity.checked=="0")A.src=STREE_CHECKBOX_FALSE_ICON;else if(G.entity.checked=="1")A.src=STREE_CHECKBOX_TRUE_ICON;else A.src=STREE_CHECKBOX_TRUE_ICON1;E.appendChild(A)}var D;if(G.entityInfo.url!=""){D=document.createElement("A");D.href=_stree_addContextPath(G.entityInfo.url);D.innerHTML=G.entityInfo.showField;if(G.entityInfo.target!="")D.target=G.entityInfo.target}else{D=document.createElement("SPAN");D.innerHTML=G.entityInfo.showField}D.className="RC_TREE_CELL";E.appendChild(D);var $=document.createElement("IMG");$.style.verticalAlign="middle";$.src=STREE_BLANK_ICON;E.appendChild($);var C=document.createElement("DIV");G.appendChild(E);G.appendChild(C);G.setAttribute("richclientType","RTREENODE");G.icon=_;G.cell=D;G.checkbox=A;G.childLoaded=true;if(!B.hasRoot){if(G.hasCheckbox)A.style.display="none";_.style.display="none";D.style.display="none"}G.childrenContainer=C;G.addChildNode=_streeNode_addChildNodes;G.expandNode=_streeNode_expandNode;G.collapseNode=_streeNode_collapseNode;G.select=_streeNode_selected;G.refresh=_streeNode_refresh;G.setIcon=_streeNode_setIcon;G.setText=_streeNode_setNodeText;G.getText=_streeNode_getNodeText;G.getProperty=_streeNode_getProperty;G.checkbox_click=_streeNode_checkbox_onchick;G.getParent=_streeNode_getParent;G.getChildren=_streeNode_getChildren;G.isChecked=_streeNode_isChecked;G.getEntity=_streeNode_getEntity;G.isRootNode=_streeNode_isRoot;G.hasChildNode=_streeNode_hasChild;G.getTree=_streeNode_getTree;G.onmouseover=_streeNode_onmouseover;G.onmouseout=_streeNode_onmouseout;G.onclick=_streeNode_onclick;return G}function STreeNode(_,D,A,$){var B=_.tree,C=document.createElement("DIV");C.noWrap=true;C.level=_.level;C.tree=B;C.hasCheckbox=B.hasCheckbox;C.checkType=B.checkType;C.entity=D;C.openIconSrc=STREE_DEFAULTOPEN_ICON;C.closeIconSrc=STREE_DEFAULTCLOSE_ICON;C.plusIconSrc="";C.minusIconSrc="";C.entityInfo=B.getEntityInfo(C.entity.type);C.hasChild=(D.childList!=null);C.isRoot=false;_streeNode_processNodeStatus(C,D,A,$);C.addChildNode=_streeNode_addChildNodes;C.expandNode=_streeNode_expandNode;C.collapseNode=_streeNode_collapseNode;C.select=_streeNode_selected;C.refresh=_streeNode_refresh;C.setIcon=_streeNode_setIcon;C.setText=_streeNode_setNodeText;C.getText=_streeNode_getNodeText;C.getProperty=_streeNode_getProperty;C.checkbox_click=_streeNode_checkbox_onchick;C.getParent=_streeNode_getParent;C.getChildren=_streeNode_getChildren;C.isChecked=_streeNode_isChecked;C.getEntity=_streeNode_getEntity;C.isRootNode=_streeNode_isRoot;C.hasChildNode=_streeNode_hasChild;C.getTree=_streeNode_getTree;C.onmouseover=_streeNode_onmouseover;C.onmouseout=_streeNode_onmouseout;C.onclick=_streeNode_onclick;return C}function _streeNode_getTree(){return this.tree}function _streeNode_hasChild(){return this.hasChild}function _streeNode_isRoot(){return this.isRoot}function _streeNode_getEntity(){return this.entity}function _streeNode_getProperty($){return this.entity.getProperty($)}function _streeNode_processNodeStatus($,K,B,N){var J=$.level,M=$.entityInfo.icon,I=$.entityInfo.iconType;if(M!=""){var E=M.split(",");if(I=="xpath"){if(E.length!=2){$.openIconSrc=_stree_addContextPath(K.getProperty(E[0]));$.closeIconSrc=$.openIconSrc}else{$.openIconSrc=_stree_addContextPath(K.getProperty(E[0]));$.closeIconSrc=_stree_addContextPath(K.getProperty(E[1]))}}else if(E.length!=2){$.openIconSrc=_stree_addContextPath(E[0]);$.closeIconSrc=$.openIconSrc}else{$.openIconSrc=_stree_addContextPath(E[0]);$.closeIconSrc=_stree_addContextPath(E[1])}}if(J==""&&!$.tree.hasRoot&&B){if(N){$.plusIconSrc=STREE_ROOTPLUS_ICON;$.minusIconSrc=STREE_ROOTMINUS_ICON}else if($.hasChild){$.plusIconSrc=STREE_FPLUS_ICON;$.minusIconSrc=STREE_FMINUS_ICON}else{$.plusIconSrc=STREE_FLEAF_ICON;$.minusIconSrc=""}}else if(N){if($.hasChild){$.plusIconSrc=STREE_LPLUS_ICON;$.minusIconSrc=STREE_LMINUS_ICON}else{$.plusIconSrc=STREE_LLEAF_ICON;$.minusIconSrc=""}}else if($.hasChild){$.plusIconSrc=STREE_PLUS_ICON;$.minusIconSrc=STREE_MINUS_ICON}else{$.plusIconSrc=STREE_LEAF_ICON;$.minusIconSrc=""}var A=document.createElement("div");for(var H=0;H<J.length;H++){var G=document.createElement("IMG");G.style.verticalAlign="middle";if(J.charAt(H)=="1")G.src=STREE_LINE_ICON;else G.src=STREE_BLANK_ICON;A.appendChild(G)}if(N)$.level=J+"0";else $.level=J+"1";G=document.createElement("IMG");G.src=$.plusIconSrc;G.style.verticalAlign="middle";A.appendChild(G);var F;F=document.createElement("IMG");F.style.verticalAlign="middle";if($.closeIconSrc=="null")F.style.display="none";F.src=$.closeIconSrc;A.appendChild(F);var L=null;if($.hasCheckbox){L=document.createElement("IMG");L.style.verticalAlign="middle";if($.entity.checked==null||$.entity.checked=="0")L.src=STREE_CHECKBOX_FALSE_ICON;else if($.entity.checked=="1")L.src=STREE_CHECKBOX_TRUE_ICON;else L.src=STREE_CHECKBOX_TRUE_ICON1;A.appendChild(L)}var C;if($.entityInfo.url!=""){C=document.createElement("A");var D=compileTemplate($.entityInfo.url);C.href=_stree_addContextPath(runExpression(D,K));if($.entityInfo.target!="")C.target=$.entityInfo.target}else C=document.createElement("span");C.innerHTML=$.entity.getProperty($.entityInfo.showField);C.className="RC_TREE_CELL";C.style.verticalAlign="middle";A.appendChild(C);var _=document.createElement("DIV");_.style.display="none";$.appendChild(A);$.appendChild(_);$.setAttribute("richclientType","RTREENODE");G.style.cursor="hand";$.expandIcon=G;$.icon=F;$.cell=C;$.checkbox=L;$.childLoaded=false;$.childrenContainer=_}function _stree_addContextPath($){if($==null)return"";if($.indexOf("/")==0)return contextPath+$;else return $}function _streeNode_refresh(){var functionName=this.entityInfo.refresh;if(functionName!="")eval(functionName+"(this)")}function _streeNode_onmouseover(){addClass(this.cell,"RC_TREE_MOUSEOVER");eventManager.stopPropagation()}function _streeNode_onmouseout(){removeClass(this.cell,"RC_TREE_MOUSEOVER");eventManager.stopPropagation()}function _streeNode_onclick(){var src=eventManager.getElement();if(src==this.cell||src==this.expandIcon||src==this.icon||src==this.checkbox)this.select();if(src==this.cell){var functionName=this.entityInfo.onclick;if(functionName!="")eval(functionName+"(this)")}if(src==this.expandIcon)if(this.childrenContainer.style.display=="none"){if(this.hasChild)this.expandNode()}else this.collapseNode();if(src==this.checkbox)this.checkbox_click()}function _streeNode_checkbox_onchick(){if(this.checkType=="simple"){if(this.entity.checked=="1"){this.entity.checked=0;this.checkbox.src=STREE_CHECKBOX_FALSE_ICON}else{this.entity.checked=1;this.checkbox.src=STREE_CHECKBOX_TRUE_ICON}}else{if(this.entity.checked=="1")_stree_uncheckAllChild(this);else _stree_checkAllChild(this);_stree_process_parentNode(this)}var functionName=this.entityInfo.oncheck;if(functionName!="")eval(functionName+"(this)")}function _stree_checkAllChild(_){_.entity.checked=1;_.checkbox.src=STREE_CHECKBOX_TRUE_ICON;if(_.hasChild)if(_.isChildLoaded){var $=_.getChildren();for(var A=0;A<$.length;A++)_stree_checkAllChild($[A])}else{$=_.entity.childList;for(A=0;A<$.length;A++)_stree_unload_checkAllChild($[A])}return}function _stree_unload_checkAllChild(_){_.checked=1;if(_.childList){var $=_.childList;for(var A=0;A<$.length;A++)_stree_unload_checkAllChild($[A])}return}function _stree_uncheckAllChild(_){_.entity.checked=0;_.checkbox.src=STREE_CHECKBOX_FALSE_ICON;if(_.hasChild)if(_.isChildLoaded){var $=_.getChildren();for(var A=0;A<$.length;A++)_stree_uncheckAllChild($[A])}else{$=_.entity.childList;for(A=0;A<$.length;A++)_stree_unload_uncheckAllChild($[A])}return}function _stree_unload_uncheckAllChild(_){_.checked=0;if(_.childList){var $=_.childList;for(var A=0;A<$.length;A++)_stree_unload_uncheckAllChild($[A])}return}function _stree_process_parentNode($){var A=$.getParent();if(A==null)return;var C=$.entity.checked;if(C=="2"){A.entity.checked="2";A.checkbox.src=STREE_CHECKBOX_TRUE_ICON1;_stree_process_parentNode(A);return}var _=A.getChildren();for(var B=0;B<_.length;B++){if(_[B].entity.checked==null)_[B].entity.checked="0";if(_[B].entity.checked!=C){A.entity.checked="2";A.checkbox.src=STREE_CHECKBOX_TRUE_ICON1;_stree_process_parentNode(A);return}}if(C=="1"){A.entity.checked=1;A.checkbox.src=STREE_CHECKBOX_TRUE_ICON}else{A.entity.checked=0;A.checkbox.src=STREE_CHECKBOX_FALSE_ICON}_stree_process_parentNode(A)}function _streeNode_getChildren(){return this.childrenContainer.childNodes}function _streeNode_getParent(){if(this.isRoot)return null;else return this.parentNode.parentNode}function _streeNode_selected(){var $=this.tree;if($.cur_node)$.cur_node.cell.className="RC_TREE_CELL";this.cell.className="RC_TREE_ACTIVENODE";$.cur_node=this}STree.prototype.getCheckedList=function(B){if(B!=null){var C=this.getDataset(B);if(C==null){alert(B+STREE_ENTITY_NOT_EXIST);return}var A=new CheckList(B),F=C.values,E=C.getLength();for(var D=0;D<E;D++){var $=F[D].checked;if($=="1"||$=="2")A.push(F[D])}return A}else{var _=new Array();for(B in this.datasetList){if(B=="root")continue;C=this.getDataset(B);if(C==null){alert(B+STREE_ENTITY_NOT_EXIST);return}A=new CheckList(B),F=C.values,E=C.getLength();for(D=0;D<E;D++){$=F[D].checked;if($=="1"||$=="2")A.push(F[D])}_.push(A)}return _}};STree.prototype.getUncheckedList=function(B){if(B!=null){var C=this.getDataset(B);if(C==null){alert(B+STREE_ENTITY_NOT_EXIST);return}var A=new CheckList(B),F=C.values,E=C.getLength();for(var D=0;D<E;D++){var $=F[D].checked;if($=="0"||$==null)A.push(F[D])}return A}else{var _=new Array();for(B in this.datasetList){if(B=="root")continue;C=this.getDataset(B);if(C==null){alert(B+STREE_ENTITY_NOT_EXIST);return}A=new CheckList(B),F=C.values,E=C.getLength();for(D=0;D<E;D++){$=F[D].checked;if($=="0"||$==null)A.push(F[D])}_.push(A)}return _}};STree.prototype.init=function(){this.processRelation();this.processCheckBox();var _=new STreeRootNode(this);this.rootNode=_;_.refresh();this.treeContainer.appendChild(_);var $=document.createElement("div");this.treeContainer.appendChild($);this.hidden=$;_.addChildNode();if(isFF)if(registerTopContainer(this.treeContainer.parentNode))EOSResizeObjects.push(this)};STree.prototype.getRootNode=function(){return this.rootNode};STree.prototype.getSelectedNode=function(){return this.cur_node};function _streeNode_setIcon($,_){this.openIconSrc=_stree_addContextPath($);if(_)this.closeIconSrc=_stree_addContextPath(_);else this.closeIconSrc=this.openIconSrc;if(this.closeIconSrc=="null")this.icon.style.display="none";this.icon.src=this.closeIconSrc}function _streeNode_isChecked(){var $=this.entity.checked;if($=="1"||$=="2")return true;else return false}function _streeNode_setNodeText($){this.cell.innerHTML=$}function _streeNode_getNodeText(){return this.cell.innerHTML}STree.prototype.createHiddenData=function(){var D=new StringBuffer();for(entityType in this.datasetList){if(entityType=="root")continue;var A=1,B=this.getDataset(entityType);if(B==null){alert(entityType+STREE_ENTITY_NOT_EXIST);return}var C=B.values,_=B.getLength();for(var E=0;E<_;E++){var F=C[E].checked;if(F=="1"||F=="2"){var G=C[E].type,$=this.getEntityInfo(G).submitXpath;if($!="")G=$;D.append(_stree_create_hiddenStr(A,C[E],G));A=A+1}}}this.hidden.innerHTML=D};function _stree_create_hiddenStr(C,D,A){var E=new StringBuffer(),_=D.getKeys();for(var B=0;B<_.length;B++){var $=D.getProperty(_[B]);E.append("<input type='hidden' name='").append(A).append("[").append(C).append("]/").append(_[B]).append("' value='").append($).append("'/>")}return E}STree.prototype.autoResizeS1=function(){this.treeContainer.parentNode.style.display="none"};STree.prototype.autoResizeS2=function(){var _=this.treeContainer.parentNode,$=_.parentNode;while($!=null)if($.getAttribute&&$.getAttribute("layout")!=null){_.style.height=$.offsetHeight;$=null}else $=$.parentNode;_.style.display=""};STree.prototype.isInCurrPanel=function(){if(_eos_curr_open_panel!=null){var $=this.treeContainer.offsetParent;while(true){if($==null)return false;if($==_eos_curr_open_panel.table)return true;$=$.offsetParent}}else return false};function SwitchCheckbox($){this.id=$;this.checkbox=null;this.hiddenInput=null;this.trueValue="1";this.falseValue="0";this.defaultValue="0";this.container=null;PageControl.add($,this)}SwitchCheckbox.prototype.init=function(){this.checkbox=$id(this.id+"_checkbox");this.hiddenInput=$id(this.id);this.container=$id(this.id+"_container");if(this.checkbox){var _=this;function $(){if(_.checkbox.checked)_.onSelect();else _.onUnSelect();_.refreshValue()}eventManager.add(this.checkbox,"click",$)}};SwitchCheckbox.prototype.refreshInput=function(){if(this.hiddenInput.value==this.trueValue)this.checkbox.checked=true;else this.checkbox.checked=false};SwitchCheckbox.prototype.refreshValue=function(){if(this.checkbox.checked)this.hiddenInput.value=this.trueValue;else this.hiddenInput.value=this.falseValue};SwitchCheckbox.prototype.onSelect=function(){};SwitchCheckbox.prototype.onUnSelect=function(){};SwitchCheckbox.prototype.setValue=function($){if(this.trueValue==$)this.hiddenInput.value=this.trueValue;else this.hiddenInput.value=this.falseValue;this.refreshInput()};SwitchCheckbox.prototype.getValue=function(){this.refreshValue();return this.hiddenInput.value};SwitchCheckbox.prototype.setFocus=function(){this.checkbox.focus()};SwitchCheckbox.prototype.lostFocus=function(){};var TABPANE_TYPE_DIV="DIV",TABPANE_TYPE_IFRAME="IFRAME",TABPANE_STATUS_NOMAL=1,TABPANE_STATUS_OVER=2,TABPANE_STATUS_ACTIVE=3,TABPANE_STATUS_DISABLED=4,TABPANE_STATUS_CLOSED=5,TABPANE_STATUS_HIDDEN=5,TAB_STYLE_NOMAL="nomal",TAB_STYLE_OVER="hover",TAB_STYLE_ACTIVE="active",TAB_STYLE_DISABLED="disabled",TAB_STYLE_LEFT="left",TAB_STYLE_MID="mid",TAB_STYLE_RIGHT="right",TAB_STYLE_TABLE="container";function TabPane($){this.id=$;PageControl.add($,this);this.subTabs=new Array();this.currTab=null;this.defaultTab=0;this.isTitleOut=false;this.titleContainer=null;this.bodyContainer=null;this.bgColor="#f1f1f1";this.borderColor="#C0C0C0";this.container=null;this.width="100%";this.height="100%";this.titleWidth=120;this.__titleTR=null;this.noCacheIframe=$create("<iframe name='"+this.id+"'/>");this.noCacheIframe.name=this.id;this.noCacheIframe.style.border=0;this.noCacheIframe.frameBorder=0;this.noCacheIframe.style.width="100%";this.noCacheIframe.style.height="100%";this.pilot=null;this.pilotIndex=0;this.firstButton=null;this.nextButton=null;this.privousButton=null;this.lastButton=null;this.maxTabs=0;this.inited=false;this.pilotInited=false;this._titleTD=null;this.titleAlign="top";this.styleSuffix=""}TabPane.prototype.append=function($){this.subTabs.push($);$.group=this};TabPane.prototype.getLength=function(){return this.subTabs.length};TabPane.prototype.getTabs=function(){return this.subTabs};TabPane.prototype.getActiveTab=function(){return this.currTab};TabPane.prototype.getActiveTabIndex=function(){return this.getCurrIndex()};TabPane.prototype.remove=function(_){for(var A=0;A<this.subTabs.length;A++)if(this.subTabs[A]==_){this.subTabs.splice(A,1);if(this.currTab==_){this.currTab=null;var $=A-1;$=$<0?0:$;this.selectTab($)}return true}return false};TabPane.prototype.buildTitles=function(){var A=this.getWidth(),_=0;for(var $=0;$<this.subTabs.length;$++){this.appendTitle(this.subTabs[$]);_+=this.subTabs[$].getWidth();if(A-_<60){this.subTabs[$].hideTitle();this.isTitleOut=true}else this.subTabs[$].showTitle()}if(this.isTitleOut)this.initPilot();this.inited=true};TabPane.prototype.getWidth=function(){var $=0;if(String(this.width).indexOf("%")>0)$=parseInt(this.container.offsetWidth);else $=parseInt(this.width);if($==0){var _=this.container.parentNode;while(_){var A=parseInt(_.offsetWidth);if(A!=0)return A;_=_.parentNode}return document.body.offsetWidth}else return $};TabPane.prototype.getIndex=function(_){for(var $=0;$<this.subTabs.length;$++)if(this.subTabs[$]==_)return $;return-1};TabPane.prototype.getCurrIndex=function(){return this.getIndex(this.currTab)};TabPane.prototype.getShowTabIndex=function(){for(var $=0;$<this.subTabs.length;$++)if(!this.subTabs[$].isHidden)return $;return-1};TabPane.prototype.showTitleEnd=function(){var $=this.subTabs[this.subTabs.length-1];if($)return!$.isHidden;return true};TabPane.prototype.refreshTitles=function(){this.isTitleOut=false;var A=this.getWidth(),$=0,_=this.getShowTabIndex();for(var B=0;B<this.subTabs.length;B++)if(B<_)this.subTabs[B].hideTitle();else{$+=this.subTabs[B].getWidth();if(A-$<60){this.subTabs[B].hideTitle();this.isTitleOut=true}else this.subTabs[B].showTitle()}if(this.isTitleOut){if(!this.pilotInited)this.initPilot();this.showPilot(this.pilotIndex);this.pilot.style.display=""}else if(this.pilot)this.pilot.style.display="none"};TabPane.showNextTab=function(_){var A=$id(_);if(!A.showTitleEnd()){var $=A.getShowTabIndex()+1;A.showPilot($)}};TabPane.showPrivousTab=function(_){var A=$id(_),$=A.getShowTabIndex()-1;A.showPilot($)};TabPane.prototype.initPilot=function(){this.pilot=$id(this.id+"_nav_pilot");var $="<table  border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"width:40px;height:20px;overflow:hidden\"><tr><td>";$+="<div onclick=\"TabPane.showPrivousTab('"+this.id+"')\" onmouseover=\"this.className='button-privous-hover'\" onmouseout=\"this.className='button-privous'\" class=\"button-privous\">&nbsp;</div>";$+="</td><td>";$+="<div onclick=\"TabPane.showNextTab('"+this.id+"')\" class=\"button-next\" onmouseover=\"this.className='button-next-hover'\" onmouseout=\"this.className='button-next'\">&nbsp;</div>";$+="</td></tr></table>";this.pilot.innerHTML=$;this.pilot.style.display="";this.pilotInited=true};TabPane.prototype.showPilot=function(_){var A=this.getWidth(),$=0;for(var B=0;B<this.subTabs.length;B++)if(B<_){this.subTabs[B].hideTitle();this.isTitleOut=true}else{$+=this.subTabs[B].getWidth();if(A-$<60){this.subTabs[B].hideTitle();this.isTitleOut=true}else this.subTabs[B].showTitle()}this.pilotIndex=_};TabPane.prototype.appendTitle=function(A){var $=$create("td"),_="<table class=\""+TAB_STYLE_TABLE+"\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tr>";_+="<td><div class=\""+TAB_STYLE_LEFT+"\"></div></td>";_+="<td nowarp class=\""+TAB_STYLE_MID+"\">";_+="<div style=\"white-space:nowrap;page-break-before: always;page-break-after: always;\">";_+=A.getTitle();_+="</div></td>";if(A.showCloseButton){_+="<td nowarp class=\""+TAB_STYLE_MID+"\">";_+="<a class=\"close\" href=\"#\" onclick=\"$o('"+this.id+"').getTab('"+A.id+"').close();\">";if(isIE)_+="<div></div></a>";else _+="<div class=\"close\"></div></a>";_+="</td>"}if(A.allowReload){_+="<td nowarp class=\""+TAB_STYLE_MID+"\">";_+="<a class=\"reload\" href=\"#\" onclick=\"$o('"+this.id+"').getTab('"+A.id+"').reload();\">";if(isIE)_+="<div></div></a>";else _+="<div class=\"reload\"></div></a>";_+="</td>"}_+="<td><div class=\""+TAB_STYLE_RIGHT+"\"></div></div>";_+="</td></tr></table>";$.className=TAB_STYLE_NOMAL+this.styleSuffix;$.innerHTML=_;A.__titleTD=$;A.setTitleTD();A.initStatus();this.__titleTR.insertBefore($,this._titleTD);A.titleWidth=$.offsetWidth};TabPane.prototype.init=function(){this.container=$id(this.id+"_container");this.titleContainer=$id(this.id+"_title_container");this.bodyContainer=$id(this.id+"_body");this.__titleTR=$id(this.id+"_nav_tr");this._titleTD=$create("td");this.__titleTR.style.width="100%";this.__pilotContainer=$id(this.id+"_nav_pilot_container");if(this.titleAlign=="top"){this.styleSuffix="";this._titleTD.className="right-top";this._titleTD.style.overflow="hidden"}else{this.styleSuffix="-down";this.bodyContainer.className="tab-body-down";this._titleTD.className="right-buttom"}this.__titleTR.insertBefore(this._titleTD,this.__pilotContainer);this.buildTitles();this._titleTD.innerHTML="&nbsp;";this._titleTD.style.width="100%";this.selectTab(this.defaultTab)};TabPane.prototype.closeTab=function(_){var $;if(typeof(_)=="object")$=_;else $=this.getTab(_);if($ instanceof TabPage)$.close()};TabPane.prototype.selectTab=function(_){var $;if(typeof(_)=="object")$=_;else $=this.getTab(_);if($ instanceof TabPage){this.activeTab($);if(this.isTitleOut)this.showPilot(this.pilotIndex)}};TabPane.prototype.getTab=function(_){if(typeof(_)=="object"){if(_ instanceof TabPage)return _}else{for(var $=0;$<this.subTabs.length;$++)if(this.subTabs[$].id==_)return this.subTabs[$];if(!isNaN(_))if(this.subTabs[_])return this.subTabs[_]}return null};TabPane.prototype.activeTab=function($){if(!$.allowSelect)return false;if(this.currTab){if(this.currTab==$)return false;if(this.currTab.__onUnselect())if($.show()){this.currTab.hide();this.currTab=$;return true}}else{$.show();this.currTab=$;return true}return false};TabPane.prototype.createBlankTab=function(A,H,C,_,D,F){A=A||this.id+Math.random();var I=this.getTab(A);if(I){alert("The TabPage of id:"+A+",title:"+I.getTitle()+" is exists!");return null}var E="";E+="<table border='0' cellspacing='0' cellpadding='0' width='100%' height='100%'>";E+="\t<tr>";E+="\t\t<td id='"+A+"_container' valign='top'  style='display:none;width:100%;height:100%'>";E+="\t\t</td>";E+="\t</tr>";E+="</table>";var G=$create(E);G.style.width="100%";G.style.height="100%";var B=firstElement(this.bodyContainer);B.appendChild(G);var $=new TabPage(A);$.type=C;$.src=_;$.title=H;$.cache=F;$.showCloseButton=D;$.init();this.append($);if(this.inited)this.appendTitle($);this.refreshTitles();return $};TabPane.prototype.createIframeTab=function(B,A,_,$){return this.createBlankTab($,B,"IFRAME",A,false,_)};TabPane.prototype.createDivTab=function(A,B,$){var _=this.createBlankTab($,A,"DIV",null,false,null);_.container.innerHTML=B;return _};function TabPage($){this.id=$;PageControl.add($,this);this.title=$;this.type=TABPANE_TYPE_DIV;this.src=null;this.container=null;this.iframe=null;this.onSelectFunc=null;this.onUnSelectFunc=null;this.onRefreshFunc=null;this.__titleTD=null;this.showCloseButton=true;this.status=TABPANE_STATUS_NOMAL;this.group=null;this.cache=false;this.allowSelect=true;this.params=[];this.containerTable=null;this.titleWidth=80;this.isHidden=false;this.isLoad=false;this.allowReload=false}TabPage.prototype.__onSelect=function(){if(this.onSelectFunc){try{return eval(this.onSelectFunc+"(this"+")")}catch(e){$handle(e);return false}}return true};TabPage.prototype.__onUnselect=function(){if(this.onUnSelectFunc){try{var ret=eval(this.onUnSelectFunc+"(this"+")");if(ret===false)return false;else{this.container.style.display="none";return true}}catch(e){$handle(e);return false}}return true};TabPage.prototype.reload=function(){if(this.type==TABPANE_TYPE_IFRAME)if(this.isLoad){var $=this.getUrl();if($.indexOf("?")>=0)$+="&_date="+new Date();else $+="?_date="+new Date();this.iframe.src=$}else{this.iframe.src=this.getUrl();this.isLoad=true}};TabPage.prototype.disabled=function(){if(this.status==TABPANE_STATUS_NOMAL){this.allowSelect=false;this.status=TABPANE_STATUS_DISABLED;this.__titleTD.className=TAB_STYLE_DISABLED+this.group.styleSuffix}};TabPage.prototype.enabled=function(){if(this.status==TABPANE_STATUS_DISABLED){this.allowSelect=true;this.status=TABPANE_STATUS_NOMAL;this.__titleTD.className=TAB_STYLE_NOMAL+this.group.styleSuffix}};TabPage.prototype.initStatus=function(){if(this.allowSelect)this.enabled();else this.disabled()};TabPage.prototype.init=function(){this.container=$id(this.id+"_container");this.containerTable=getParentByTagName(this.container,"table");if(!isIE)this.containerTable.style.display="none";if(this.type==TABPANE_TYPE_IFRAME)if(this.cache){this.iframe=$create("<iframe name='"+this.id+"'/>");this.iframe.style.border=0;this.iframe.frameBorder=0;this.iframe.style.width="100%";this.iframe.style.height="100%";this.container.appendChild(this.iframe);this.isLoad=false}};TabPage.prototype.load=function($){this.src=$;this.group.selectTab(this);if(this.type==TABPANE_TYPE_IFRAME)if(this.cache)this.iframe.src=this.getUrl();else this.group.noCacheIframe.src=this.getUrl()};TabPage.prototype.getTitle=function(){if(this.onRefreshFunc){try{return eval(this.onRefreshFunc+"(this.title,this)")}catch(e){}}return this.title};TabPage.prototype.onClose=function(){};TabPage.prototype.close=function(){try{this.onClose()}catch($){$handle($);return false}if(this.group.getLength()>1){this.group.remove(this);this.__titleTD.parentNode.removeChild(this.__titleTD);this.container.id="";this.container.style.display="none";if(!isIE)this.containerTable.style.display="none";this.group.refreshTitles()}};TabPage.prototype.active=function(){var $=this.getTabPane();$.activeTab(this)};TabPage.prototype.hide=function(){this.container.style.display="none";if(!isIE)this.containerTable.style.display="none";if(this.status!=TABPANE_STATUS_DISABLED){this.status=TABPANE_STATUS_NOMAL;this.__titleTD.className=TAB_STYLE_NOMAL+this.group.styleSuffix}else this.__titleTD.className=TAB_STYLE_DISABLED+this.group.styleSuffix;this.setTitleTD()};TabPage.prototype.show=function(){var $=this.__onSelect();if($===false)return false;this.container.style.display="";if(!isIE)this.containerTable.style.display="";if(this.type==TABPANE_TYPE_IFRAME)if(!this.cache){this.container.appendChild(this.group.noCacheIframe);ChaGetToPostByForm(this.group.noCacheIframe,this.getUrl())}else if(!this.isLoad){this.reload();this.isLoad=true}this.status=TABPANE_STATUS_ACTIVE;this.__titleTD.className=TAB_STYLE_ACTIVE+this.group.styleSuffix;this.setTitleTD();return true};TabPage.prototype.setTitleTD=function(){var A=this.group,$=this.__titleTD,_=this;$.onclick=function(){var $=this.childNodes[0].rows[0],C=$.cells[0].getElementsByTagName("div")[0];C.style.backgroundImage="";C=$.cells[$.cells.length-1].getElementsByTagName("div")[0];for(var B=1;B<$.cells.length-1;B++)$.cells[B].style.backgroundImage="";C.style.backgroundImage="";A.selectTab(_)};$.onmouseover=function(){if(_.status==TABPANE_STATUS_NOMAL){var B=this.childNodes[0].rows[0],$=B.cells[0].getElementsByTagName("div")[0],C=getCurrentStyle($,"backgroundImage");$.style.backgroundImage=C.replace("tabs_nomal_left","tabs_hover_left");$=B.cells[B.cells.length-1].getElementsByTagName("div")[0];for(var A=1;A<B.cells.length-1;A++)B.cells[A].style.backgroundImage=C.replace("tabs_nomal_left","tabs_hover_center");$.style.backgroundImage=C.replace("tabs_nomal_left","tabs_hover_right")}eventManager.stopPropagation()};$.onmouseout=function(){if(_.status==TABPANE_STATUS_NOMAL){var B=this.childNodes[0].rows[0],$=B.cells[0].getElementsByTagName("div")[0];$.style.backgroundImage="";$=B.cells[B.cells.length-1].getElementsByTagName("div")[0];for(var A=1;A<B.cells.length-1;A++)B.cells[A].style.backgroundImage="";$.style.backgroundImage=""}eventManager.stopPropagation()}};TabPage.prototype.addParam=function($,_){this.params.push({key:$,value:_})};TabPage.prototype.getUrl=function(){if(this.src){var $="";for(var _=0;_<this.params.length;_++){var B=this.params[_];$+="&"+B.key+"="+B.value}var A=this.src;if(A.indexOf("/")==0)if(A.indexOf(contextPath)!=0)A=contextPath+A;if(A.indexOf("?")<0){if($.length>0)$="?"+$;$=$.replace("&","")}return A+$}return null};TabPage.prototype.hideTitle=function(){this.isHidden=true;this.__titleTD.style.display="none"};TabPage.prototype.showTitle=function(){this.isHidden=false;this.__titleTD.style.display=""};TabPage.prototype.getWindow=function(){var $=window;if(this.type==TABPANE_TYPE_IFRAME)if(this.cache)$=this.iframe.contentWindow;else $=this.group.noCacheIframe.contentWindow;return $};TabPage.prototype.getDocument=function(){var $=document;if(this.type==TABPANE_TYPE_IFRAME)if(this.cache)$=this.iframe.document||this.iframe.contentDocument;else $=this.group.noCacheIframe.document||this.group.noCacheIframe.contentDocument;return $};TabPage.prototype.getTabPane=function(){return this.group};TabPage.prototype.getWidth=function(){if(this.titleWidth==0)if(this.title)return(getTextWidth(this.title)+12);else return 80;return this.titleWidth};function getTextWidth(A){var _=document.createElement("span");_.innerHTML=A;document.body.appendChild(_);var $=_.offsetWidth;document.body.removeChild(_);return $}function ComboSelect($){this.id=$;this.Obj=$;this.inputObject=null;this.eventObject=null;this.hiddenObject=null;this.canClose=true;this.container=null;this.focusStatus=false;this.mouseOffset=null;this.showStatus=false;this.win=window;this.textField=null;this.valueField=null;this.filterField=null;this.submitXpath=null;this.xpath=null;this.dataXML=null;this.showMoreDay=true;this.date=null;this.timer=null;this.timeSelect=null;this.width=100;this.optionsWidth=null;this.optionsHeight="180px";this.allowInput=false;this.filterField=null;this.startWith=true;this.isFirst=true;this.__subComponent=[];this.defaultText="";this.validateFunc=function(){return true};this.validate=this.validateFunc;this.isFirstLoad=true;this.initParamFunc=null;this.nullText=null;this.filterType="startwith";this.showValue=false;this._showAll=true;PageControl.add(this.id,this)}window.setTimeoutEosWeb=function(A,_){var B=null;if(window.oldSetTimeout)B=window.oldSetTimeout;else B=window.setTimeout;if(typeof A=="function"){var $=Array.prototype.slice.call(arguments,2),C=function(){return A.apply(null,$)};return B(C,_)}return B(A,_)};ComboSelect.prototype.freshInitFunc=function(F){if(this.beforeRefresh()===false)return;var E=this.datasetExp?this.datasetExp.getLength():0,$=["<div class=\"eos-combo-optiondiv-core\"><table  class=\"eos-combo-optiontable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" ><tbody>"];for(var A=0;A<E;A++){var _=this.datasetExp.get(A),B=_.getProperty(this.valueField),D=_.getProperty(this.textField);$.push("<tr __entity_rowno=\""+A+"\" >");$.push("<td><div><nobr>");$.push(D==""?" ":D);$.push("</nobr></div></td>");if(this.showValue){$.push("<td><div>");$.push(B);$.push("</div></td>")}$.push("</tr>")}$.push("</tbody></table ></div>");var C=window.isIE?"<iframe SCROLLING=\"no\" style=\"overflow:hidden;position:absolute;z-index:-1;width:expression(this.nextSibling.offsetWidth);height:expression(this.nextSibling.offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft)\" frameborder=\"0\" ></iframe>":"<span style=\"display:none;\"></span>";this.optionsDiv.innerHTML=C+$.join("\n");this.optionsDivCore=this.optionsDiv.childNodes[1];this.optionsTable=this.optionsDivCore.firstChild;this.optionsDiv.childNodes[1].style.height=this.optionsDiv.style.height;this.optionsDiv.childNodes[1].style.width=this.optionsDiv.style.width;if(!F)this.setSubComponent(this.getEntityByValue(this.value));this.afterRefresh()};function timeFilter_enter($){var _=$.inputObject.value;if($.isinit!=true&&!$.showStatus){$.show(true);$.version=new Date().getTime();var B=new Date().getTime();timeFilter($,B)}else{eventManager.stopEvent();if($.inputObject.stateType!=false){if($.beforeHEnter&&$.beforeHEnter()==false);else{var A=$.getFilterNum();if(A>0||!$.allowInput)$.selectOption($.actionOptionRow)}$.hide();$.inputObject.select()}$.inputObject.stateType=true}}function timeFilter($,C){var _=$.inputObject.value,B=false;if(($.beforeFilter&&$.beforeFilter(_,$.filterModel)==true)||($.beforeFilter==undefined&&_&&$.filterModel&&_.length>=$.filterModel))B=true;if(B)if($.oldIOV==""||_.indexOf($.oldIOV)!=0){if($.version>C)return;else $.version_v=null;$.loadData();$.freshInitFunc()}A=$.filter($.version);return A}ComboSelect.prototype.onPageLoad=function(){PageControl.registerRelation(this.linkId,this.id);var _=this;function $(){_.init();_.loadData();_.refresh()}eventManager.add(window,"load",$)};ComboSelect.currentComboSelect=null;ComboSelect.editorContainer=null;ComboSelect.doc=document;ComboSelect.prototype.showEditor=function($){this.container.style.display="";try{this.inputObject.focus()}catch(_){}};ComboSelect.prototype.hideEditor=function($){this.hide();if(this.container)this.container.style.display="none"};ComboSelect.prototype.getSelectEntity=function(){return this.selectEntity};ComboSelect.prototype.setValue=function(_,D,C){var $=this.getEntityByValue(_);if(C)if(!$)return;if(_)if($);else if(this.filterModel){this.inputObject.value=_;this.hiddenObject.value=_;this.initInput=_;this.version=new Date().getTime();timeFilter(this,this.version,_);this.initInput=null;$=this.getEntityByValue(_)}if($&&_);else{if(this.activeOptionRow){removeClass(this.activeOptionRow,"eos-selectoption");this.activeOptionRow=null}this.selectEntity=new Entity();if(this.allowInput){this.inputObject.value=_;this.hiddenObject.value=_}else if(this.nullText&&this.filterModel);else{this.inputObject.value="";this.hiddenObject.value=""}this.initInput="";return}var A=$.__index,B=this.optionsTable.tBodies[0].rows;if(!isNaN(A)&&B&&B.length>0)this.selectOption(B[A],D)};ComboSelect.prototype.getValue=function(){if(!this.allowInput)return this.hiddenObject.value;var $=this.getEntityByText();return $?$.getProperty(this.valueField):this.inputObject.value};ComboSelect.prototype.getDisplayValue=function(_){if(_);else return"";var $=this.getEntityByValue(_);return $?$.getProperty(this.textField):_};ComboSelect.prototype.getText=function(){return this.inputObject.value};ComboSelect.prototype.getEntityByValue=function(A,B){var D=this.datasetExp?this.datasetExp.getLength():0;A=""+(A||this.hiddenObject.value||"");(B===true)&&(A=A.toLowerCase());for(var _=0;_<D;_++){var $=this.datasetExp.get(_),C=$?$.getProperty(this.valueField):null;if(C!==undefined&&C!==null){(B===true)&&(C=(""+C).toLowerCase());if(A===C){$.__index=_;return $}}}return null};ComboSelect.prototype.getEntityByText=function(A,B){var D=this.datasetExp?this.datasetExp.getLength():0;A=""+(A||this.inputObject.value||"");(B===true)&&(A=A.toLowerCase());for(var _=0;_<D;_++){var $=this.datasetExp.get(_),C=$?$.getProperty(this.textField):null;if(C!==undefined&&C!==null){(B===true)&&(C=(""+C).toLowerCase());if(A===C){$.__index=_;return $}}}return null};ComboSelect.prototype.setWidth=function($){this.width=$+"";this.initSize()};ComboSelect.prototype.getWidth=function(){return this.width};ComboSelect.prototype.initSize=function(){if(this.width){this.width=this.width+"";this.container.style.width=this.width;if(this.container.offsetWidth!=0)if(this.width.indexOf("%")!=-1){if(isFF)this.inputObject.style.width=this.width;else if(isIE){this.container.style.width="";this.inputObject.style.width=this.width}}else if(this.width.indexOf("px")!=-1)this.inputObject.style.width=this.width.replace("px","")-17;else this.inputObject.style.width=this.width-17}};ComboSelect.prototype.setPosition=function($,_,C,B){try{this.hide();if(this.container){this.width=C||this.width;this.height=B||this.height;this.container.style.position="absolute";this.container.style.width=C;var D=getMaxZindex(document);if(this.container.style.zIndex!=D)this.container.style.zIndex=D;this.container.style.display=isFF?"-moz-inline-box":"inline";this.container.style.top=_;this.container.style.left=$;this.eventObject.style.height=B;this.container.style.height=B;this.inputObject.style.height=B;this.inputObject.style.width=C-17}}catch(A){}};ComboSelect.prototype.init=function(){if(this.inited===true||this.beforeInit()===false)return;this.filterField=this.filterField||this.textField;this.container=$id(this.id+"_container");this.inputObject=$id(this.id+"_input");this.hiddenObject=$id(this.id+"_hidden");this.readonly=(this.readonly===true||this.readonly===false)?this.readonly:this.readOnly;this.inputObject.readOnly=!!this.readonly;this.hiddenObject.readOnly=!!this.readonly;this.inputObject.disabled=!!this.disabled;this.hiddenObject.disabled=!!this.disabled;this.eventObject=$id(this.id+"_button");this.button=this.eventObject;this.text=this.inputObject;this.hidden=this.hiddenObject;var comboSelect=this;this.eventObject.src=contextPath+"/common/skins/skin0/images/comboselect/comboSelect_button.gif";this.eventObject.onmouseover=function(){if(comboSelect.getDisabled()||comboSelect.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/comboselect/comboSelect_button_over.gif"};this.eventObject.onmouseout=function(){if(comboSelect.getDisabled()||comboSelect.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/comboselect/comboSelect_button.gif"};this.eventObject.onmousedown=function(){if(comboSelect.getDisabled()||comboSelect.getReadOnly())return;this.src=contextPath+"/common/skins/skin0/images/comboselect/comboSelect_button_down.gif"};this.initSize();this.inputObject.value=this.defaultText;this.validate=(typeof this.validateFunc)=="string"?eval(this.validateFunc):this.validateFunc;var fts=this.filterType.toLowerCase().split(","),array=Array(fts.length);for(var i=0;i<fts.length;i++)array[i]=(fts[i]!="like");this.startWith=array;this.initEvent();this.inited=true;this.afterInit()};ComboSelect.prototype.isFocus=function(){return this.focusStatus};ComboSelect.prototype.cancleFilter=function(_){var A=this.optionsTable.tBodies[0].rows;for(var $=0;$<A.length;$++)A[$].style.display="";return A.length};ComboSelect.prototype.filter=function(A){var $=this.inputObject.value,_=0;if($)_=this.doFilter($,null,A);else _=this.cancleFilter($);return _};ComboSelect.prototype.getFilterNum=function(){var _=0,A=this.optionsTable.tBodies[0].rows;for(var $=0;$<A.length;$++)if(A[$].style.display!="none")_++;return _};ComboSelect.prototype.doFilter=function(N,Q,H){var B=this.optionsTable.tBodies[0].rows;N=N||this.inputObject.value||"";N=N.toLowerCase();var M=0,A=null,F=false,C=false;for(var K=0;K<B.length;K++){if(H&&this.version!=H)break;if(C){B[K].style.display="none";continue}var J=this.datasetExp.get(K);if(this.filterField){var _=(this.filterField).split(","),J=this.datasetExp.get(K);if(_[E]&&N&&J)continue;var O=new Array();for(var E=0;E<_.length;E++){var L=J.getProperty(_[E]);if(L)O[O.length]=L}B[K].style.display=(Q==false?"":"none");if(this.selectOptionRow==B[K])F=true;if(O!==undefined&&O!==null&&O.length>0){var $=false;for(var I=0;I<O.length;I++){D=(""+O[I]).toLowerCase();var G=D.indexOf(N),P=true;if(this.startWith.splice){if(this.startWith.lenth<=I)P=this.startWith[this.startWith.lenth-1];else P=this.startWith[I]}else P=this.startWith;if(P&&G==0||!P&&G>=0)$=true}if($){B[K].style.display="";if(!A){A=B[K];this.activeOption(A);this.inputObject.activeOptionRow=A}M++;if(M>=20)C=true}}}}if(F);return M};ComboSelect.prototype._syncInputValue=function(){if(this.hiddenObject.value!==this.inputObject.value){this.hiddenObject.value=this.inputObject.value;this.selectEntity=new Entity();this.selectEntity.setProperty(this.valueField,this.hiddenObject.value);this.selectEntity.setProperty(this.textField,this.hiddenObject.value);return true}return false};ComboSelect.prototype._onChange=function(){if(this.onChangeFunc){if(typeof(this.onChangeFunc)=="string")this.onChangeFunc=eval(this.onChangeFunc);this.onChangeFunc(this.selectEntity,this)}};ComboSelect.prototype.onInputBlur=function(){if(this.beforeInputBlur&&this.beforeInputBlur()==false)return false;var C=this;if(checkInput(this.inputObject)==false)return;var D=true;if(this.validate)D=this.validate();if(this.inputObject.value);else{if(this.nullText!==null){var B=new Entity();B.setProperty(this.valueField,"");B.setProperty(this.textField,"this.nullText");this.datasetExp.addEntity(B,0);var _=this.optionsTable.tBodies[0].rows;this.selectOption(_[0])}else{this.selectEntity=null;this.selectOptionRow=null;this.inputObject.value="";this.hiddenObject.value=""}return}if(D)if(!C.showStatus){var E=C.getFilterNum(),F=C.hiddenObject.value,$=C.getEntityByRow(C.activeOptionRow),G,A;if($){G=$.getProperty(C.valueField);A=$.getProperty(C.textField)}if(F!=G&&A==C.inputObject.value)C.selectOption();else if(C.allowInput);else if(!C.allowInput){C.selectOption(C.selectOptionRow,(F!=G));if(F!=G)C._onChange()}}};ComboSelect.prototype.reset=function(){};ComboSelect.prototype.initEvent=function(){var $=this,F=","+[EOSKey.TAB,EOSKey.ENTER,EOSKey.SHIFT,EOSKey.CTRL,EOSKey.PAUSE,EOSKey.CAPSLOCK,EOSKey.PAGEUP,EOSKey.PAGEDOWN,EOSKey.END,EOSKey.HOME,EOSKey.LEFT,EOSKey.UP,EOSKey.RIGHT,EOSKey.DOWN,EOSKey.INSERT,EOSKey.WIN,EOSKey.WIN_R,EOSKey.MENU,EOSKey.F1,EOSKey.F2,EOSKey.F3,EOSKey.F4,EOSKey.F5,EOSKey.F6,EOSKey.F7,EOSKey.F8,EOSKey.F9,EOSKey.F10,EOSKey.F11,EOSKey.F12,EOSKey.NUMLOCK,EOSKey.SCROLLLOCK].join(",")+",";function D($){}function C(_){if($.getDisabled()||$.getReadOnly())return;_=_||window.event;if(_.keyCode==EOSKey.ENTER)eventManager.stopEvent();else if(_.keyCode==EOSKey.UP){if(!$.showStatus)$.show(true);else $.activePrevOption();eventManager.stopEvent(_)}else if(_.keyCode==EOSKey.DOWN){if(!$.showStatus)$.show(true);else $.activeNextOption();eventManager.stopEvent(_)}}function B(C){if($.getDisabled()||$.getReadOnly())return;if(this.optionsTable&&this.optionsTable.tBodies&&this.optionsTable.tBodies[0])return;C=C||window.event;var D=(C.keyCode==EOSKey.ENTER);if(!D)eventManager.stopEvent(C);if(D){if($.inputObject.stateType!=false)if(!$.showStatus)$.show(true);else{if($.beforeHEnter&&$.beforeHEnter()==false);else{var A=$.getFilterNum();if(A>0||!$.allowInput)$.selectOption($.activeOptionRow)}$.hide()}$.inputObject.stateType=true}else if(C.keyCode==EOSKey.ESC){if($.showStatus)$.hide();else{PageControl.setFocus($);$.show(true)}eventManager.stopEvent(C)}else if(C.keyCode==EOSKey.UP);else if(C.keyCode==EOSKey.DOWN);else if(F.indexOf(","+C.keyCode+",")<0){if($.filterModel==-1){$.isinit=false;return}var _=$.inputObject.value;if($.showStatus==false){if($.filterModel||$.beforeFilter){var B=false;if(($.beforeFilter&&$.beforeFilter(_,$.filterModel)==true)||($.beforeFilter==undefined&&_&&_.length>=$.filterModel))B=true;if(B)$.show()}else $.show()}else if($.showStatus==true&&($.filterModel||$.beforeFilter)){_=$.inputObject.value,B=false;if(($.beforeFilter&&$.beforeFilter(_,$.filterModel)!=true)||($.beforeFilter==undefined&&_&&_.length<$.filterModel))B=true;if(B)$.hide()}eventManager.stopEvent(C);if($.afterFilter)$.afterFilter($);$.version=new Date().getTime();$.version_v=$.version;window.setTimeoutEosWeb(timeFilter,300,$,$.version);if($.allowInput)if($._syncInputValue())$._onChange()}if(!D)eventManager.stopEvent()}function _(B){if($.getDisabled()||$.getReadOnly())return;if(B.keyCode!=EOSKey.ESC)return;B=B||window.event;if(B.keyCode==EOSKey.ENTER){eventManager.stopEvent();var A=$.getFilterNum();if(A<1&&$.allowInput)if($._syncInputValue())$._onChange()}else if(B.keyCode==EOSKey.TAB)$.onInputBlur();else if(F.indexOf(","+B.keyCode+",")<0){var _=$.inputObject.value;if($.beforeFilter&&$.beforeFilter(_,$.filterModel)==false)return false;A=$.filter();eventManager.stopEvent(B);if($.afterFilter)$.afterFilter($);$.show()}}function E(A){if($.getDisabled()||$.getReadOnly())return;A=A||window.event;var _=eventManager.getWheel(A);if(_<0){$.activeNextOption();$.selectOption()}else if(_>0){$.activePrevOption();$.selectOption()}eventManager.stopEvent()}function A(){eventManager.stopEvent();if($.getDisabled()||$.getReadOnly())return;$.eventObject.src=contextPath+"/common/skins/skin0/images/comboselect/comboSelect_button_over.gif";if($.showStatus)$.hide();else $.show(true)}if(!this.inputObject.readOnly)eventManager.add(this.inputObject,"blur",function(_){$.onInputBlur(_)});this.container.onmousedown=function(){var _=eventManager.getElement();if(_==$.inputObject){if($.showStatus)eventManager.stopEvent();try{$.inputObject.focus()}catch(A){}}else if(_==$.eventObject)if($.showStatus)eventManager.stopEvent()};eventManager.add(this.inputObject,"keydown",C);eventManager.add(this.inputObject,"keyup",B);eventManager.add(this.eventObject,"click",function(){eventManager.stopEvent()});eventManager.add(this.eventObject,"mouseup",A);eventManager.add(this.inputObject,"focus",function(){$.inputObject.select()})};ComboSelect.prototype.show=function(C){PageControl.addtoStack(this);if(this.optionsDiv&&this.optionsDiv.style&&!this.disabled){if(this.optionsWidth&&this.optionsWidth.indexOf("%")>0)this.optionsDiv.style.width=this.container.clientWidth*parseInt(this.optionsWidth)/100;else this.optionsDiv.style.width=this.optionsWidth||isFF?this.container.offsetWidth-8:this.container.offsetWidth;if(C===true)if(this.optionsTable&&this.optionsTable.tBodies&&this.optionsTable.tBodies[0])this.cancleFilter();this.optionsDiv.style.display="block";var B=getMaxZindex(document);if(this.optionsDiv.style.zIndex!=B)this.optionsDiv.style.zIndex=B;var _=getScreenPosition(this.inputObject,this.win);if(_[0]>=0)setElementXY(this.optionsDiv,[isFF?_[0]:_[0],_[1]+this.inputObject.offsetHeight]);try{this.inputObject.focus()}catch($){}this.showStatus=true;var A=this.optionsDiv.firstChild.nextSibling;initShadow(A);if(isFF)A.nextSibling.style.width=this.optionsDiv.offsetWidth+7}};ComboSelect.prototype.hide=function(){if(this.optionsDiv&&this.optionsDiv.style)this.optionsDiv.style.display="none";this.showStatus=false};ComboSelect.prototype.onLoadData=function(){};ComboSelect.prototype.addParam=function($,_){this.paramList=this.paramList||[];this.paramList.push({key:$,value:_})};ComboSelect.prototype.loadData=function(){if(this.beforeLoadData()===false)return;if(!this.linkId&&!this.queryAction&&this.xpath){var xmlZone=document.getElementById(this.id+"_xml");this.dataXML=xmlZone?xmlZone.innerHTML:null}else if(this.linkId&&this.linkId.indexOf("xml:")==0){xmlZone=document.getElementById(this.linkId.substring(4));this.dataXML=xmlZone?xmlZone.innerHTML:null}else if(this.linkId&&this.isFirstLoad){this.isFirstLoad=false;return}var xmlDom,_dataXML=this.dataXML;this.datasetExp=new Dataset();if(this.nullText!==null){var emptyEntity=new Entity();emptyEntity.setProperty(this.valueField,"");emptyEntity.setProperty(this.textField,this.nullText);this.setValue("",null,true);this.datasetExp.addEntity(emptyEntity)}if(_dataXML){this.datasetExp.appendDataset(Dataset.create(_dataXML,this.xpath));return}if(this.filterModel)if(this.version);else return;if(this.onLoadData()!==false){if(!this.queryAction)return;var ajax=new HideSubmit(this.queryAction),param="";ajax.sumbitType="4";if(this.queryParam)param+=this.queryParam;if(this.pageParam)param+=this.pageParam;if(this.initParamFunc){try{param+=eval(this.initParamFunc+"(this)")}catch(e){$handle(e)}}if(param=="")param=null;if(this.filterID){var form=$id(this.filterID);if(form)for(var i=0;i<form.elements.length;i++){var elem=form.elements[i];if(elem.name)ajax.addParam(elem.name,elem.value)}}if(this.paramList)for(i=0;i<this.paramList.length;i++){elem=this.paramList[i];if(elem)ajax.addParam(elem.key,elem.value)}ajax.loadData(param);this.xmlDom=ajax.retDom;this.isinit=true;if(this.xmlDom){var B=this.xmlDom.selectSingleNode("root/data/fieldMessage"),fieldMessage=getNodeValue(B);if(B&&fieldMessage){this.fieldMessage=fieldMessage;var fms=fieldMessage.split("$");if(fms.length>0)this.valueField=fms[0];if(fms.length>1)this.textField=fms[1];if(fms.length>2)this.filterField=fms[2];if(this.nullText!==null){emptyEntity=new Entity();emptyEntity.setProperty(this.valueField,"");emptyEntity.setProperty(this.textField,this.nullText);this.datasetExp.values[0]=emptyEntity}}}this.datasetExp.appendDataset(Dataset.create(this.xmlDom,this.xpath,null))}};ComboSelect.prototype.getEntityByRow=function($){if(!$)return null;var _=$.getAttribute("__entity_rowno")/1,A=this.datasetExp.get(_);return A};ComboSelect.prototype.disable=function(){this.disabled=true;this.inputObject.disabled=true;this.hiddenObject.disabled=true;this.hide()};ComboSelect.prototype.enable=function(){this.disabled=false;this.inputObject.disabled=false;this.hiddenObject.disabled=false};ComboSelect.prototype.setDisabled=function($){if($)this.disable();else this.enable();if($)this.eventObject.style.cursor="default";else this.eventObject.style.cursor="pointer"};ComboSelect.prototype.getDisabled=function($){return this.disabled};ComboSelect.prototype.setReadonly=function($){this.inputObject.readOnly=$||true};ComboSelect.prototype.setReadOnly=function($){this.readonly=$;this.inputObject.readOnly=$;if($)this.eventObject.style.cursor="default";else this.eventObject.style.cursor="pointer"};ComboSelect.prototype.getReadOnly=function($){return this.readonly};ComboSelect.prototype.firstOptionRow=function(A,$){var B=this.optionsTable.tBodies[0].rows;A=A||0;$=$||B.length;A=A<0?0:A;$=$<0?0:$;$=$>B.length?B.length:$;A=A>$?$:A;for(var _=A;_<$;_++)if(B[_].style.display!="none")return B[_];return null};ComboSelect.prototype.lastOptionRow=function(A,$){var B=this.optionsTable.tBodies[0].rows;A=A||0;$=$===0?0:($||B.length);A=A<0?0:A;$=$>B.length-1?B.length-1:$;$=$<0?0:$;A=A>$?$:A;if(B.length>0)for(var _=$;_>=A;_--)if(B[_].style.display!="none")return B[_];return null};ComboSelect.prototype.activePrevOption=function(A){A=A||this.activeOptionRow;var _=0;if(A)_=A.rowIndex-1;var $=this.lastOptionRow(0,_);if($&&$!=A)this.activeOption($)};ComboSelect.prototype.activeNextOption=function(A){A=A||this.activeOptionRow;var _=0;if(A)_=A.rowIndex+1;var $=this.firstOptionRow(_);if($&&$!=A)this.activeOption($)};ComboSelect.prototype.activeOption=function($){if(this.activeOptionRow)removeClass(this.activeOptionRow,"eos-selectoption");addClass($,"eos-selectoption");this.autoScroll($);this.activeOptionRow=$};ComboSelect.prototype.selectOption=function(row,refreshSub){this._showAll=true;var _change=this.selectOptionRow!=row;row=row||this.activeOptionRow;if(!row)return;var entity=this.getEntityByRow(row);if(entity){if(this.activeOptionRow)removeClass(this.activeOptionRow,"eos-selectoption");if(row.offsetTop<this.optionsDivCore.scrollTop+2)this.optionsDivCore.scrollTop=row.offsetTop;if(row.offsetTop>this.optionsDivCore.scrollTop+this.optionsDivCore.clientHeight-4)this.optionsDivCore.scrollTop=row.offsetTop-this.optionsDivCore.clientHeight+row.offsetHeight;this.selectEntity=entity;this.inputObject.value=this.selectEntity.getProperty(this.textField);this.hiddenObject.value=this.selectEntity.getProperty(this.valueField);if(this.activeOptionRow)removeClass(this.activeOptionRow,"eos-selectoption");this.selectOptionRow=row;this.activeOptionRow=row;addClass(this.activeOptionRow,"eos-selectoption");if(this.onChangeFunc&&!this.isFirst){if(typeof(this.onChangeFunc)=="string")this.onChangeFunc=eval(this.onChangeFunc);this.isFirst=false;_change&&this.onChangeFunc(this.selectEntity,this)}this.isFirst=false}if(refreshSub!==false)this.setSubComponent(entity)};ComboSelect.prototype.registerSubComponent=function(_){var $=PageControl.getOne(_);this.__subComponent.push($)};ComboSelect.prototype.setSubComponent=function(B){var $;if(B){$=B.name;B.name=this.submitXpath||$}for(var _=0;_<this.__subComponent.length;_++){var A=this.__subComponent[_];if(A&&A.freshFromEntity)A.freshFromEntity(B)}if(B)B.name=$};ComboSelect.prototype.freshFromEntity=function($){if(this.queryAction){if($)this.queryParam=$.toString();else this.queryParam=null;if(this.filterModel)if(this.isFreshFromEntity)return;else this.isFreshFromEntity=true;this.loadData()}else if(this.linkField)if($){this.datasetExp=$.getProperty(this.linkField);if(!this.datasetExp){this.datasetExp=new Dataset(this.linkField);$.setProperty(this.linkField,this.datasetExp)}}else this.datasetExp=new Dataset(this.linkField);this.refresh()};ComboSelect.prototype.refresh=function($){this.init();if(this.beforeRefresh()===false)return;var M=this;this.datasetExp=$||this.datasetExp;var O=this.datasetExp?this.datasetExp.getLength():0;if(this.noOrgOptionsHeight==true)this.optionsHeight=((O>10?10:O)*21+2);if(this.optionsDiv)removeElement(this.optionsDiv);this.optionsDiv=$createElement("div");this.optionsDiv.className="eos-combo-optiondiv";this.inputObject.value="";this.hiddenObject.value="";function J(){var $=eventManager.getElement();if($!=M.eventObject&&!M.inputObject.getAttribute("_isFocus")&&!M.eventObject.getAttribute("_isFocus")){if(!M.allowInput){M.inputObject.value=M.selectEntity.getProperty(M.textField);M.hiddenObject.value=M.selectEntity.getProperty(M.valueField)}M.hide()}}if(!this.optionsHeight){this.noOrgOptionsHeight=true;this.optionsHeight=((O>10?10:O)*21+2)}this.optionsDiv.style.height=this.optionsHeight;document.body.appendChild(this.optionsDiv);this.optionsDiv.onmousedown=function(){eventManager.stopEvent()};function _(_){_=_||window.event;var $=_.srcElement||_.target;eventManager.stopPropagation();if($.tagName.toLowerCase()!="tr")while(($=$.parentNode))if($.tagName&&$.tagName.toLowerCase()=="tr"&&$.getAttribute("__entity_rowno"))break;var A=getParentByTagName($,"table");return A&&A.className=="eos-combo-optiontable"?$:null}function I($){if(M.selectOptionRow)removeClass(M.selectOptionRow,"eos-selectoption");M.optionsDiv.setAttribute("_isOver",true);var A=_($);addClass(A,"eos-selectoption");if(M.activeOptionRow==A)return;if(M.activeOptionRow)removeClass(M.activeOptionRow,"eos-selectoption");M.activeOptionRow=A}function N($){M.optionsDiv.setAttribute("_isOver",false)}function B($){var B=_($);if(B)M.selectOption(B);M.hide();try{M.inputObject.focus()}catch(A){}}eventManager.add(this.optionsDiv,"mouseover",I);eventManager.add(this.optionsDiv,"mouseout",function(){setTimeout(N,300)});eventManager.add(this.optionsDiv,"click",B);function C(){eventManager.stopPropagation()}eventManager.add(this.optionsDiv,"mousedown",C);var A=["<div class=\"eos-combo-optiondiv-core\"><table  class=\"eos-combo-optiontable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" ><tbody>"];for(var D=0;D<O;D++){var L=this.datasetExp.get(D),E=L.getProperty(this.valueField),H=L.getProperty(this.textField);A.push("<tr __entity_rowno=\""+D+"\" >");A.push("<td><div><nobr>");A.push(H==""?" ":H);A.push("</nobr></div></td>");if(this.showValue){A.push("<td><div>");A.push(E);A.push("</div></td>")}A.push("</tr>")}A.push("</tbody></table ></div>");var F=window.isIE?"<iframe SCROLLING=\"no\" style=\"overflow:hidden;position:absolute;z-index:-1;width:expression(this.nextSibling.offsetWidth);height:expression(this.nextSibling.offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft)\" frameborder=\"0\" ></iframe>":"<span style=\"display:none;\"></span>";this.optionsDiv.innerHTML=F+A.join("\n");this.optionsDiv.childNodes[1].style.height=this.optionsDiv.style.height;this.optionsDiv.childNodes[1].style.width=this.optionsDiv.style.width;this.optionsDivCore=this.optionsDiv.childNodes[1];this.optionsTable=this.optionsDivCore.firstChild;var G=false;if(this.value)this.setValue(this.value,false);else if(this.optionsTable&&this.optionsTable.tBodies&&this.optionsTable.tBodies[0]){var K=this.optionsTable.tBodies[0].rows;if(K&&K.length>0){this.selectOption(K[0]);G=true}}if(!G)this.setSubComponent(this.getEntityByValue(this.value));this.afterRefresh()};ComboSelect.prototype.autoScroll=function(_){var C=_.offsetTop,$=C+_.offsetHeight,A=this.optionsDivCore.scrollTop,B=A+this.optionsDivCore.clientHeight;if(C<A)this.optionsDivCore.scrollTop=C;else if($>B)this.optionsDivCore.scrollTop=A+$-B};ComboSelect.prototype.boundTree=function(B,$,A){if($id(B)==null){alert("Can not find tree:"+treeID);return}var _;if($id(B).model!=null)_=$id(B+"_container");else _=$id(B+"_container").parentNode;$=$||"";A=A||"";this.afterRefresh=function(){this.hidden.value=$;this.text.value=A;this.optionsDiv.childNodes[1].appendChild(_);_.onclick=function(){eventManager.stopPropagation()}}};ComboSelect.prototype.beforeInit=function(){};ComboSelect.prototype.afterInit=function(){};ComboSelect.prototype.beforeLoadData=function(){};ComboSelect.prototype.afterLoadData=function(){};ComboSelect.prototype.beforeRefresh=function(){};ComboSelect.prototype.afterRefresh=function(){};var DATACELL_STYLE_ROW1="EOS_table_row",DATACELL_STYLE_ROW2="ROW_STYLE2_NOCSS",DATE_FORMAT="yyyy-MM-dd",TIME_FORMAT="HH:mm:ss",DATETIME_FORMAT="yyyy-MM-dd HH:mm:ss",PICTURE_BLANK=PICTURE_BLANK||"";function Datacell($){this.id=$;PageControl.add($,this);this.activeRow=null;this.activeCell=null;this.table=null;this.container=null;this.pilot=null;this.thead=null;this.tbody=null;this.isCount=false;this.entityName=null;this.queryAction=null;this.xpath=null;this.submitAction=null;this.datasetExp=null;this.sortParam=null;this.queryParam=null;this.pageParam=null;this.editor=null;this.fields=new Array();this.keys=new Object();this.bodyDiv=null;this.scrollEvent=true;this.fixedLeft=0;this.editorDiv=null;this.editorContainer=null;this.styleEntity=null;this.__subComponent=new Array();this.linkField=null;this.linkId=null;this.filterId=null;this.paramFormId=null;this.rowStyles=[DATACELL_STYLE_ROW1,DATACELL_STYLE_ROW2];this.styleRow=null;this.status=Datacell.STATUS_BLANK;this.isModefied=false;this.cellHeight=20;this.heightExceptBody=23+25;this.headHeight=23;this.toolBarHeight=25;this.showIndex=true;this.indexCol=null;this.sortArrow=null;this.__pagePilot=[];this.allowAdd=true;this.allowDel=true;this.readonly=false;this.initParamFunc=null;this.SortByServer=false;this.submitXpath=null;this.minColumnWidth=30;this.toolbarLocation=null;this.toolsList="nav,pagesize,edit,custom,info";this.pageSizeList="none";this.defaultColumnWidth=100;this.topToolbarDiv=$createElement("div",{className:"eos-grid-toolbar"});this.topToolbarDiv.style.display="none";this.bottomToolbarDiv=$createElement("div",{className:"eos-grid-toolbar"});this.topToolbarDiv.style.display="none";this.isFirstLoad=true;this.pageSize=10;this.datacellContainer=null;this.quickEdit=true;this.sortAt="client";this.rowSelectStyleClass="eos-row-selected";this.rowEvenStyleClass="eos-row-even";this.rowStyleClass="eos-row";this.headTextAlign="left";this.width=500;this.height=300;this.entityType=null}Datacell.prototype.syncRefresh=true;Datacell.prototype.refreshCell=function(D,A){var C=this,_=D.getAttribute("fieldId");A=A||C.keys[_];if(_==Datacell.__INDEX_NAME||C.beforeRefreshCell(D,A)===false)return;var B=D.firstChild,$=A.viewType;B.innerHTML=C.createCellValue(D,A)};Datacell.prototype.beforeKeyDown=function(){};Datacell.prototype.deletetrfun=function(){if(this.newTR){this.datacellTable.deleteRow(this.newTR.rowIndex);this.freezeBodyTable.deleteRow(this.newFRow.rowIndex);this.newTR=null}};Datacell.prototype.clicktrfun=function(_){if(this.newTR){this.deletetrfun();if(this.tempTr==_)return}if(this.getEntity(_).status==Entity.STATUS_NEW)return;this.tempTr=_;this.newTR=this.datacellTable.insertRow(_.rowIndex+1);var A=this.newTR.insertCell(0);A.colSpan=_.cells.length;this.newFRowt=this.styleFreezeRow.cloneNode(true);this.newFRow=this.freezeBodyTable.insertRow(_.rowIndex+1);this.newFRow.className=this.newFRowt.className;var $=this.newFRow.insertCell(0);this.newFRow.style.height=this.newFRow_height;A.style.height=this.newFRow_height;this.iframeStr=this.organ_url(this.iframeStr,this.newTR,this.newFRow);A.innerHTML=this.iframeStr};Datacell.prototype.arfresh_initparam=function(A,$){var _=this.activeRow;this.datacellTable=_.parentNode;this.newFRow_height=$;this.iframeStr=A;this.newTR=null;while(this.datacellTable.tagName!="TABLE")this.datacellTable=this.datacellTable.parentNode;this.onClickHead=function(A,_,B,$){this.deletetrfun()};this.onClickRow=function(B,A,_,$){this.clicktrfun(B)};this.beforeAdd=function($){this.deletetrfun()};this.beforeDel=function($){this.deletetrfun()}};Datacell.prototype.organ_url=function(_,$,A){return _};Datacell.prototype.addRow_ExtEasy=function($){var _=$||this.styleEntity.clone(true);_.status=Entity.STATUS_NEW;if(!this.datasetExp)return null;var C=this.styleRow.cloneNode(true);C.setAttribute("__entity_rowno",this.datasetExp.getLength());this.datasetExp.addEntity(_);this.tbody.appendChild(C);for(var B=0;B<C.cells.length;B++)C.cells[B].setAttribute("fieldId",this.fields[B].fieldId);addClass(C,(this.tbody.rows.length+1)%2==0?this.rowEvenStyleClass:"");var A=this.styleFreezeRow.cloneNode(true);A.className=C.className;A.appendChild(this.styleIndexColumn.cloneNode(true));this.freezeBodyTable.tBodies[0].appendChild(A);this.refreshRow(C);this.afterAdd_Ext(C);return C};Datacell.prototype.deleteRow_ExtEasy=function($){if($&&$.parentNode)$.parentNode.removeChild($);if(this.checkgroup&&this.checkgroup.getRows()&&$&&$.rowbox)$remove(this.checkgroup.getRows(),$.rowbox)};Datacell.prototype.activeMe=function(){Datacell.activeGrid=this};Datacell.prototype.onPageLoad=function(){PageControl.registerRelation(this.linkId,this.id);var _=this;function $(){_.init();_.loadData();_.refresh();if(isFF){_.autoResizeS1();_.autoResizeS2()}}eventManager.add(window,"load",$)};Datacell.prototype.createCellValue=function(cell,field){if(!cell)return;var row=cell.parentNode,entity=this.getEntity(row),key=cell.getAttribute("fieldId");if(key==Datacell.__INDEX_NAME)return;var field=this.keys[key],cellText=entity.getProperty(field.fieldName);if(field.onRefreshFunc){if(typeof(field.onRefreshFunc)=="string")field.onRefreshFunc=eval(field.onRefreshFunc);cellText=field.onRefreshFunc(cellText,entity,cell.parentNode.rowIndex,cell.cellIndex,this)}else if(field.expression)cellText=runExpression(field.template,entity);else if(field.editor)cellText=htmlConversion(field.editor.getDisplayValue(cellText));else cellText=htmlConversion(cellText===undefined||cellText===null?field.nullText:cellText);cellText=cellText===undefined||cellText===null?htmlConversion(field.nullText):cellText;return cellText};Datacell.prototype.clear=function(){if(this.tbody&&this.table){var $=this.tbody.cloneNode(false);this.table.replaceChild($,this.tbody);this.tbody=$}if(this.datasetExp)this.datasetExp.clear();this.datasetExp=null;this.styleRow=null};Datacell.prototype.clearup=function(){for(var $ in this){try{this[$]=null}catch(_){$handle(_)}}};Datacell.prototype.getField=function(A){if(A===null||A===undefined)return A;if(typeof A=="number")return this.fields[A];if(typeof A=="string")return this.getFieldByName(A);if(String(A.tagName).toLowerCase()=="td"){var $=A.getAttribute("fieldId");if($==Datacell.__INDEX_NAME)return null;var _=this.keys[$];return _}return A};Datacell.prototype.getFieldByName=function(_){for(var $=0;$<this.fields.length;$++)if(this.fields[$].fieldName==_)return this.fields[$];return null};Datacell.prototype.getFieldsByName=function(_){var A=[];for(var $=0;$<this.fields.length;$++)if(this.fields[$].fieldName==_)A.push(this.fields[$]);return A};Datacell.prototype.getFieldCount=function(){return this.fields.length};Datacell.prototype.setTitle=function(_,$){_=this.getField(_);if(_){_.labelSpan.innerHTML=$;var A=_.frozeHeadCell;if(A&&A.firstChild&&A.firstChild.firstChild)A.firstChild.firstChild.innerHTML=$}};Datacell.prototype.setAllowModify=function(_,$){_=this.getField(_);if(_)_.allowModify=$};Datacell.prototype.copyRow=function($){return this.cloneEntity(null,$)};Datacell.prototype.cloneEntity=function(_,$){_=_||this.getEntity($||this.activeRow);if(_){_=_.clone();_.status=Entity.STATUS_NEW}return _};Datacell.prototype.getCellValue=function(B){var _=B.parentNode,A=_?this.getEntity(_):null;if(A){var $=this.getField(B),C=$.fieldName;return A.getProperty(C)}return null};Datacell.prototype.setCellValue=function(B,_){if(!B)return false;var C=B.parentNode,$=C?this.getEntity(C):null;if($){var D=this.getField(B),A=D.fieldName;$.setProperty(A,_);this.refreshCell(B);this.refreshRow(C);$.status=Entity.STATUS_MODIFIED;this.isModefied=true;return true}return false};Datacell.prototype.getCell=function($,A){var _=parseInt($);if(!isNaN(_)){var B=this.tbody.rows[_];if(B)return this.getCellByRow(B,A)}return null};Datacell.prototype.getCellByRow=function(B,A){if(isNaN(A)){var $=A;for(var _=0;_<B.cells.length;_++)if(B.cells[_].getAttribute("fieldId")==$)return B.cells[_]}else return B.cells[A]};Datacell.prototype.getCellAtRow=function(_,A){var $=this.getRowByCell(_);return this.getCellByRow($,A)};Datacell.prototype.getCellByCurrRow=function($){if(this.activeRow)return this.getCellByRow(this.activeRow,$);else return null};Datacell.prototype.getRow=function($){if(typeof $=="number")return this.getRowAt($);if($.tagName&&$.tagName.toLowerCase()=="td")return $.parentNode;return $};Datacell.prototype.getRowAt=function($){try{return this.table.tBodies[0].rows[$]}catch(_){return null}};Datacell.prototype.getRowByCell=function($){if($)if($.parentNode&&$.parentNode.tagName&&$.parentNode.tagName.toLowerCase()=="tr")return $.parentNode;return null};Datacell.prototype.getEntityByCell=function(_){var $=this.getRowByCell(_);if($)return this.getEntity($);return null};Datacell.prototype.getCurrRow=function(){return this.activeRow};Datacell.prototype.getValueForEdit=function($,_){return $.getProperty(_)};Datacell.prototype.init=function(){if(this.inited===true||this.beforeInit()===false)return;if(this.entityType&&!(this.entityType.indexOf("sdo:")==0||this.entityType.indexOf("java:")==0))this.entityType="sdo:"+this.entityType;this.PAGE_INFO=this.PAGE_INFO||PAGE_INFO;this.PAGE_RECORDINFO=this.PAGE_RECORDINFO||PAGE_RECORDINFO;this.PAGE_INFO_NOCOUNT=this.PAGE_INFO_NOCOUNT||PAGE_INFO_NOCOUNT;this.PAGE_RECORDINFO_NOCOUNT=this.PAGE_RECORDINFO_NOCOUNT||PAGE_RECORDINFO_NOCOUNT;this.activeMe();this.datacellContainer=$id(this.id+"_container");if(this.freezeNumber>0)this.showIndex=true;this.tableMarginLeft=this.showIndex?12:0;this.containerTable=$id(this.id+"_container_table");if(isIE)this.containerTable.className="eos-b-ie "+this.containerTable.className;if((""+this.width).indexOf("%")<1&&(""+this.width).indexOf("p")<1)this.width=parseInt(this.width)+"px";if((""+this.height).indexOf("%")<1&&(""+this.height).indexOf("p")<1)this.height=parseInt(this.height)+"px";if(this.freezeNumber&&this.freezeNumber>this.fields.length)this.freezeNumber=this.fields.length;this.paramFormId=this.paramFormId||this.filterId;this.cTop=0;if(!this.toolbarLocation||this.toolbarLocation=="null"){this.containerTD=this.containerTable.tBodies[0].rows[0].cells[0];this.containerTable.tBodies[0].rows[1].style.height="0px";this.containerTable.tBodies[0].rows[1].style.display="none"}else if(this.toolbarLocation=="top"){this.containerTD=this.containerTable.tBodies[0].rows[1].cells[0];this.toolbarParent=this.containerTable.tBodies[0].rows[0].cells[0];this.toolbarParent.appendChild(this.topToolbarDiv);this.toolbarParent.style.height="25px";this.topToolbarDiv.style.display="block";this.topToolbarDiv.style.borderBottomWidth="1px";this.cTop=this.topToolbarDiv.offsetHeight}else{this.containerTD=this.containerTable.tBodies[0].rows[0].cells[0];this.toolbarParent=this.containerTable.tBodies[0].rows[1].cells[0];this.toolbarParent.appendChild(this.bottomToolbarDiv);this.toolbarParent.style.height="25px";this.bottomToolbarDiv.style.display="block";this.bottomToolbarDiv.style.borderTopWidth="1px"}this.container=$createElement("div");this.container.className="eos-grid";this.containerTD.appendChild(this.container);this.container.innerHTML="";this.container.style.display="";this.viewport=$createElement("div");this.viewport.className="eos-viewport";this.container.style.width="100%";this.containerTable.style.width=this.width;this.containerTable.style.height=this.height;this.bodyDiv=$createElement("div");this.bodyDiv.className="eos-body-div";this.bodyDivHeight=this.containerTD.offsetHeight-this.headHeight;this.bodyDivHeight=parseInt(this.bodyDivHeight);if(this.bodyDivHeight<0)this.bodyDivHeight=parseInt(this.height)-(this.headHeight+this.toolBarHeight);if(this.bodyDivHeight>0)this.bodyDiv.style.height=this.bodyDivHeight+"px";this.headDiv=$createElement("div");this.headDiv.className="eos-head-div";this.headWrap=$createElement("div");this.headWrap.style.width="3000px";this.headDiv.appendChild(this.headWrap);this.container.appendChild(this.viewport);this.cTop=0;if(this.toolbarLocation=="top"){this.topToolbarDiv.style.display="block";this.topToolbarDiv.style.borderBottomWidth="1px";this.cTop=this.topToolbarDiv.offsetHeight}else{this.bottomToolbarDiv.style.display="block";this.bottomToolbarDiv.style.borderTopWidth="1px"}this.viewport.appendChild(this.headDiv);this.viewport.appendChild(this.bodyDiv);this.viewport.style.width="100%";this.headDiv.style.width="100%";this.bodyDiv.style.width="100%";this.container.style.display="";this.splitLine=$createElement("div",{className:"eos-split-line"});this.splitLine.style.top=this.cTop+"px";this.container.appendChild(this.splitLine);this.gridMask=$createElement("div",{className:"eos-grid-mask"});this.gridMask.style.width=this.container.style.width;this.gridMask.style.height=this.container.style.height;this.container.appendChild(this.gridMask);this.initPageParam();this.initCSS();this.initHead();this.initFreezeZone();this.initEvent();for(var $=0;$<this.__pagePilot.length;$++){var _=this.__pagePilot[$];_.build()}this.inited=true;this.afterInit()};Datacell.prototype.selectEventRow=function(){var _=eventManager.getElement(),$=getParentByTagName(_,"tr");this.selectRow($);return $};Datacell.prototype.showCellEditor=function(B,_){if(this.activeEditor&&this.activeCell){this.editorContainer=$id(this.id+"_"+this.activeField.fieldId+"_field_editor_container")||$id(this.activeField.fieldId+"_field_editor_container");var B=this.getValueForEdit(this.getEntity(this.activeCell),this.activeField.fieldName);if(this.dict)B=getDictKey(this.dict,B);try{if(this.editorContainer.parentNode!=document.body)document.body.appendChild(this.editorContainer);this.activeEditor.hideEditor();var $=getPosition(this.activeCell);if(this.activeEditor.setPosition){this.editorContainer.style.display="";this.editorContainer.onmousedown=function(){eventManager.stopEvent()};this.activeEditor.setPosition($.left,$.top,this.activeCell.offsetWidth,this.activeCell.offsetHeight);var A={};A.editor=this.activeEditor;A.datacell=this;A.hide=function(){if(this.datacell){this.datacell.hideCellEditor();Datacell.activeGrid=null}};PageControl.addtoStack(A);this.activeEditor.showEditor(this)}this.activeEditor.setValue(B===undefined||B===null?"":B)}catch(C){}}};Datacell.prototype.hideCellEditor=function(){if(this.activeCell&&this.activeEditor){if(this.editing){var $=this.activeCell.parentNode,C=this.activeEditor.getValue(),A=this.activeValue,D=C;if(A!=D){var _=this.activeCell.getAttribute("fieldId");if(_==Datacell.__INDEX_NAME)return true;if(!this.activeEditor.validate()){this.editing=false;this.unlocked();this.endEdit();return false}if(this.onUpdateRow(this.activeCell.parentNode)){var E=this.onUpdateCell(this.activeCell,this.activeEntity,this.activeField.fieldName,C);(E!==false)&&this.updateEntity(this.activeEntity,this.activeField.fieldName,C);this.refreshAfterEdit();this.isModefied=true;if(this.linkId&&this.linkField){var F=PageControl.getOne(this.linkId);if(F){if(F.activeRow)F.getEntity(F.activeRow).status=Entity.STATUS_MODIFIED;F.refreshAfterEdit();F.isModefied=true}}this.activeValue=C}}this.afterEdit(D,A,this)}this.editing=false;try{this.activeEditor.hideEditor()}catch(B){}return true}return true};Datacell.prototype.refreshAfterEdit=function(){if(this.syncRefresh)this.refreshRow(this.activeCell?this.activeCell.parentNode:this.activeRow);else this.refreshCell(this.activeCell,this.activeField)};Datacell.prototype.startEdit=function(){if(!this.activeEditor||!this.activeField||!this.activeEntity||!this.activeField.allowModify&&this.activeEntity.status!=Entity.STATUS_NEW)return;this.activeMe();var $=this.getActiveCell();if(this.beforeEdit($,$.cellIndex,$.parentNode.rowIndex)==false)return;this.editing=true;this.showCellEditor(this.activeValue,this.activeEntity)};Datacell.prototype.endEdit=function(){this.hideCellEditor();this.editing=false;this.beforeShowEditor=false};Datacell.prototype._onKeyDown=function(F){if(this.beforeKeyDown&&this.beforeKeyDown())return false;F=F||window.event;var $=this.activeCell,B=null,C=F.keyCode,_=C;if(_==EOSKey.ENTER)C=EOSKey.TAB;else if(_==EOSKey.TAB)C=EOSKey.ENTER;if(C==EOSKey.ESC){eventManager.stopEvent();this.editing=false;this.endEdit()}else if(C==EOSKey.ENTER){var E=eventManager.getElement();if(E!=null&&E.tagName.toLowerCase()=="textarea")return;eventManager.stopEvent();this.editing?this.endEdit():this.startEdit()}else if(C==EOSKey.TAB){var H=this.editing;eventManager.stopEvent();this.endEdit();B=nextElement($);while(B&&this.getField(B.cellIndex).width<1)B=nextElement(B);if(!B){B=nextElement($.parentNode);if(B)B=B.cells[0]}this.setActiveCell(F,B);if(H){var G=this;window.setTimeout(function(){G.startEdit()},10)}}else if($&&!this.editing){switch(C){case EOSKey.LEFT:eventManager.stopEvent();B=prevElement($);if(!B){B=prevElement($.parentNode);if(B)B=B.cells[B.cells.length-1]}break;case EOSKey.RIGHT:eventManager.stopEvent();B=nextElement($);if(!B){B=nextElement($.parentNode);if(B)B=B.cells[0]}break;case EOSKey.DOWN:eventManager.stopEvent();B=nextElement($.parentNode);if(B)B=B.cells[$.cellIndex];break;case EOSKey.UP:eventManager.stopEvent();B=prevElement($.parentNode);if(B)B=B.cells[$.cellIndex];break}if(B){eventManager.stopEvent();this.setActiveCell(F,B);var D=this.getActiveCell(),A=this.getRowByCell(D);if(A!=this.getActiveRow())this.selectRow(A)}}};Datacell.prototype.autoScroll=function(){var E=this.activeCell.offsetLeft+this.tableMarginLeft,_=E+this.activeCell.offsetWidth,C=this.activeCell.offsetTop,G=C+this.activeCell.offsetHeight,F=this.bodyDiv.scrollLeft,$=this.bodyDiv.scrollTop,B=F+this.bodyDiv.clientWidth,D=$+this.bodyDiv.clientHeight,A=this.freezeHeadDiv.offsetWidth;if(E<F)this.bodyDiv.scrollLeft=E-this.tableMarginLeft;else if(_>B)this.bodyDiv.scrollLeft=F+_-B;if(C<$)this.bodyDiv.scrollTop=C;else if(G>D)this.bodyDiv.scrollTop=$+G-D};Datacell.prototype.setActiveCell=function($,_){if(arguments.length==1)if($!=null&&$.tagName.toLowerCase()=="td"){_=$;$=null}this.activeMe();$=$||window.event;var B=$?($.srcElement||$.target):null;_=_||getEventTargetByTagName($,"td");if(_){var A=_.innerHTML.toLowerCase();if(_!=this.activeCell){this.activeField=this.getField(_);this.activeEditor=this.activeField?this.activeField.editor:null;removeClass(this.activeCell,"eos-cell-actived");if(A.indexOf("<select")<0)addClass(_,"eos-cell-actived");this.activeCell=_}this.activeEditRow=this.activeCell.parentNode;this.activeEntity=this.getEntity(this.activeEditRow);this.activeEntityBackup=this.activeEntity.clone();if(this.activeEntity&&this.activeField)this.activeValue=this.activeEntity.getProperty(this.activeField.fieldName);if(A.indexOf("<select")<0)this.autoScroll()}return _};Datacell.prototype.initEvent=function(){var A=this;function $($){A.activeMe();A.syncScroll();if(A.beforeShowEditor!==true)A.endEdit()}eventManager.add(this.bodyDiv,"scroll",$);function D($){A.activeMe();A.endEdit();var B=getEventTargetByTagName($,"td"),C=B?B.parentNode:null;if(B&&B!==A.containerTD){A.selectRow(C);A.setActiveCell($,B);A.processCheckBox($,B);var D=B.cellIndex,_=C.rowIndex;A.onClickCell(B,D,_,A.activeEntity,A.fields[D],A);A.onClickRow(C,_,A.activeEntity,A);A.beforeShowEditor=true;A.startEdit()}}eventManager.add(this.bodyDiv,"click",D);function F($){A.activeMe();A.endEdit()}eventManager.add(this.headDiv,"click",F);function B(){A.activeMe()}try{eventManager.add(this.viewport,"mouseup",B);eventManager.add(this.headDiv,"mouseup",B);eventManager.add(this.bodyDiv,"mouseup",B);eventManager.add(this.datacellContainer,"mouseup",B);eventManager.add(this.containerTable,"mouseup",B);eventManager.add(this.container,"mouseup",B);eventManager.add(this.topToolbarDiv,"mouseup",B);eventManager.add(this.bottomToolbarDiv,"mouseup",B);eventManager.add(this.toolbarParent,"mouseup",B)}catch(_){}function C($){A.activeMe();$=$||window.event;var B=$.srcElement||$.target;eventManager.stopPropagation();if(B&&B.tagName.toLowerCase()!="td")while((B=B.parentNode))if(B.tagName&&B.tagName.toLowerCase()=="td")break;if(!B.parentNode)return;var _=B.parentNode.rowIndex,C=B.cellIndex-1;if(C<0){A.selectRow(A.table.tBodies[0].rows[_],true);return}var D=A.table.tBodies[0].rows[_].cells[C];if(A.activeCell==D){A.activeFreezeCell=B;return}A.activeFreezeCell=B}eventManager.add(this.freezeBodyDiv,"click",C);function E(){Datacell.onWindowResize(A)}if(isIE)if((""+A.width).indexOf("%")>0||(""+A.height).indexOf("%")>0)eventManager.add(window,"resize",E);if(isFF)if((""+A.width).indexOf("%")>0||(""+A.height).indexOf("%")>0)if(registerTopContainer(this.datacellContainer))EOSResizeObjects.push(this);function G(){A.clearup()}eventManager.add(window,"unload",G);if(!Datacell.initGlobalEvent.hasInit){Datacell.initGlobalEvent();Datacell.initGlobalEvent.hasInit=true}};Datacell.prototype.processCheckBox=function($,C){var _=this,A=$.srcElement||$.target;if("INPUT"==A.tagName.toUpperCase())if(A.getAttribute("swidthCheckbox")=="true"&&A.getAttribute("type")=="checkbox"){var B=_.getCellValue(C),D=_.fields[C.cellIndex];B=B==D.checkedValue?D.unCheckedValue:D.checkedValue;_.setCellValue(C,B)}};Datacell.prototype.startColumnResize=function(A,_){if(_.allowResize===false)return;A=A||window.event;this.viewportXY=getElementXY(this.viewport);this.isColumnResizing=true;var $=eventManager.getPointX();_.oldRightX=$-this.viewportXY[0];this.splitLine.style.left=_.oldRightX+"px";this.splitLine.style.height=this.viewport.offsetHeight+"px";this.splitLine.style.display="block";this.headDiv.style.cursor="col-resize";this.gridMask.style.cursor="col-resize";this.gridMask.style.display="block";this.resizeColumn=_};Datacell.prototype.syncScroll=function(){this.headDiv.scrollLeft=this.bodyDiv.scrollLeft;this.freezeBodyDiv.scrollTop=this.bodyDiv.scrollTop};Datacell.prototype.setColumnWidth=function(_,$){_=this.getField(_);$=$<this.minColumnWidth?this.minColumnWidth:$;_.width=$;_.rules.style.width=_.width+"px"};Datacell.prototype.setFieldEditor=function(A,_){A=this.getField(A);var C=null;_=_||A.editId;if(_)C=Datacell.$editor($id(_));if(!C){var B=$id(this.id+"_"+A.fieldId+"_field_editor_container")||$id(A.fieldId+"_field_editor_container"),$=firstElement(B);if(B&&$){_=$.id;if(_&&_.indexOf("_container")>0){_=_.substring(0,_.length-10);C=Datacell.$editor($o(_)||$id(_))}else C=Datacell.$editor($)}}A.editId=_;A.editor=C;if(C)C.hideEditor()};Datacell.prototype.initCSS=function(){this.viewportXY=getElementXY(this.viewport);var A=[],_=this;for(var B=0;B<this.fields.length;B++){var $=this.fields[B];$.width=parseInt($.width||this.defaultColumnWidth);$.styleClass="eos-dc-col-"+this.id+"-"+B;$.rules=createStyle($.styleClass,document);$.align=$.align||null;$.alignStyle=$.align?"text-align:"+$.align+";":"";A[B]="."+$.styleClass+" { width:"+$.width+"px;  "+$.alignStyle+" }";$.rules.style.width=$.width+"px";if($.align)$.rules.style.textAlign=$.align;$.allowModify=$.allowModify===undefined||$.allowModify===null?!_.readonly:!!$.allowModify;this.setFieldEditor($)}if(1==2&&!this.addedCSS){CSSUtil.createStyleSheet(A.join("\n"),this.id+"_style");this.SCROLLBAR_WIDTH=16;this.addedCSS=true}};Datacell.prototype.initAllRows=function(_){if(!_&&this.allTR&&this.allTR.length>0)return this.allTR;this.allTR=[];var A=this.table.tBodies[0].rows;for(var $=0;$<A.length;$++)this.allTR[$]=A[$];return this.allTR};Datacell.prototype.refreshRowStyle=function(){this.initAllRows(true);var A=this.freezeHeadTable?this.freezeBodyTable.tBodies[0].rows:[];for(var _=0;_<this.allTR.length;_++){var $=this.allTR[_];$.className=$.className.replace(this.rowEvenStyleClass,"");if(_%2==0)$.className=$.className+" "+this.rowEvenStyleClass;else $.className=$.className.replace(this.rowEvenStyleClass,"");var B=A[_]||{};B.className=$.className}};Datacell.prototype.getCurrentRowCount=function(){var $=this.table.tBodies[0].rows;return $?$.length:0};Datacell.prototype.getPageRowCount=function(){var $=0;if(this.datasetExp){$=this.getCurrentRowCount();$=$-(this.datasetExp.getInsertEntities()?this.datasetExp.getInsertEntities().length:0);$=$+(this.datasetExp.getRemovedEntities()?this.datasetExp.getRemovedEntities().length:0)}return $};Datacell.prototype.getTotalRowCount=function(){if(this.__pagePilot&&this.__pagePilot[0])return this.__pagePilot[0].count||0;return-1};Datacell.prototype.getAllRows=function($){this.initAllRows($);return this.allTR};Datacell.prototype.freezeColumn=function(D){var C=this.freezeHeadTable.tBodies[0].rows;for(var E=0;E<D;E++){var G=this.fields[E];G.frozeHeadCell=this.headTable.tBodies[0].rows[0].cells[E].cloneNode(true);G.frozeSortIcon=G.frozeHeadCell.getElementsByTagName("span")[1];G.frozeSplitter=G.frozeSortIcon.nextSibling;if(C.length>0)C[0].appendChild(G.frozeHeadCell)}this.initAllRows();C=this.freezeBodyTable.tBodies[0].rows;var _=this.allTR.length;for(var A=C.length;A<_-C.length;A++){var $=this.styleFreezeRow.cloneNode(true);$.className=this.allTR[A].className;$.appendChild(this.styleIndexColumn.cloneNode(true));this.freezeBodyTable.tBodies[0].appendChild($)}for(var B=0;B<_;B++)for(E=0;E<D;E++){var F=this.allTR[B].cells[E].cloneNode(true);C[B].appendChild(F)}};Datacell.prototype.quickSort=function($,I,K,A,G){var H=this,C=$,D=I+1,J=D,E=H.allTR,_=E[$],F=K(this,_,A),B;if(G){while(true){while(++C<I&&K(this,E[C],A)>=F);while(--D>$&&K(this,E[D],A)<=F);if(C>=D)break;B=E[C];E[C]=E[D];E[D]=B}}else while(true){while(++C<I&&K(this,E[C],A)<=F);while(--D>$&&K(this,E[D],A)>=F);if(C>=D)break;B=E[C];E[C]=E[D];E[D]=B}E[$]=E[D];E[D]=_;D-=1;if($<D)H.quickSort($,D,K,A,G);D+=2;if(D<I)H.quickSort(D,I,K,A,G);return E};Datacell.prototype.doSort=function(F){if(!F.sortAt||F.sortAt=="null"||F.sortAt=="none"||F.sortAt=="undefined")return;this.initAllRows();if(this.allTR.length<1)return;if(this.lastSortField){removeClass(this.lastSortField.sortIcon,"eos-hd-asc");removeClass(this.lastSortField.frozeSortIcon,"eos-hd-asc");removeClass(this.lastSortField.sortIcon,"eos-hd-desc");removeClass(this.lastSortField.frozeSortIcon,"eos-hd-desc")}if(F.sorted=="asc"){F.sorted="desc";addClass(F.sortIcon,"eos-hd-desc");addClass(F.frozeSortIcon,"eos-hd-desc")}else if(F.sorted=="desc")F.sorted="";else{F.sorted="asc";addClass(F.sortIcon,"eos-hd-asc");addClass(F.frozeSortIcon,"eos-hd-asc")}this.lastSortField=F;if(F.sortAt){F.sortAt=(""+F.sortAt).toLowerCase();if(F.sortAt=="server"||F.sortAt.indexOf("s")==0){var H=["<_orderby>","<_property>",F.fieldName,"</_property>","<_sort>",F.sorted,"</_sort>","</_orderby>"];this.sortParam=H.join("\n");try{this.endEdit()}catch(D){}var A=0;if(!this.isCount)A=-1;var G=this.setPageParam(0,this.pageSize,A,this.isCount);this.gotoPage(G);return}}if(F.sorted)this.quickSort(0,this.allTR.length-1,Datacell.getSortValue,F.fieldName,F.sorted=="desc");else this.quickSort(0,this.allTR.length-1,Datacell.getSortDefaultValue,F.fieldName,F.sorted=="desc");var _=this.freezeBodyTable.tBodies[0].rows,E=this.showIndex?1:0,K=document.createDocumentFragment();for(var J=0;J<this.allTR.length;J++){var B=this.allTR[J];B.className=B.className.replace(this.rowEvenStyleClass,"");if(J%2==0)B.className=B.className+" "+this.rowEvenStyleClass;else B.className=B.className.replace(this.rowEvenStyleClass,"");for(var $=0;$<this.freezeNumber;$++){var C=_[J].cells[$+E],I=B.cells[$].cloneNode(true);_[J].className=B.className;_[J].replaceChild(I,C)}K.appendChild(B)}this.table.tBodies[0].appendChild(K)};Datacell.prototype.initHeadEvent=function(){if(this.hasInitHeadEvent)return;var _=this,A=_.fields.length;for(var B=0;B<A;B++){var $=_.fields[B];(function($){eventManager.add($.splitter,"mousedown",function(A){_.startColumnResize(A,$)});eventManager.add($.frozeSplitter,"mousedown",function(A){_.startColumnResize(A,$)});eventManager.add($.headCell,"mouseover",function(_){addClass($.headCell,"eos-hd-row-over")});eventManager.add($.frozeHeadCell,"mouseover",function(_){addClass($.frozeHeadCell,"eos-hd-row-over")});eventManager.add($.headCell,"mouseout",function(_){removeClass($.headCell,"eos-hd-row-over")});eventManager.add($.frozeHeadCell,"mouseout",function(_){removeClass($.frozeHeadCell,"eos-hd-row-over")});eventManager.add($.headCell,"click",function(A){_.onClickHead($.headCell,B,$,_);_.doSort($)});eventManager.add($.frozeHeadCell,"click",function(A){_.doSort($)})})($)}this.hasInitHeadEvent=true};Datacell.prototype.initHead=function(){this.headTable=$createElement("table",{className:"eos-head-table",cellSpacing:"0",cellPadding:"0",border:"0"});this.headWrap.appendChild(this.headTable);this.headTbody=$createElement("tbody");this.headTable.appendChild(this.headTbody);var I=this.fields.length,H=[];for(var E=0;E<I;E++){this.keys[this.fields[E].fieldId]=this.fields[E];H.push(this.fields[E].fieldId)}var G=$createElement("tr");G.className="eos-hd-row";this.headTbody.appendChild(G);this.styleRow=$createElement("tr",{className:this.rowStyleClass});this.styleFreezeRow=$createElement("tr",{className:this.rowStyleClass});var D=this.getSubmitXpath(),C=false;if(!this.styleEntity){this.styleEntity=this.styleEntity||new Entity(D);this.styleEntity.id=0;this.styleEntity.__type=this.entityType;C=true}for(var F=0;F<I;F++){var J=$createElement("td"),_=this.fields[F];if(C)this.initStyleField(_);J.className=_.styleClass;if(_.width<1)J.style.display="none";J.style.textAlign=this.headTextAlign;J.innerHTML="<div class=\"eos-hd-inner "+_.styleClass+"\" unselectable=\"on\" style=\"text-align:left\" >"+"<span>"+_.label+"</span>"+"<div class=\"eos-hd-tool\" ><span class=\"eos-hd-icon\"></span><span class=\"eos-hd-split\">&#160;</span></div>"+"</div>";G.appendChild(J);_.headCell=J;_.labelSpan=J.firstChild.firstChild;_.sortIcon=J.getElementsByTagName("span")[1];_.splitter=_.sortIcon.nextSibling;_.splitter.colID=F;_.splitter.style.cursor="col-resize";_.defaultValue=_.defaultValue||"";_.sortAt=_.sortAt||"client";_.nullText=_.nullText||"";_.template=_.expression?compileTemplate(_.expression):null;var B=$createElement("td",{innerHTML:"<div class=\"eos-inner "+_.styleClass+"\"  ></div>",className:_.styleClass});B.setAttribute("name",_.fieldId);this.styleRow.appendChild(B)}var A=false;if(!this.datasetExp)this.datasetExp=new Dataset(this.entityName);var $=0;return};Datacell.prototype.initStyleField=function(_){if(_.editType=="entity"){var $=new Entity(_.fieldName);this.styleEntity.setProperty(_.fieldName,$)}else if(_.editType=="dataset"){$=new Dataset(_.fieldName);this.styleEntity.setProperty(_.fieldName,$)}else if(_.defaultValue!==null&&_.defaultValue!==undefined)this.styleEntity.setProperty(_.fieldName,_.defaultValue);else this.styleEntity.setProperty(_.fieldName,"")};Datacell.prototype.initFreezeZone=function(){this.freezeHeadDiv=$createElement("div",{className:"eos-freeze-div"});this.freezeBodyDiv=$createElement("div",{className:"eos-freeze-div"});this.viewport.appendChild(this.freezeHeadDiv);this.viewport.appendChild(this.freezeBodyDiv);this.cTop=0;this.freezeHeadDiv.style.top=this.cTop+"px";this.freezeBodyDiv.style.top=this.cTop+this.headHeight+"px";this.freezeHeadTable=$createElement("table",{id:this.headTable.id+"_freeze",className:"eos-head-table",cellSpacing:"0",cellPadding:"0",border:"0"});this.freezeHeadDiv.appendChild(this.freezeHeadTable)};Datacell.prototype.initBody=function(){var tableStartHTML="<table class=\"eos-table\" cellSpacing=\"0\"  cellPadding=\"0\" border=\"0\" ><tbody>",trHTML=["<tr class=\""+this.rowStyleClass," "+this.rowEvenStyleClass,"\" __entity_rowno=\"","\" >\n","</tr>\n"],colNum=this.fields.length,rn=0,tableHTML=[],rowHTML,freezeTableHTML=[tableStartHTML],indexColumnWidth=this.tableMarginLeft-(isBorderBox?0:2),indexColumnDivWidth=this.tableMarginLeft-(isBorderBox?0:4),tdStyleClass=isIE?"style=\"width:"+this.tableMarginLeft+"px;\"":"",divStyleClass=isIE?"":"style=\"width:"+(this.tableMarginLeft-(isBorderBox?0:4))+"px;\"",indexColumnCell=["<td class=\"eos-index-col\" "+tdStyleClass+" ><div class=\"eos-inner\" style=\"width:"+indexColumnDivWidth+"px\" >","</div></td>"];this.styleIndexColumn=$createElement("td",{className:"eos-index-col"});if(isIE)this.styleIndexColumn.style.width=this.tableMarginLeft+"px";this.styleIndexColumn.innerHTML="<div class=\"eos-inner\" "+divStyleClass+" >&#160;</div>";if(this.freezeBodyTable){removeElement(this.freezeBodyTable);removeElement(this.freezeHeadTable.tBodies[0])}this.freezeHeadTable.appendChild($createElement("tbody"));if(this.showIndex){var headRow=$createElement("tr",{className:"eos-hd-row"});this.freezeHeadTable.tBodies[0].appendChild(headRow);var colN=$createElement("td",{innerHTML:"<div class=\"eos-hd-inner\" style=\"width:"+(indexColumnDivWidth-1)+"px\" >&#160;</div>",className:"eos-index-col"});if(isIE)colN.style.width=indexColumnWidth+"px";headRow.appendChild(colN);this.freezeHeadDiv.style.display="block";this.freezeHeadDiv.style.left="0px"}var datasetLength=!this.datasetExp?0:this.datasetExp.getLength(),rowNum=this.pageSize||datasetLength;rowNum=(rowNum<0||datasetLength<rowNum)?datasetLength:rowNum;var colName=[];for(var i=0;i<colNum;i++)colName.push(this.fields[i].fieldId);tableHTML.push(tableStartHTML);for(rn=0;rn<rowNum;){var entity=this.datasetExp.get(rn);rowHTML=[trHTML[0]+(rn%2==0?trHTML[1]:"")+trHTML[2]+rn+trHTML[3]];if(this.showIndex){freezeTableHTML.push(rowHTML[0]);freezeTableHTML.push(indexColumnCell[0]);freezeTableHTML.push("&#160;"+indexColumnCell[1]);freezeTableHTML.push("</tr>\n")}for(var cn=0;cn<colNum;cn++){var field=this.fields[cn],cellText=entity.getProperty(field.fieldName),fieStr="";if(field.width<1)fieStr=" style=\"display: none;\"";if(field.onRefreshFunc){if(typeof(field.onRefreshFunc)=="string")field.onRefreshFunc=eval(field.onRefreshFunc);cellText=field.onRefreshFunc(cellText,entity,rn,cn,this)}else if(field.expression)cellText=runExpression(field.template,entity);else if(field.editor)cellText=htmlConversion(field.editor.getDisplayValue(cellText));else cellText=htmlConversion(cellText===undefined||cellText===null?field.nullText:cellText);cellText=cellText===undefined||cellText===null?field.nullText:cellText;rowHTML.push("<td "+fieStr+" fieldId=\""+colName[cn]+"\" class=\""+field.styleClass+" \"><div class=\"eos-inner "+field.styleClass+"\" >"+cellText+"</div></td>")}rowHTML.push(trHTML[4]);tableHTML.push(rowHTML.join(""));rn++}for(var bi=0;bi<this.pageSize-datasetLength;bi++)for(cn=0;cn<colNum;cn++);tableHTML.push("</tbody></table>");this.bodyDiv.innerHTML=tableHTML.join("");this.table=this.bodyDiv.firstChild;this.table.datacell=this;this.tbody=this.table.tBodies[0];this.freezeBodyDiv.innerHTML=freezeTableHTML.join("");this.freezeBodyTable=this.freezeBodyDiv.firstChild;this.isModefied=false;if(this.showIndex){this.headTable.style.marginLeft=this.tableMarginLeft+1+"px";this.table.style.marginLeft=this.tableMarginLeft+1+"px"}else{this.headTable.style.marginLeft=0+"px";this.table.style.marginLeft=0+"px"}this.initAllRows(true);if(this.freezeNumber>0)this.freezeColumn(this.freezeNumber);this.initHeadEvent();var datacell=this;function tt(){datacell.freezeBodyDiv.style.height=datacell.bodyDivHeight-0+"px";if(datacell.headDiv.clientHeight>10)datacell.freezeBodyDiv.style.height=datacell.bodyDiv.clientHeight+"px"}tt();return};Datacell.prototype.initStyleRow=function(){if(!this.rowStyles instanceof Array)this.rowStyles=this.rowStyles.split(",")};Datacell.prototype.locked=function(){this.endEdit();var $=$id(Datacell.BLOLK_ID),_=$id(Datacell.BLOLK_ID+"_IMG");if(!$){$=$createElement("div");document.body.appendChild($);$.id=Datacell.BLOLK_ID}if(!_&&PICTURE_BLANK){_=$createElement("img");_.src=PICTURE_BLANK;_.id=Datacell.BLOLK_ID+"_IMG";$.appendChild(_)}$.style.cursor="wait";$.style.position="absolute";$.style.zIndex="1";var A=getPosition(this.container);$.style.top=A.top;$.style.left=A.left;$.style.width=this.container.offsetWidth;$.style.height=this.container.offsetHeight;if(_){_.style.width=$.style.width;_.style.height=$.style.height;_.border="0"}$.style.display="block"};Datacell.prototype.unlocked=function(){var $=$id(Datacell.BLOLK_ID);if($)$.style.display="none"};Datacell.prototype.insertEmptyRow=function(){return this.insertRow(this.styleEntity.clone(true))};Datacell.prototype.insertRow=function(E,$){if(typeof $=="number")$=this.getRowAt($);E=E||this.cloneEntity()||this.styleEntity.clone(true);if($&&E){E.status=Entity.STATUS_NEW;var B=$.rowIndex;removeClass(this.activeCell,"eos-cell-actived");var _=$.cloneNode(true);addClass(this.activeCell,"eos-cell-actived");this.datasetExp.addEntity(E);this.tbody.insertBefore(_,$);_.setAttribute("__entity_rowno",this.datasetExp.getLength()-1);var C=this.freezeBodyTable.tBodies[0].rows[B],D=this.styleFreezeRow.cloneNode(true);D.className=_.className;D.appendChild(this.styleIndexColumn.cloneNode(true));this.freezeBodyTable.tBodies[0].insertBefore(D,C);this.refreshRow(_);this.selectRow(_);this.isModefied=true;if(this.linkId&&this.linkField){var A=PageControl.getOne(this.linkId);if(A)A.isModefied=true}return _}return this.addRow(E)};Datacell.prototype.addRow=function(B){this.endEdit();if(!this.allowAdd||this.readonly)return null;var A=this.tbody.rows.length;if(A<0)A=0;var C=B||this.styleEntity.clone(true);C.status=Entity.STATUS_NEW;if(!this.datasetExp)return null;var H=this.styleRow.cloneNode(true);H.setAttribute("__entity_rowno",this.datasetExp.getLength());if(this.beforeAdd(H)===false){H=null;delete H;return null}this.datasetExp.addEntity(C);this.tbody.appendChild(H);for(var F=0;F<H.cells.length;F++)H.cells[F].setAttribute("fieldId",this.fields[F].fieldId);A=(this.tbody.rows.length+1)%this.rowStyles.length;addClass(H,(this.tbody.rows.length+1)%2==0?this.rowEvenStyleClass:"");var E=this.styleFreezeRow.cloneNode(true);E.className=H.className;E.appendChild(this.styleIndexColumn.cloneNode(true));this.freezeBodyTable.tBodies[0].appendChild(E);for(F=0;F<this.freezeNumber;F++){var _=H.cells[F].cloneNode(true);_.setAttribute("fieldId",this.fields[F].fieldId);E.appendChild(_)}this.refreshRow(H);this.isModefied=true;this.initAllRows(true);this.bodyDiv.scrollTop=this.bodyDiv.scrollHeight;this.freezeBodyDiv.scrollTop=this.bodyDiv.scrollTop;this.selectRow(H);for(var D=0;D<this.fields.length;D++){var G=this.fields[D];if(G.editor){this.setActiveCell(null,H.cells[D]);this.startEdit();break}}if(this.linkId&&this.linkField){var $=PageControl.getOne(this.linkId);if($)$.isModefied=true}this.refreshRowStyle();this.afterAdd(H);return H};Datacell.prototype.deleteRow=function(_){if(!this.allowDel||this.readonly)return;_=_===0?0:(_||this.activeRow);if(_==null)return;_=this.getRow(_);if(this.beforeDel(_)!==false&&_){this.selectNextRow();if(this.activeCell)this.endEdit();if(this.getEntity(_).status==Entity.STATUS_NEW)this.getEntity(_).status=Entity.STATUS_HIDDEN;else{var A=false;if(this.linkId&&this.linkField){var $=PageControl.getOne(this.linkId);if($){$.isModefied=true;A=true}}this.datasetExp.removeEntity(this.getEntity(_),A)}var B=this.freezeBodyTable.tBodies[0].rows[_.rowIndex];if(_&&_.parentNode)_.parentNode.removeChild(_);if(B&&B.parentNode)B.parentNode.removeChild(B);this.isModefied=true;this.initAllRows(true);this.refreshRowStyle();this.afterDel(_)}};Datacell.prototype.updateEntity=function(A,_,$){A.setProperty(_,$)};Datacell.prototype.getEntity=function(B){var _=B;if(typeof(_)=="number")_=this.table.tBodies[0].rows[_];if(!_)return null;if(_.tagName.toLowerCase()=="td")_=_.parentNode;var $=_.getAttribute("__entity_rowno")/1,A=this.datasetExp.get($);return A};Datacell.prototype.selectRow=function(B,A){this.endEdit();B=this.getRow(B);if(this.beforeSelectRow(B)===false)return false;var $=true;if(this.activeRow!=null)if(this.activeRow==B)$=false;else if(!this.unSelectRow()){this.afterSelectRow(B);return false}this.activeRow=this.activeRow||B;addClass(B,this.rowSelectStyleClass);if($||A)this.setSubComponent(this.getEntity(B));var C=this.getEntity(B);this.onSelectRow(B,C);var _=this;if(C)C.__onUpdate=function(){if(_.getEntity(B).status!=Entity.STATUS_NEW)_.getEntity(B).status=Entity.STATUS_MODIFIED;if(_.syncRefresh)_.refreshRow(B);else _.refreshCell(_.activeCell,_.activeField);_.isModefied=true};this.afterSelectRow(this.activeRow);return true};Datacell.prototype.setSubComponent=function(_){if(this.submitXpath&&_)_.name=this.getSubmitXpath();var $=this;setTimeout(A,100);function A(){for(var B=0;B<$.__subComponent.length;B++){var A=$.__subComponent[B];try{A.freshFromEntity(_)}catch(C){}}}};Datacell.prototype.freshFromEntity=function($){if(this.queryAction){if($)this.queryParam=$.toString();else this.queryParam=null;this.loadData()}else if(this.linkField)if($){this.datasetExp=$.getProperty(this.linkField);if(!this.datasetExp){this.datasetExp=new Dataset(this.linkField);$.setProperty(this.linkField,this.datasetExp)}}else this.datasetExp=new Dataset(this.linkField);this.refresh()};Datacell.prototype.registerSubComponent=function(_){var $=PageControl.getOne(_);this.__subComponent.push($)};Datacell.prototype.initCell=function(B,A){var _=B.getAttribute("fieldId");if(_==Datacell.__INDEX_NAME)return;var $=this.keys[_],C=$.fieldName;this.refreshCell(B,$)};Datacell.prototype.refreshRow=function(_,B){var $=_.cells.length;B=B||this.getEntity(_);for(var H=0;H<$;H++){cell=_.cells[H];var A=cell.getAttribute("fieldId");if(A==Datacell.__INDEX_NAME)continue;var G=this.keys[A],C=G.fieldName,F=B.getProperty(C)?B.getProperty(C):"";if(B==this.activeEntity&&F!=this.activeEntityBackup.getProperty(C)){try{var E=cell.parentNode.rowIndex;if(this.showIndex)addClass(this.freezeBodyTable.tBodies[0].rows[E].cells[0],"eos-row-modefied");else addClass(cell.parentNode,"eos-row-modefied")}catch(D){addClass(cell.parentNode,"eos-row-modefied")}}this.refreshCell(cell,G)}};Datacell.prototype.refresh=function(){this.init();if(this.beforeRefresh()===false)return;this.activeEditor=null;this.activeCell=null;this.activeRow=null;this.activeField=null;this.activeValue=null;this.initBody();this.status=Datacell.STATUS_BLANK;this.onComplete();this.selectFirstRow();this.afterRefresh()};Datacell.prototype.reSortBody=function(A){var _=this.tbody.cloneNode(false);for(var $=0;$<A.length;$++)_.appendChild(A[$]);this.table.replaceChild(_,this.tbody);this.tbody=_};Datacell.prototype.serverSort=function(_){var $=_.field;_.sortType=_.sortType=="_desc"?"_asc":"_desc";this.sortParam="<_orderby><_property>"+$.fieldName+"</_property><_sort>"+_.sortType+"</_sort></_orderby>";this.reload()};Datacell.prototype.refreshSortTh=function($){if(!this.sortArrow)this.sortArrow=$createElement("img");bodyAddNode(this.sortArrow);$.container.appendChild(this.sortArrow);if($.sortType=="_desc")this.sortArrow.src=PICTURE_SORT_DOWN;else if($.sortType=="_asc")this.sortArrow.src=PICTURE_SORT_UP};Datacell.prototype.setPageParam=function($,A,B,_){this.pageParam="<page><begin>"+$+"</begin><length>"+A+"</length><count>"+B+"</count><isCount>"+(!!_)+"</isCount></page>";return this.pageParam};Datacell.prototype.initPageParam=function(){if(this.pageSizeList&&this.pageSizeList!="null"&&this.pageSizeList!="none"&&(","+this.pageSizeList+",").indexOf(","+this.pageSize+",")<0)this.pageSizeList+=","+this.pageSize;var $=0;if(!this.isCount)$=-1;this.setPageParam(0,this.pageSize,$,this.isCount)};Datacell.prototype.initAttachParam=function(){};Datacell.prototype.getQueryForm=function(){var $="<criteria><_entity>"+(this.entityName||"")+"</_entity>";if(this.sortParam)$+=this.sortParam;$+="</criteria>";return $};Datacell.prototype.setJsonDataset=function(json){if(typeof(json)=="string")json=eval(json);if(!(json instanceof Dataset))json=Json2Dataset(json);this.datasetExp=json;this.dataXML="<json/>"};Datacell.prototype.loadJsonData=function(){};Datacell.prototype.addParam=function(key,value){this.paramList=this.paramList||[];var keyJson=eval("this.paramList."+key);if(keyJson)keyJson.value=value;else{keyJson={key:key,value:value};this.paramList.push(keyJson);eval("this.paramList."+key+"=keyJson;")}};Datacell.prototype.loadData=function(){if(this.beforeLoadData()===false)return;if(this.dataXML=="<json/>")return;if(!this.linkId&&!this.queryAction&&this.xpath){var xmlZone=document.getElementById(this.id+"_xml");this.dataXML=xmlZone?xmlZone.innerHTML:null}else if(this.linkId&&this.linkId.indexOf("xml:")==0){xmlZone=document.getElementById(this.linkId.substring(4));this.dataXML=xmlZone?xmlZone.innerHTML:null}else if(this.linkId&&this.isFirstLoad){this.isFirstLoad=false;return}var xmlDom;if(this.dataXML&&this.dataXML!=="<json/>"){this.datasetExp=Dataset.create(this.dataXML,this.xpath);xmlDom=createXmlDom();xmlDom.loadXML(this.dataXML);var pagecond=xmlDom.selectSingleNode("/root/data/page");this.freshPagePilot(pagecond);return}if(this.onLoadData()!==false){if(!this.queryAction)return;var ajax=new HideSubmit(this.queryAction);ajax.sumbitType="2";var param=this.getQueryForm();if(this.queryParam)param+=this.queryParam;if(this.pageParam)param+=this.pageParam;if(this.initParamFunc){try{param+=eval(this.initParamFunc+"()")}catch(e){$handle(e)}}if(param=="")param=null;if(this.paramFormId){var form=$id(this.paramFormId);if(form)for(var i=0;i<form.elements.length;i++){var elem=form.elements[i];if(elem.name)ajax.addParam(elem.name,getElementValue(elem))}}if(this.paramList)for(i=0;i<this.paramList.length;i++){elem=this.paramList[i];if(elem)ajax.addParam(elem.key,elem.value)}ajax.loadData(param);xmlDom=ajax.retDom;this.datasetExp=Dataset.create(xmlDom,this.xpath,this.getSubmitXpath());pagecond=xmlDom.selectSingleNode("/root/data/page");if(pagecond)this.freshPagePilot(pagecond);this.afterLoadData(ajax)}};Datacell.prototype.freshPagePilot=function(E){var $=Dataset.initEntity(E);if(!E){var A=1,D=this.datasetExp?this.datasetExp.getLength():0;if(D<A){A=0;D=A}for(var _=0;_<this.__pagePilot.length;_++){var F=this.__pagePilot[_];if(F.gotoPageText)F.gotoPageText.value=1;if(F.pageInfoDiv){F.pageInfoDiv.innerHTML="<nobr>";F.pageInfoDiv.innerHTML+="<nobr>"+this.PAGE_RECORDINFO_NOCOUNT.replace("{0}",A).replace("{1}",this.datasetExp.getLength())+"</nobr>";F.pageInfoDiv.innerHTML+="</nobr>"}F.freshPilot($,this.readonly,this.allowAdd,this.allowDel)}return}this.totalPage=Number($.getProperty("totalPage"));this.begin=Number($.getProperty("begin"));this.pageSize=Number((!this.pageSize||this.pageSize<1)?$.getProperty("length"):this.pageSize);this.currentPage=Number($.getProperty("currentPage"));if(parseInt(this.currentPage)<1){this.currentPage=1;$.setProperty("currentPage",1)}var C=Number($.getProperty("totalPage")),B=Number($.getProperty("begin"));if((""+C)!="-1")this.SortByServer=true;else if((""+B)=="0")this.SortByServer=false;else this.SortByServer=true;for(_=0;_<this.__pagePilot.length;_++){F=this.__pagePilot[_];F.freshPilot($,this.readonly,this.allowAdd,this.allowDel)}};Datacell.prototype.registerPagePilot=function($){this.__pagePilot.push($);$.datacell=this};Datacell.prototype.reload=function($,_){$=$!==undefined&&$!==null?$:this.recount;if($){if(_)this.begin=_;else this.begin=0;this.setPageParam(this.begin,this.pageSize,-1,this.isCount)}this.loadData();this.refresh()};Datacell.prototype.selectNextRow=function(){if(this.activeRow){var _=nextElement(this.activeRow),$=prevElement(this.activeRow);if(_)this.selectRow(_);else if($)this.selectRow($)}};Datacell.prototype.selectPreRow=function(){if(this.activeRow){var _=nextElement(this.activeRow),$=prevElement(this.activeRow);if($)this.selectRow($);else if(_)this.selectRow(_)}};Datacell.prototype.selectFirstRow=function(){if(this.tbody.rows.length>0){var $=this.tbody.rows[0];this.selectRow($)}else this.setSubComponent(null)};Datacell.prototype.selectLastRow=function(){if(this.tbody.rows.length>0){var $=this.tbody.rows[this.tbody.rows.length-1];this.selectRow($)}};Datacell.prototype.gotoPage=function($){if(this.isModefied)if(window.confirm(DATACELL_MODIFY_CONFIRM))this.submit();this.pageParam=$;this.reload();this.onPageChange()};Datacell.prototype.validateAll=function(){var J=this.activeEntity,I=this.getActiveCell(),F=this.activeRow;for(var G=0;G<this.table.tBodies[0].rows.length;G++){var $=this.table.tBodies[0].rows[G],E=this.getEntity($);if(E.status==Entity.STATUS_NEW||E.status==Entity.STATUS_MODIFIED)for(var C=0;C<this.fields.length;C++){var B=this.fields[C];if(B.editor){var _=B.editor,D=E.getProperty(B.fieldName);_.setValue(D);var H;try{H=_.validate()}catch(K){H=false}if(!H){this.setActiveCell($.cells[C]);this.startEdit();try{H=_.validate()}catch(A){H=false}this.unlocked();return false}}}}this.activeEntity=J;this.activeCell=I;this.activeRow=F;return true};Datacell.prototype.save=function(){if(this.beforeSave()!==false){this.submit();this.afterSave()}};Datacell.prototype.submit=function(){if(this.beforeSubmit()===false||!this.submitAction)return;this.locked();this.endEdit();if(!this.isModefied)alert(DATACELL_MODIFY_NO);else{if(!this.validateAll())return false;var _=false;if(!_){var D=new HideSubmit(this.submitAction);D.sumbitType="3";if(this.paramFormId){var E=$id(this.paramFormId);if(E)for(var C=0;C<E.elements.length;C++){var B=E.elements[C];if(B.name)D.addParam(B.name,getElementValue(B))}}if(this.paramList)for(C=0;C<this.paramList.length;C++){B=this.paramList[C];if(B)D.addParam(B.key,B.value)}D.loadData(this.datasetExp.getSubmitXML(this));if(D.retDom){var $=D.retDom.selectNodes("\rootexception");if($&&$.length>0){var A=getNodeValue($[0]);if(A&&(""+A).indexOf("e")>=0)alert(DATACELL_SAVE_ERR)}}this.afterSubmit(D);this.dataXML=null;this.loadData();this.refresh()}}this.unlocked();return true};Datacell.prototype.reset=function(){};Datacell.prototype.processSortIcon=function($){};Datacell.prototype.addcheckbox=function(){};Datacell.prototype.setReadonly=function($){this.readonly=$||true};Datacell.prototype.getEntitiesXML=function($,A){var B=new StringBuffer();if(A.length>0)for(var _=0;_<A.length;_++){A[_].name=$;B.append(A[_].toString())}return B.toString()};Datacell.prototype.getSubmitXpath=function(){var _=this.submitXpath;if(!_)if(this.xpath){var $=this.xpath.split("/");_=$[$.length-1]}else if(this.linkField)_=this.linkField;return _||"entity"};Datacell.prototype.submitAllByXML=function(){if(this.allEntitiesXMLDiv)this.allEntitiesXMLDiv.parentNode.removeChild(this.allEntitiesXMLDiv);var A=$createElement("div",{style:{display:"none"}});this.allEntitiesXMLDiv=A;var _=this.getSubmitXpath(),$=$createElement("input",{type:"hidden",name:"insertEntities",value:this.getEntitiesXML(_,this.datasetExp.getAlltEntities())});A.appendChild($);this.container.appendChild(A)};Datacell.prototype.submitModifyByXML=function(A,_,D,B){if(!B){this.submitModifyBy3XML(A,_,D);return}if(this.modifyEntitiesXMLDiv)this.modifyEntitiesXMLDiv.parentNode.removeChild(this.modifyEntitiesXMLDiv);var C=$createElement("div",{style:{display:"none"}});this.modifyEntitiesXMLDiv=C;var $=[];$[0]=this.getEntitiesXML(A||"insertEntities",this.datasetExp.getInsertEntities());$[1]=this.getEntitiesXML(_||"updateEntities",this.datasetExp.getModifiedEntities());$[2]=this.getEntitiesXML(D||"deleteEntities",this.datasetExp.getRemovedEntities());var E=$createElement("input",{type:"hidden",name:B||"modifyEntities",value:$.join("")});C.appendChild(E);this.container.appendChild(C)};Datacell.prototype.submitModifyBy3XML=function($,_,A){if(this.modifyEntitiesXMLDiv)this.modifyEntitiesXMLDiv.parentNode.removeChild(this.modifyEntitiesXMLDiv);var C=$createElement("div",{style:{display:"none"}});this.modifyEntitiesXMLDiv=C;var E=$createElement("input",{type:"hidden",name:$||"insertEntities",value:this.getEntitiesXML($||"insertEntities",this.datasetExp.getInsertEntities())}),D=$createElement("input",{type:"text",name:_||"updateEntities",value:this.getEntitiesXML(_||"updateEntities",this.datasetExp.getModifiedEntities())}),B=$createElement("input",{type:"hidden",name:A||"deleteEntities",value:this.getEntitiesXML(A||"deleteEntities",this.datasetExp.getRemovedEntities())});C.appendChild(E);C.appendChild(D);C.appendChild(B);this.container.appendChild(C)};Datacell.prototype.submitAllByHidden=function(){if(!this.validateAll())return false;if(this.allEntitiesHiddenDiv)this.allEntitiesHiddenDiv.parentNode.removeChild(this.allEntitiesHiddenDiv);var _=$createElement("div",{style:{display:"none"}});this.container.appendChild(_);this.allEntitiesHiddenDiv=_;var B=this.datasetExp.name,A=this.getSubmitXpath(),$=Dataset2Array(this.datasetExp,A,true);this.addHiddenByArray($,_)};Datacell.prototype.submitModifyByHidden=function(A,_,$){if(!this.validateAll())return false;if(this.modifyEntitiesHiddenDiv)this.modifyEntitiesHiddenDiv.parentNode.removeChild(this.modifyEntitiesHiddenDiv);var B=$createElement("div",{style:{display:"none"}});this.container.appendChild(B);this.modifyEntitiesHiddenDiv=B;var C=Dataset2Array(this.datasetExp.getInsertDataset(),A||"insertEntities");this.addHiddenByArray(C,B);C=Dataset2Array(this.datasetExp.getModifiedDataset(),_||"updateEntities");this.addHiddenByArray(C,B);C=Dataset2Array(this.datasetExp.getRemovedDataset(),$||"deleteEntities");this.addHiddenByArray(C,B)};Datacell.prototype.addHiddenByArray=function(C,_){for(var $=0;$<C.length;$++){if(C[$].value==null)continue;var B=C[$].key;B=B.replaceAll("/",".");var A=$createElement("input",{type:"hidden",name:B,value:C[$].value});_.appendChild(A)}};Datacell.prototype.unSelectRow=function(){var $=this.activeRow;if(!$)return true;else this.endEdit();if(this.onUnSelectRow($,this.getEntity($))){removeClass($,this.rowSelectStyleClass);this.activeRow=null;return true}else return false};Datacell.prototype.onUnSelectRow=function($,_){return true};Datacell.prototype.setValue=function($){this.datasetExp=$;$info("datacell setvalue "+$);this.refresh()};Datacell.prototype.getValue=function(){return this.datasetExp};Datacell.prototype.setFocus=function(){};Datacell.prototype.lostFocus=function(){this.endEdit()};function Pilot($){this.id=$;PageControl.add($,this);this.container=null;this.currPage=1;this.totalPages=null;this.currRecord=null;this.totalRecords=null;this.width="100%";this.height="100%";this.inputClass="INPUT";this.readonly=false;this.addButton=null;this.deleteButton=null;this.firstPageButton=null;this.nextPageButton=null;this.prePageButton=null;this.lastPageButton=null;this.gotoPageText=null;this.gotoPageButton=null;this.saveButton=null;this.reloadButton=null;this.begin=0;this.length=10;this.count=-1;this.isCount=false;this.totalPage=-1;this.currentPage=-1;this.isLast=false;this.isFirst=true;this.first_able=true;this.pre_able=true;this.next_able=true;this.last_able=true;this.add_able=true;this.delete_able=true}Datacell.prototype.setCustomTool=function($,_){var _=_||this.__pagePilot[0].id;this.customToolHTML=$;var A=$id(_+"_custom_zone");if(A){A.innerHTML=this.customToolHTML;return true}return false};Datacell.prototype.hiddenButtons=function($){};Pilot.prototype.init=function(){};Pilot.prototype.build=function(){if(this.datacell.toolbarLocation=="top")this.container=this.datacell.topToolbarDiv;else this.container=this.datacell.bottomToolbarDiv;var E=this.datacell,C=E.toolsList.split(",");str=[];var G=(""+this.datacell.pageSizeList)!="none"&&(""+this.datacell.pageSizeList)!="null";for(var F=0;F<C.length;F++){var O=C[F].split(":"),I=O[1]||null;O=O[0];if(I)I=" "+I+" ";switch(O){case"nav":str=str.concat(["<div class=\"eos-tool-zone\" id=\""+this.id+"_nav_zone\" >",(I&&I.indexOf(" first ")<0)?"":"<a title=\""+TOOLTIP_FIRST_PAGE+"\" id=\""+this.id+"_first\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-first\"></div></a>",(I&&I.indexOf(" prev ")<0)?"":"<a title=\""+TOOLTIP_PRIVOUS_PAGE+"\" id=\""+this.id+"_previous\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-prev\"></div></a>",(I&&I.indexOf(" next ")<0)?"":"<a title=\""+TOOLTIP_NEXT_PAGE+"\" id=\""+this.id+"_next\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-next\"></div></a>",(I&&I.indexOf(" last ")<0)?"":"<a title=\""+TOOLTIP_LAST_PAGE+"\" id=\""+this.id+"_last\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-last\"></div></a>",(I&&I.indexOf(" goto ")<0)?"":"<input type=\"text\" size=\"3\" maxlength=\"4\" class=\"eos-grid-tool-goto-input\" id=\""+this.id+"_input\" /><a title=\""+TOOLTIP_GOTO+"\" id=\""+this.id+"_goto\" href=\"javascript:void(0);\" style=\"margin-left:0px;\"><div class=\"eos-grid-tool-goto\"></div></a>","</div>"]);break;case"pagesize":if(G)str=str.concat(["<div >","<div class=\"eos-grid-tool-pageinfo\" id=\""+this.id+"_pagesize\"  >","</div>","</div>"]);break;case"custom":str=str.concat(["<div class=\"eos-tool-zone\" id=\""+this.id+"_custom_zone\" >",E.customToolHTML||"","</div>"]);break;case"edit":str=str.concat(["<div class=\"eos-tool-zone\">",(I&&I.indexOf(" add ")<0)?"":"<a title=\""+TOOLTIP_ADD+"\" id=\""+this.id+"_add\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-add\"></div></a>",(I&&I.indexOf(" del ")<0)?"":"<a title=\""+TOOLTIP_DELETE+"\" id=\""+this.id+"_del\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-del\"></div></a>",(I&&I.indexOf(" save ")<0)?"":"<a title=\""+TOOLTIP_SAVE+"\" id=\""+this.id+"_save\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-save\"></div></a>",(I&&I.indexOf(" reload ")<0)?"":"<a title=\""+TOOLTIP_RELOAD+"\" id=\""+this.id+"_reload\" href=\"javascript:void(0);\"><div class=\"eos-grid-tool-reload\"></div></a>","</div>"]);break;case"info":str=str.concat(["<div class=\"eos-tool-zone\">","<div class=\"eos-grid-tool-pageinfo\" id=\""+this.id+"_pageinfo\"  >","</div>","</div>"]);break}}this.container.innerHTML=str.join("\n");this.firstPageButton=$id(this.id+"_first");this.nextPageButton=$id(this.id+"_next");this.prePageButton=$id(this.id+"_previous");this.lastPageButton=$id(this.id+"_last");this.gotoPageText=$id(this.id+"_input");this.gotoPageButton=$id(this.id+"_goto");var D=$id(this.id+"_pagesize");if(G&&D){var S={},A=this.datacell.pageSizeList.split(",");for(F=0;F<A.length;F++)S[A[F]]=A[F];this.pageSizeSelect=createSelect(S,this.datacell.pageSize);this.pageSizeSelect.id=this.id+"_size";this.pageSizeSelect.className="eos-pagesize-select";D.appendChild(this.pageSizeSelect)}this.addButton=$id(this.id+"_add");this.deleteButton=$id(this.id+"_del");this.saveButton=$id(this.id+"_save");this.reloadButton=$id(this.id+"_reload");this.pageInfoDiv=$id(this.id+"_pageinfo");var M=this;if(G&&this.pageSizeSelect){function $(){M.datacell.endEdit();M.datacell.pageSize=Number(M.pageSizeSelect.value);M.gotoPage(1)}eventManager.add(this.pageSizeSelect,"change",$)}function P(){var $=eventManager.getKeyCode();if($==27){eventManager.stopEvent();M.gotoInputPage()}}eventManager.add(this.gotoPageText,"keypress",P);function T(){M.addRow()}eventManager.add(this.addButton,"click",T);function K(){E.endEdit();M.deleteRow()}eventManager.add(this.deleteButton,"click",K);function R(){E.endEdit();if(M.firstPageButton._disabled)return;M.gotoFirstPage()}eventManager.add(this.firstPageButton,"click",R);function H(){E.endEdit();if(M.nextPageButton._disabled)return;M.gotoNextPage()}eventManager.add(this.nextPageButton,"click",H);function Q(){E.endEdit();if(M.prePageButton._disabled)return;M.gotoPrePage()}eventManager.add(this.prePageButton,"click",Q);function _(){E.endEdit();if(M.lastPageButton._disabled)return;M.gotoLastPage()}eventManager.add(this.lastPageButton,"click",_);function B(){E.endEdit();if(M.gotoPageButton._disabled)return;M.gotoInputPage()}eventManager.add(this.gotoPageButton,"click",B);function J(){eventManager.stopEvent();E.endEdit();if(M.saveButton._disabled)return;M.datacell.save()}eventManager.add(this.saveButton,"click",J);function N(){E.endEdit();if(M.reloadButton._disabled)return;var $=true;if(M.datacell.isModefied&&confirm(DATACELL_MODIFY_CONFIRM))M.datacell.submit();else M.datacell.reload()}eventManager.add(this.reloadButton,"click",N);function L(){M.clearup()}eventManager.add(window,"unload",L)};Pilot.prototype.freshPilot=function(G,L,_,F){var H=true,K=true,C=true,I=true,B=false;if(G){B=true;this.begin=parseInt(G.getProperty("begin"))||0;this.datacell.pageSize=Number(this.datacell.pageSize<1?parseInt(G.getProperty("length")):this.datacell.pageSize);this.count=parseInt(G.getProperty("count"));this.datacell.isCount=(G.getProperty("isCount")=="true");this.totalPage=parseInt(G.getProperty("totalPage"));this.currentPage=parseInt(G.getProperty("currentPage"))||1;this.isLast=(G.getProperty("isLast")=="true");this.isFirst=(G.getProperty("isFirst")=="true");this.currentPage=this.currentPage<1?1:this.currentPage;if(!this.datacell.isCount)this.currentPage=parseInt(this.begin/this.datacell.pageSize)+1;var A=isNaN(this.currentPage/1)||this.currentPage<1?1:this.currentPage,J=isNaN(this.totalPage/1)||this.totalPage<1?1:this.totalPage,E=isNaN(this.count/1)||this.count<0?0:this.count,$=Number(isNaN(this.begin/1)||this.begin<0?0:this.begin)+1,D=$+this.datacell.pageSize-1;D=D>E?E:D;D=D<$?$:D;if(this.gotoPageText)this.gotoPageText.value=A;if(this.pageInfoDiv){this.pageInfoDiv.innerHTML="<nobr>";if(!this.datacell.isCount||E<0)this.pageInfoDiv.innerHTML+="<nobr>"+this.datacell.PAGE_RECORDINFO_NOCOUNT.replace("{0}",$).replace("{1}",D)+"</nobr>";else{this.pageInfoDiv.innerHTML+=this.datacell.PAGE_RECORDINFO.replace("{0}",$).replace("{1}",D).replace("{2}",E);this.pageInfoDiv.innerHTML+="&#160;&#160;<nobr>"+this.datacell.PAGE_INFO.replace("{0}",J)+"</nobr>"}this.pageInfoDiv.innerHTML+="</nobr>"}}if(this.firstPageButton)this.firstPageButton._disabled=this.isFirst||!B;if(this.prePageButton)this.prePageButton._disabled=this.isFirst||!B;if(this.nextPageButton)this.nextPageButton._disabled=this.isLast||!B;if(this.lastPageButton)this.lastPageButton._disabled=this.isLast||this.count<0||!B;if(this.isFirst||!B){setOpacity(this.firstPageButton,0.5);setOpacity(this.prePageButton,0.5)}else{setOpacity(this.firstPageButton,1);setOpacity(this.prePageButton,1)}if(this.isLast||!B){setOpacity(this.nextPageButton,0.5);setOpacity(this.lastPageButton,0.5)}else{setOpacity(this.nextPageButton,1);setOpacity(this.lastPageButton,1)}if(this.count<0||!B)setOpacity(this.lastPageButton,0.5);if(!B||!G.getProperty("begin"))if(this.gotoPageButton){this.gotoPageButton._disabled=true;this.gotoPageText.disabled=true;setOpacity(this.gotoPageButton,0.5)}};Pilot.prototype.clearup=function(){for(var $ in this){try{this[$]=null}catch(_){$handle(_)}}};Pilot.prototype.gotoPage=function(_){_=Number(_);if(isNaN(_))_=1;_=parseInt(_,10);this.currentPage=_;if(_<1)_=1;var $=(_-1)*Number(this.datacell.pageSize);if($<0)$=0;var B=this.count;if(!this.datacell.isCount)B=-1;var A=this.datacell.setPageParam($,this.datacell.pageSize,B,this.datacell.isCount);this.datacell.gotoPage(A)};Pilot.prototype.gotoInputPage=function(){var $=Number(this.gotoPageText.value);if(isNaN($))alert(DATACELL_PAGENUM_ERR);else this.gotoPage($)};Pilot.prototype.gotoFirstPage=function(){if(this.first_able)this.gotoPage(1)};Pilot.prototype.gotoNextPage=function(){if(this.next_able)this.gotoPage(this.getCurrPage()+1)};Pilot.prototype.gotoPrePage=function(){if(this.pre_able)this.gotoPage(this.getCurrPage()-1)};Pilot.prototype.gotoLastPage=function(){if(this.last_able)this.gotoPage(this.getPageCount())};Pilot.prototype.addRow=function(){this.datacell.addRow()};Pilot.prototype.deleteRow=function(){this.datacell.deleteRow()};Pilot.prototype.reloadData=function(){this.datacell.reload()};Pilot.prototype.submit=function(){this.datacell.submit()};Pilot.prototype.setButton=function(A,D,E,C,_,$,B){if(A){this.first_able=true;this.firstPageButton.src=this.iconPath+PICTURE_FIRST_BUTTON}else{this.first_able=false;this.firstPageButton.src=this.iconPath+PICTURE_FIRST_DISABLE}if(D){this.pre_able=true;this.prePageButton.src=this.iconPath+PICTURE_PRIVOUS_BUTTON}else{this.pre_able=false;this.prePageButton.src=this.iconPath+PICTURE_PRIVOUS_DISABLE}if(E){this.next_able=true;this.nextPageButton.src=this.iconPath+PICTURE_NEXT_BUTTON}else{this.next_able=false;this.nextPageButton.src=this.iconPath+PICTURE_NEXT_DISABLE}if(C){this.last_able=true;this.lastPageButton.src=this.iconPath+PICTURE_LAST_BUTTON}else{this.last_able=false;this.lastPageButton.src=this.iconPath+PICTURE_LAST_DISABLE}if($||_)this.addButton.src=this.iconPath+PICTURE_ADD_DISABLE;else this.addButton.src=this.iconPath+PICTURE_ADD_BUTTON;if(!B||_)this.deleteButton.src=this.iconPath+PICTURE_DELETE_DISABLE;else this.deleteButton.src=this.iconPath+PICTURE_DELETE_BUTTON};Pilot.prototype.getPageCount=function(){return this.totalPage};Pilot.prototype.getCurrPage=function(){return this.currentPage};Datacell.prototype.rowMoveUp=function(C){C=C||this.activeRow;if(!C)return;var A=C.parentNode,B=C.rowIndex,$=C.getAttribute("__entity_rowno");if(B<1)return;var D=A.rows[B-1],_=D.getAttribute("__entity_rowno");A.insertBefore(C,D)};Datacell.prototype.rowMoveDown=function(C){C=C||this.activeRow;if(!C)return;var A=C.parentNode,B=C.rowIndex,$=C.getAttribute("__entity_rowno");if(B>=A.rows.length-1)return;var D=A.rows[B+1],_=D.getAttribute("__entity_rowno");A.insertBefore(D,C)};Datacell.prototype.getActiveRow=function(){return this.activeRow};Datacell.prototype.getActiveCell=function(){return this.activeCell};Datacell.prototype.getActiveEntity=function(){return this.getEntity(this.getActiveRow())};Datacell.prototype.showEditor=function(){PageControl.addtoStack(this);this.datacellContainer.style.display="";this.datacellContainer.onmousedown=function(){eventManager.stopEvent()}};Datacell.prototype.hideEditor=function(){if(this.activeEditor)this.activeEditor.hideEditor();if(this.datacellContainer){this.datacellContainer.style.display="none";this.datacellContainer.onmousedown=null}};Datacell.prototype.hide=function(){this.hideEditor()};Datacell.prototype.setPosition=function(B,_,C,$){this.datacellContainer.style.position="absolute";var D=getMaxZindex(),A=getMaxZindex(document);if(this.datacellContainer.style.zIndex!=A)this.datacellContainer.style.zIndex=A;setElementXY(this.datacellContainer,[B,_])};Datacell.prototype.getDisplayValue=function($){return $};Datacell.prototype.isFocus=function(){return false};Datacell.prototype.validate=function(){return true};Datacell.prototype.onSelectRow=function($,_){};Datacell.prototype.onDeleteRow=function($,_){return true};Datacell.prototype.onSubmit=function(){return true};Datacell.prototype.onAddRow=function($){return true};Datacell.prototype.onUpdateCell=function(){};Datacell.prototype.onLoadData=function(){return true};Datacell.prototype.onUpdateRow=function($){return true};Datacell.prototype.onUpdate=function(){return true};Datacell.prototype.beforeInit=function(){};Datacell.prototype.afterInit=function(){};Datacell.prototype.beforeLoadData=function(){};Datacell.prototype.afterLoadData=function(){};Datacell.prototype.beforeRefresh=function(){};Datacell.prototype.afterRefresh=function(){};Datacell.prototype.beforeSubmit=function(){};Datacell.prototype.afterSubmit=function(){};Datacell.prototype.beforeSubmit=function(){};Datacell.prototype.beforeSave=function(){};Datacell.prototype.afterSave=function(){};Datacell.prototype.beforeRefreshCell=function(){};Datacell.prototype.beforeAdd=function(){};Datacell.prototype.afterAdd=function(){};Datacell.prototype.beforeEdit=function(A,_,$){};Datacell.prototype.afterEdit=function($,_,A){};Datacell.prototype.beforeDel=function(){};Datacell.prototype.afterDel=function(){};Datacell.prototype.beforeSelectRow=function(){};Datacell.prototype.afterSelectRow=function(){};Datacell.prototype.beforeUnselectRow=function(){};Datacell.prototype.afterUnselectRow=function(){};Datacell.prototype.onComplete=function(){};Datacell.prototype.onPageChange=function(){};Datacell.prototype.onClickHead=function(B,A,$,_){};Datacell.prototype.onClickCell=function(A,C,$,B,D,_){};Datacell.prototype.onClickRow=function($,A,B,_){};Datacell.activeGrid=null;Datacell.STATUS_BLANK=0;Datacell.STATUS_INITED=1;Datacell.STATUS_MODEFIED=2;Datacell.BLOLK_ID="__DATACELL_BLOCK";Datacell.__INDEX_NAME="__INDEX";Datacell.outClick=function(G,_,E){var C=G.datacell,H=C.editorContainer;if(H&&_){var D=E.x,I=E.y,$=getPosition(H),J=$.top,A=$.left,B=A+H.offsetWidth,F=J+H.offsetHeight;if(!H.contains(_))if(J>I||A>D||B<D||F<I)C.endEdit()}else C.endEdit()};Datacell.isCell=function($){if($&&$.tagName){var A=$.tagName.toLowerCase()=="td",_=$.getAttribute("fieldId");if(_&&A)return true;return false}return false};Datacell.isHead=function($){if($.tagName){var A=$.tagName.toLowerCase()=="th",_=$.getAttribute("__type")=="head";if(_&&A)return true;return false}return false};Datacell.getDatacellByCell=function(A){try{var _=getParentByTagName(A,"table"),B=_.datacell;return B}catch($){$handle($);return null}};Datacell.checkCell=function(E,G,C,_,A,H,D){var F="",B=D;if(E==H){F="checked";B=H}B=B||B===0?B:"";var $="fieldFunc_"+A.id+"_"+_;Datacell[$]=function(B){var $=A.fields[_].fieldName;if(B.checked)G.setProperty($,H);else G.setProperty($,D)};return"<input type=\"checkbox\" "+F+" value=\""+(""+B).replace(/\"/igm,"\\\"").replace(/\n/igm,"\\n")+"\" "+" onclick=\"Datacell['"+$+"'](this)\"  />"};Datacell.checkCellHandler=function($){};Datacell.getFormatValue=function($,_){if(isDateFormat(_)){if(isTimeFormat(_))return dateFormat($,DATETIME_FORMAT,_);else return dateFormat($,DATE_FORMAT,_)}else if(isTimeFormat(_))return timeFormat($,TIME_FORMAT,_);else return formatNumber($,_)};Datacell.$editor=function($){if(!$||($&&$.getValue))return $;return SimpleEditor($)};Datacell.getSortValue=function(A,B,C){var $=A.datasetExp.get(B.getAttribute("__entity_rowno")/1).getProperty(C),_=$?Number($):$;$=isNaN(_)?$:_;return $};Datacell.getSortDefaultValue=function(A,$,_){return $.getAttribute("__entity_rowno")/1};Datacell.initGlobalEvent=function(){eventManager.add(document.body,"keyup",function($){if(Datacell.activeGrid&&Datacell.activeGrid.getActiveCell())Datacell.activeGrid&&Datacell.activeGrid._onKeyDown($)});eventManager.add(document.body,"click",function($){if(Datacell.activeGrid&&Datacell.activeGrid.headDiv.clientHeight>10);});eventManager.add(document.body,"mousemove",function($){Datacell.activeGrid&&Datacell.doDocGridHandler($,Datacell.activeGrid)});eventManager.add(document.body,"mouseup",function($){Datacell.activeGrid&&Datacell.endDocGridHandler($,Datacell.activeGrid)})};Datacell.doDocGridHandler=function(A,_){A=A||window.event;var B=eventManager.getPointX();if(_.splitLine.style.display=="block"){var $=B-_.viewportXY[0];_.splitLine.style.left=$+"px"}};Datacell.endDocGridHandler=function(E,_){E=E||window.event;var B=eventManager.getPointX();if(_.splitLine.style.display=="block"){var A=_.resizeColumn;A.newRightX=B-_.viewportXY[0];var D=A.newRightX-A.oldRightX,C=parseInt(CSSUtil.getRule("."+A.styleClass,true).style.width),$=D+C;_.setColumnWidth(A,$);_.resizeColumn=false;_.splitLine.style.display="none";_.headDiv.style.cursor="auto";_.gridMask.style.cursor="auto";_.gridMask.style.display="none";_.syncScroll()}};Datacell.onWindowResize=function($){if(_eos_curr_open_panel!=null)if(!$.isInCurrPanel())return;$.bodyDivHeight=$.containerTD.offsetHeight-$.headHeight;var _=false;if($.width.indexOf("%")!=-1){$.bodyDiv.style.width="1px";_=true}if($.height.indexOf("%")!=-1){$.container.style.height="100%";$.bodyDiv.style.height="1px";$.freezeBodyDiv.style.height=$.bodyDiv.clientHeight+"px";_=true}else{if($.bodyDivHeight>0)$.bodyDiv.style.height=$.bodyDivHeight+"px";if($.bodyDiv.clientHeight>0)$.freezeBodyDiv.style.height=$.bodyDiv.clientHeight+"px"}if(_)setTimeout(function(){return Datacell.autoResize.apply($,[$])},1);$.syncScroll()};Datacell.autoResize=function(){var $=this;if($.height.indexOf("%")!=-1){$.bodyDivHeight=$.containerTD.offsetHeight-$.headHeight;if($.bodyDivHeight>0)$.bodyDiv.style.height=$.bodyDivHeight+"px";if($.bodyDiv.clientHeight>0)$.freezeBodyDiv.style.height=$.bodyDiv.clientHeight+"px"}if($.width.indexOf("%")!=-1)$.bodyDiv.style.width=$.containerTD.offsetWidth};Datacell.prototype.autoResizeS1=function(){var $=this;$.bodyDivHeight=$.containerTD.offsetHeight-$.headHeight;var _=false;if($.width.indexOf("%")!=-1){$.bodyDiv.style.width="1px";_=true}if($.height.indexOf("%")!=-1){$.container.style.height="100%";$.datacellContainer.style.height="100%";$.bodyDiv.style.height="1px";$.freezeBodyDiv.style.height=$.bodyDiv.clientHeight+"px";_=true}else{if($.bodyDivHeight>0)$.bodyDiv.style.height=$.bodyDivHeight+"px";if($.bodyDiv.clientHeight>0)$.freezeBodyDiv.style.height=$.bodyDiv.clientHeight+"px"}};Datacell.prototype.autoResizeS2=Datacell.autoResize;Datacell.prototype.isInCurrPanel=function(){if(_eos_curr_open_panel!=null){var $=this.datacellContainer.offsetParent;while(true){if($==null)return false;if($==_eos_curr_open_panel.table)return true;$=$.offsetParent}}else return false};Datacell.createSwidthCheckBox=function(D,C,F,B,A){var _=A.getField(B),$=_.checkedValue,G=_.unCheckedValue,E="";if($==D)E="checked";return"<input type=\"checkbox\" "+E+" swidthCheckbox=\"true\"/>"};function VerifyCode($){this.config=$}VerifyCode.prototype.init=function(){this.container=$id(this.config.name+"_container");if(this.config.hasInput==true)this.initInput();this.initImg();PageControl.add(this.config.name,this)};VerifyCode.prototype.initInput=function(){if(this.config.style)this.text=$create("<input style="+this.config.style+">");else this.text=$create("input");this.text.className=this.config.className||"";this.text.name=this.config.name;this.text.validateAttr=this.config.validateAttr||"";this.container.appendChild(this.text)};VerifyCode.prototype.initImg=function(){this.codeImage=$create("img");this.container.appendChild(this.codeImage);this.codeImage.style.verticalAlign="text-bottom";this.codeImage.style.marginLeft="6px";this.codeImage.title=VERIFYCODETITLE;this.imageUrl=contextPath+"/common/jsp/codeImage.jsp?name="+this.config.name+"&imageHeight="+this.config.imageHeight+"&length="+this.config.length+"&type="+this.config.type;this.codeImage.src=this.imageUrl;var $=this;eventManager.add(this.codeImage,"click",function(){return function(){this.codeImage.src=this.imageUrl+"&timestamp="+Math.random()}.call($)})}